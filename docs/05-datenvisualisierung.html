<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Datenvisualisierung – Einführung in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./06-datenimport-und-export.html" rel="next">
<link href="./04-datentransformation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./05-datenvisualisierung.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenvisualisierung</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/bayReuth-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Einführung in R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-einfuehrung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Workflow</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-grundlagen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Grundlagen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-datentransformation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Datentransformation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-datenvisualisierung.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenvisualisierung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-datenimport-und-export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenimport und -export</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-datenbereinigung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Datenbereinigung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-datenzusammenführung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Datenzusammenführung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-geodatenbearbeitung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Geodatenbearbeitung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-lernressourcen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lernressourcen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#die-grammar-of-graphics" id="toc-die-grammar-of-graphics" class="nav-link active" data-scroll-target="#die-grammar-of-graphics"><span class="header-section-number">5.1</span> Die <em>grammar of graphics</em></a>
  <ul>
  <li><a href="#ein-gapminder-beispiel" id="toc-ein-gapminder-beispiel" class="nav-link" data-scroll-target="#ein-gapminder-beispiel"><span class="header-section-number">5.1.1</span> Ein <code>gapminder</code>-Beispiel</a></li>
  </ul></li>
  <li><a href="#ggplot2" id="toc-ggplot2" class="nav-link" data-scroll-target="#ggplot2"><span class="header-section-number">5.2</span> <code>ggplot2</code></a>
  <ul>
  <li><a href="#die-grundfunktion" id="toc-die-grundfunktion" class="nav-link" data-scroll-target="#die-grundfunktion"><span class="header-section-number">5.2.1</span> Die Grundfunktion</a></li>
  <li><a href="#sec-datenvisualisierung-ggplot2-geoms" id="toc-sec-datenvisualisierung-ggplot2-geoms" class="nav-link" data-scroll-target="#sec-datenvisualisierung-ggplot2-geoms"><span class="header-section-number">5.2.2</span> Geoms hinzufügen</a></li>
  <li><a href="#sec-datenvisualisierung-ggplot2-aesthetiken" id="toc-sec-datenvisualisierung-ggplot2-aesthetiken" class="nav-link" data-scroll-target="#sec-datenvisualisierung-ggplot2-aesthetiken"><span class="header-section-number">5.2.3</span> Ästhetiken</a></li>
  <li><a href="#grafiken-exportieren" id="toc-grafiken-exportieren" class="nav-link" data-scroll-target="#grafiken-exportieren"><span class="header-section-number">5.2.4</span> Grafiken exportieren</a></li>
  </ul></li>
  <li><a href="#visualisierungsarten" id="toc-visualisierungsarten" class="nav-link" data-scroll-target="#visualisierungsarten"><span class="header-section-number">5.3</span> Visualisierungsarten</a>
  <ul>
  <li><a href="#mengen" id="toc-mengen" class="nav-link" data-scroll-target="#mengen"><span class="header-section-number">5.3.1</span> Mengen</a>
  <ul class="collapse">
  <li><a href="#sec-datenvisualisierung-visualisierungsarten-mengen-saeulendiagramm" id="toc-sec-datenvisualisierung-visualisierungsarten-mengen-saeulendiagramm" class="nav-link" data-scroll-target="#sec-datenvisualisierung-visualisierungsarten-mengen-saeulendiagramm"><span class="header-section-number">5.3.1.1</span> Säulendiagramm: Anzahl</a></li>
  <li><a href="#säulendiagramm-größen" id="toc-säulendiagramm-größen" class="nav-link" data-scroll-target="#säulendiagramm-größen"><span class="header-section-number">5.3.1.2</span> Säulendiagramm: Größen</a></li>
  </ul></li>
  <li><a href="#sec-datenvisualisierung-visualisierungsarten-anteile" id="toc-sec-datenvisualisierung-visualisierungsarten-anteile" class="nav-link" data-scroll-target="#sec-datenvisualisierung-visualisierungsarten-anteile"><span class="header-section-number">5.3.2</span> Anteile</a>
  <ul class="collapse">
  <li><a href="#gestapeltes-balkendiagramm" id="toc-gestapeltes-balkendiagramm" class="nav-link" data-scroll-target="#gestapeltes-balkendiagramm"><span class="header-section-number">5.3.2.1</span> Gestapeltes Balkendiagramm</a></li>
  <li><a href="#treemap" id="toc-treemap" class="nav-link" data-scroll-target="#treemap"><span class="header-section-number">5.3.2.2</span> Treemap</a></li>
  </ul></li>
  <li><a href="#zeitliche-verläufe" id="toc-zeitliche-verläufe" class="nav-link" data-scroll-target="#zeitliche-verläufe"><span class="header-section-number">5.3.3</span> Zeitliche Verläufe</a>
  <ul class="collapse">
  <li><a href="#sec-datenvisualisierung-arten-zeitlich-linie" id="toc-sec-datenvisualisierung-arten-zeitlich-linie" class="nav-link" data-scroll-target="#sec-datenvisualisierung-arten-zeitlich-linie"><span class="header-section-number">5.3.3.1</span> Liniendiagramm</a></li>
  <li><a href="#flächendiagramm" id="toc-flächendiagramm" class="nav-link" data-scroll-target="#flächendiagramm"><span class="header-section-number">5.3.3.2</span> Flächendiagramm</a></li>
  </ul></li>
  <li><a href="#verteilungen" id="toc-verteilungen" class="nav-link" data-scroll-target="#verteilungen"><span class="header-section-number">5.3.4</span> Verteilungen</a>
  <ul class="collapse">
  <li><a href="#histogramm" id="toc-histogramm" class="nav-link" data-scroll-target="#histogramm"><span class="header-section-number">5.3.4.1</span> Histogramm</a></li>
  <li><a href="#boxplot" id="toc-boxplot" class="nav-link" data-scroll-target="#boxplot"><span class="header-section-number">5.3.4.2</span> Boxplot</a></li>
  <li><a href="#violindiagramm" id="toc-violindiagramm" class="nav-link" data-scroll-target="#violindiagramm"><span class="header-section-number">5.3.4.3</span> Violindiagramm</a></li>
  </ul></li>
  <li><a href="#beziehungen" id="toc-beziehungen" class="nav-link" data-scroll-target="#beziehungen"><span class="header-section-number">5.3.5</span> Beziehungen</a>
  <ul class="collapse">
  <li><a href="#sec-visualisierungsarten-beziehungen-streudiagramm" id="toc-sec-visualisierungsarten-beziehungen-streudiagramm" class="nav-link" data-scroll-target="#sec-visualisierungsarten-beziehungen-streudiagramm"><span class="header-section-number">5.3.5.1</span> Streudiagramm</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#visualisierungen-verfeinern" id="toc-visualisierungen-verfeinern" class="nav-link" data-scroll-target="#visualisierungen-verfeinern"><span class="header-section-number">5.4</span> Visualisierungen verfeinern</a>
  <ul>
  <li><a href="#sec-datenvisualisierung-verfeinern-kombinationen" id="toc-sec-datenvisualisierung-verfeinern-kombinationen" class="nav-link" data-scroll-target="#sec-datenvisualisierung-verfeinern-kombinationen"><span class="header-section-number">5.4.1</span> Kombinationen mehrerer Geoms</a>
  <ul class="collapse">
  <li><a href="#linien-mit-punkten" id="toc-linien-mit-punkten" class="nav-link" data-scroll-target="#linien-mit-punkten"><span class="header-section-number">5.4.1.1</span> Linien mit Punkten</a></li>
  <li><a href="#regressionslinien" id="toc-regressionslinien" class="nav-link" data-scroll-target="#regressionslinien"><span class="header-section-number">5.4.1.2</span> Regressionslinien</a></li>
  <li><a href="#text" id="toc-text" class="nav-link" data-scroll-target="#text"><span class="header-section-number">5.4.1.3</span> Text</a></li>
  </ul></li>
  <li><a href="#sec-datenvisualisierung-verfeinern-facetting" id="toc-sec-datenvisualisierung-verfeinern-facetting" class="nav-link" data-scroll-target="#sec-datenvisualisierung-verfeinern-facetting"><span class="header-section-number">5.4.2</span> Facetting</a></li>
  <li><a href="#legenden" id="toc-legenden" class="nav-link" data-scroll-target="#legenden"><span class="header-section-number">5.4.3</span> Legenden</a></li>
  <li><a href="#koordinatensysteme" id="toc-koordinatensysteme" class="nav-link" data-scroll-target="#koordinatensysteme"><span class="header-section-number">5.4.4</span> Koordinatensysteme</a>
  <ul class="collapse">
  <li><a href="#achseneinheit" id="toc-achseneinheit" class="nav-link" data-scroll-target="#achseneinheit"><span class="header-section-number">5.4.4.1</span> Achseneinheit</a></li>
  <li><a href="#achsenbegrenzungen" id="toc-achsenbegrenzungen" class="nav-link" data-scroll-target="#achsenbegrenzungen"><span class="header-section-number">5.4.4.2</span> Achsenbegrenzungen</a></li>
  <li><a href="#achsenmarkierungen-und-markierungsbeschriftungen" id="toc-achsenmarkierungen-und-markierungsbeschriftungen" class="nav-link" data-scroll-target="#achsenmarkierungen-und-markierungsbeschriftungen"><span class="header-section-number">5.4.4.3</span> Achsenmarkierungen und Markierungsbeschriftungen</a></li>
  </ul></li>
  <li><a href="#sec-visualisierungen-verfeinern-beschriftungen" id="toc-sec-visualisierungen-verfeinern-beschriftungen" class="nav-link" data-scroll-target="#sec-visualisierungen-verfeinern-beschriftungen"><span class="header-section-number">5.4.5</span> Beschriftungen</a>
  <ul class="collapse">
  <li><a href="#titel-untertitel-achsen-quellenangaben" id="toc-titel-untertitel-achsen-quellenangaben" class="nav-link" data-scroll-target="#titel-untertitel-achsen-quellenangaben"><span class="header-section-number">5.4.5.1</span> Titel, Untertitel, Achsen, Quellenangaben</a></li>
  <li><a href="#legende" id="toc-legende" class="nav-link" data-scroll-target="#legende"><span class="header-section-number">5.4.5.2</span> Legende</a></li>
  </ul></li>
  <li><a href="#farben" id="toc-farben" class="nav-link" data-scroll-target="#farben"><span class="header-section-number">5.4.6</span> Farben</a>
  <ul class="collapse">
  <li><a href="#einzelne-farben-bestimmen" id="toc-einzelne-farben-bestimmen" class="nav-link" data-scroll-target="#einzelne-farben-bestimmen"><span class="header-section-number">5.4.6.1</span> Einzelne Farben bestimmen</a></li>
  <li><a href="#voreingestellte-farbpalette-auswählen" id="toc-voreingestellte-farbpalette-auswählen" class="nav-link" data-scroll-target="#voreingestellte-farbpalette-auswählen"><span class="header-section-number">5.4.6.2</span> Voreingestellte Farbpalette auswählen</a></li>
  <li><a href="#sec-datenvisualisierung-verfeinern-farbfehlsichtigkeit" id="toc-sec-datenvisualisierung-verfeinern-farbfehlsichtigkeit" class="nav-link" data-scroll-target="#sec-datenvisualisierung-verfeinern-farbfehlsichtigkeit"><span class="header-section-number">5.4.6.3</span> Farbfehlsichtigkeit</a></li>
  </ul></li>
  <li><a href="#sec-visualisierungen-verfeinern-themes" id="toc-sec-visualisierungen-verfeinern-themes" class="nav-link" data-scroll-target="#sec-visualisierungen-verfeinern-themes"><span class="header-section-number">5.4.7</span> Themes</a>
  <ul class="collapse">
  <li><a href="#eingebaute-themes" id="toc-eingebaute-themes" class="nav-link" data-scroll-target="#eingebaute-themes"><span class="header-section-number">5.4.7.1</span> Eingebaute Themes</a></li>
  <li><a href="#ggthemes" id="toc-ggthemes" class="nav-link" data-scroll-target="#ggthemes"><span class="header-section-number">5.4.7.2</span> <code>ggthemes</code></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#besonders-nützliche-erweiterungen" id="toc-besonders-nützliche-erweiterungen" class="nav-link" data-scroll-target="#besonders-nützliche-erweiterungen"><span class="header-section-number">5.5</span> Besonders nützliche Erweiterungen</a></li>
  <li><a href="#übungsaufgaben" id="toc-übungsaufgaben" class="nav-link" data-scroll-target="#übungsaufgaben"><span class="header-section-number">5.6</span> Übungsaufgaben</a>
  <ul>
  <li><a href="#überblick-verschaffen" id="toc-überblick-verschaffen" class="nav-link" data-scroll-target="#überblick-verschaffen"><span class="header-section-number">5.6.1</span> Überblick verschaffen</a></li>
  <li><a href="#sec-datenvisualisierung-uebungsaufgaben-visualisierungsarten" id="toc-sec-datenvisualisierung-uebungsaufgaben-visualisierungsarten" class="nav-link" data-scroll-target="#sec-datenvisualisierung-uebungsaufgaben-visualisierungsarten"><span class="header-section-number">5.6.2</span> Visualisierungsarten</a></li>
  <li><a href="#visualisierungen-verfeinern-1" id="toc-visualisierungen-verfeinern-1" class="nav-link" data-scroll-target="#visualisierungen-verfeinern-1"><span class="header-section-number">5.6.3</span> Visualisierungen verfeinern</a></li>
  <li><a href="#visualisierungen-exportieren" id="toc-visualisierungen-exportieren" class="nav-link" data-scroll-target="#visualisierungen-exportieren"><span class="header-section-number">5.6.4</span> Visualisierungen exportieren</a></li>
  </ul></li>
  <li><a href="#lösungen" id="toc-lösungen" class="nav-link" data-scroll-target="#lösungen"><span class="header-section-number">5.7</span> Lösungen</a>
  <ul>
  <li><a href="#überblick-verschaffen-1" id="toc-überblick-verschaffen-1" class="nav-link" data-scroll-target="#überblick-verschaffen-1"><span class="header-section-number">5.7.1</span> Überblick verschaffen</a></li>
  <li><a href="#visualisierungsarten-1" id="toc-visualisierungsarten-1" class="nav-link" data-scroll-target="#visualisierungsarten-1"><span class="header-section-number">5.7.2</span> Visualisierungsarten</a></li>
  <li><a href="#visualisierungen-verfeinern-2" id="toc-visualisierungen-verfeinern-2" class="nav-link" data-scroll-target="#visualisierungen-verfeinern-2"><span class="header-section-number">5.7.3</span> Visualisierungen verfeinern</a></li>
  <li><a href="#visualisierungen-exportieren-1" id="toc-visualisierungen-exportieren-1" class="nav-link" data-scroll-target="#visualisierungen-exportieren-1"><span class="header-section-number">5.7.4</span> Visualisierungen exportieren</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-datenvisualisierung" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenvisualisierung</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Entgegen verbreiteter Auffassungen sprechen Zahlen selten für sich, sondern werden auf bestimmte Arten und Weisen kommuniziert. Dabei kommt der Visualisierung von Informationen eine besondere Rolle zu, denn Menschen nehmen visuell Informationen besonders gut auf.</p>
<p>Für angehende <em>data scientists</em> ist Visualisieren aus zwei Gründen eine wichtige Fertigkeit. <em>Einerseits</em> wollen wir unsere <strong>Daten entdecken</strong> und dabei gegenüber uns selbst Hypothesen und erste Eindrücke bestätigen oder verwerfen und neue entwickeln. Schließlich kann es für uns sehr viel schneller und intuitiver sein, uns einen Datensatz visuell zu erschließen als wir es durch das Lesen von Tabellen könnten. <em>Andererseits</em> wollen wir einer anderen Person gegenüber unsere <strong>Aussagen anhand von Daten zu erklären</strong>, wobei unsere Visualisierung uns helfen soll, möglichst überzeugend zu argumentieren. Grafische Datenauswertung ist also kein bloßes Anhängsel von <em>data science</em>, sondern ein <strong>integraler Bestandteil</strong>.</p>
<p>In diesem Kapitel lernen wir…</p>
<ul>
<li>…wie wir Grafiken gemäß der <em>grammar of graphics</em> verstehen.</li>
<li>…wie die <em>grammar of graphics</em> im <code>tidyverse</code>-Paket <code>ggplot2</code> genutzt wird.</li>
<li>…wie wir die gängigsten Diagrammtypen mit <code>ggplot2</code> erzeugen.</li>
<li>…wie wir unsere Visualisierungen erweitern und verfeinern.</li>
</ul>
<p>Wir benötigen hierfür die folgenden Pakete:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emoji)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Visualisierung mit <em>base R</em>
</div>
</div>
<div class="callout-body-container callout-body">
<p>In diesem Kapitel lernen wir Visualisierung im Rahmen des <code>tidyverse</code>-Paketes <code>ggplot2</code> kennen. Es ist aber keineswegs so, dass dies die einzige Art und Weise wäre, mit R Grafiken zu erzeugen. Auch <em>base R</em> liefert bereits vielseitige (und manchmal mit einer einzigen Zeile Code schnell zu erstellende) Möglichkeiten zur Grafikerstellung. Eine gute Einführung liefern <span class="citation" data-cites="douglas2024">Douglas u.&nbsp;a. (<a href="references.html#ref-douglas2024" role="doc-biblioref">2024, Kap. 4</a>)</span>.</p>
</div>
</div>
<section id="die-grammar-of-graphics" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="die-grammar-of-graphics"><span class="header-section-number">5.1</span> Die <em>grammar of graphics</em></h2>
<p>Das Konzept der <em>grammar of graphics</em>, also der “Grammatik der Grafiken”, geht zurück auf <span class="citation" data-cites="wilkinson2005">Wilkinson (<a href="references.html#ref-wilkinson2005" role="doc-biblioref">2005</a>)</span>. Es besagt, dass <strong>jede Grafik</strong> sich – ähnlich wie ein Satz – in eine <strong>begrenzte Anzahl an Elementen</strong> zerlegen lässt. Kennen wir diese Elemente, können wir Grafiken besser verstehen und verändern.</p>
<p>Innerhalb der <em>grammar of graphics</em> unterscheiden wir <strong>sieben Elemente</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<ul>
<li><strong>Daten</strong> (<em>data</em>): Welche Informationen stellen wir dar?</li>
<li><strong>Ästhetik</strong> (<em>aesthetics</em>): Welche Variablen stellen wir mit welcher Eigenschaft (Position, Form, Farbe, Größe usw.) dar?</li>
<li><strong>Geometrische Objekte</strong> (<em>geometrics</em>, oder kürzer <em>geoms</em>): Aus welchen Formen besteht die Grafik?</li>
<li><strong>Facetten</strong> (<em>facets</em>): Welche Untergruppen stellen wir separat dar?</li>
<li><strong>Statistiken</strong> (<em>statistics</em>): Welche statistischen Parameter enthält unsere Grafik?</li>
<li><strong>Koordinaten</strong> (<em>coordinates</em>): Welche Dimensionen hat unsere Grafik?</li>
<li><strong>Thema</strong> (<em>themes</em>): Wie sehen die Elemente unserer Grafik aus, die keine Daten sind (Schriftarten, Achsenbeschriftungen, Hintergrundfarben usw.)?</li>
</ul>
<p>Diese sieben Elemente können wir uns als unterschiedliche <strong>Schichten</strong> (<em>layer</em>) einer Grafik vorstellen. Jede Grafik kann also als eine Kombination dieser Schichten verstanden werden. Wenn wir alle Lagen “übereinanderlegen”, entsteht unsere schlussendliche Grafik.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://michielnoback.github.io/bincourses/course_contents/davur2/book/graphics/all_layers_50p.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption>Die Ebenen einer Grafik <span class="citation" data-cites="noback2021">(<a href="references.html#ref-noback2021" role="doc-biblioref">Noback 2021</a>)</span>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Diese Ausführungen wirken recht abstrakt. Am besten lässt sich die Perspektive der <em>grammar of graphics</em> anhand eines Beispiels illustrieren.</p>
<section id="ein-gapminder-beispiel" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="ein-gapminder-beispiel"><span class="header-section-number">5.1.1</span> Ein <code>gapminder</code>-Beispiel</h3>
<p>Die folgende Grafik wurde mithilfe des uns bereits bekannten <code>gapminder</code>-Datensatzes erstellt. Im Verlauf dieses Kapitels werden wir alle nötigen Schritte lernen, um eine solche Grafik nachzubilden, vorher müssen wir sie aber angemessen verstehen.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Eine <em>grammar of graphics</em>-Analyse der Grafik könnte wie folgt lauten:</p>
<ul>
<li><strong>Daten</strong>: Die Grafik stellt die historische <em>Lebenserwartung</em> der Bevölkerung unterschiedlicher Kontinente in Jahren dar.</li>
<li><strong>Ästhetik</strong>: Der jeweilige <em>Kontinent</em> wird auf der <em>X-Achse</em>, die <em>Anzahl der Jahre</em> wird auf der <em>Y-Achse</em> abgetragen. Zudem werden die <em>Kontinente</em> anhand ihrer <em>Farbe</em> unterschieden.</li>
<li><strong>Geometrische Objekte</strong>: Die Werte werden in Form von <em>Säulen</em> dargestellt.</li>
<li><strong>Facetten</strong>: Die Grafik ist in <em>vier separate Grafiken</em> unterteilt, die ihrerseits die Werte je eines der vier Jahre (1977, 1987, 1997, 2007) darstellen.</li>
<li><strong>Statistiken</strong>: Die X-Achsenbeschriftung besagt, dass es sich um einen Mittelwert (<em>mean</em>) handelt.</li>
<li><strong>Koordinaten</strong>: Die X-Achse enthält fünf Kontinente, die Y-Achse verläuft von 0 bis 90 mit Beschriftungen in Abständen von je 10 Jahren.</li>
<li><strong>Thema</strong>: Alle Schriftarten sind serifenlos. Der Hintergrund des Diagrammbereichs ist hellgrau, der Hintergrund der Jahresangaben in mittlerem Grau eingefärbt.</li>
</ul>
<p>Nachdem wir eine solche Grafik zu lesen verstehen, möchten wir im weiteren Schritt nachvollziehen, wie wir sie selbst konstruieren können. Hierfür benötigen wir den <strong>Ausgangsdatensatz</strong> <code>cont_life_exp</code>, welchen wir mit den uns bekannten <code>dplyr</code>-Funktionen erzeugen können.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>cont_life_exp <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="dv">1977</span>, <span class="dv">2007</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">|&gt;</span> <span class="co"># Vier Jahre filtern</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent, year) <span class="sc">|&gt;</span> <span class="co"># Gruppen auf Basis von Kontinent und Jahr bilden</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">round</span>(<span class="fu">mean</span>(lifeExp), <span class="at">digits =</span> <span class="dv">1</span>)) <span class="co"># Mittelwerte berechnen</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>cont_life_exp <span class="sc">|&gt;</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   continent [5]
  continent  year mean_life_exp
  &lt;fct&gt;     &lt;int&gt;         &lt;dbl&gt;
1 Africa     1977          49.6
2 Americas   1977          64.4
3 Asia       1977          59.6
4 Europe     1977          71.9
5 Oceania    1977          72.9</code></pre>
</div>
</div>
<p>Wir werden später mit diesem etwas längeren <em>data frame</em> arbeiten. Vorerst erstellen wir einen noch kürzere Tabelle, die lediglich die <strong>Werte des Jahres 2007</strong> enthält.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cont_life_exp_2007 <span class="ot">&lt;-</span> cont_life_exp <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="co"># Year: 2007</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>cont_life_exp_2007</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   continent [5]
  continent  year mean_life_exp
  &lt;fct&gt;     &lt;int&gt;         &lt;dbl&gt;
1 Africa     2007          54.8
2 Americas   2007          73.6
3 Asia       2007          70.7
4 Europe     2007          77.6
5 Oceania    2007          80.7</code></pre>
</div>
</div>
</section>
</section>
<section id="ggplot2" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="ggplot2"><span class="header-section-number">5.2</span> <code>ggplot2</code></h2>
<p><code>ggplot2</code> ist das <code>tidyverse</code>-Paket zum Erzeugen einer Vielzahl von Grafiken auf Basis der <em>grammar of graphics</em>, was auch an dem Präfix <code>gg</code> zu erkennen ist. Der Umfang seiner Möglichkeiten wird laufend durch neue Pakete erweitert, die nicht selten ebenfalls <code>gg</code> im Namen tragen.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Dieser Umfang und die durchdachte Konstruktion von <code>ggplot2</code> sind es, die immer wieder R zu einer, wenn nicht <em>der</em> <strong>besten Möglichkeit zur Erstellung professioneller Grafiken</strong> machen.</p>
<section id="die-grundfunktion" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="die-grundfunktion"><span class="header-section-number">5.2.1</span> Die Grundfunktion</h3>
<p>Die Grundfunktion von <code>ggplot2</code> ist ist <strong><code>ggplot()</code></strong>. Ihr Zweck ist, das ursprüngliche <strong>Grafikobjekt</strong> zu erzeugen, dem wir im weiteren zusätzliche Elemente hinzufügen. Die wichtigsten Parameter von <code>ggplot()</code> sind <code>data</code> und <code>mapping</code>. Mit <code>data</code> nennen wir <code>ggplot()</code> einen <em>data frame</em>, der die <strong>Daten</strong> enthält, die wir visualisieren möchten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007) <span class="co"># ggplot-Objekt erzeugen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ohne weitere Eingaben erzeugt <code>ggplot()</code> lediglich eine “weiße Leinwand”, wie wir sie im <code>Plots</code>-Fenster in RStudio sehen. Das ergibt insofern Sinn, als dass wir noch nicht angegeben haben, welche Werte wir wie visualisieren wollen.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>data |&gt; ggplot()</code> oder <code>ggplot(data)</code>?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nachdem uns <code>|&gt;</code> bereits beim Transformieren von Daten vertraut geworden ist, sollte es uns nicht überraschen, dass wir den <em>output</em> solcher Bearbeitungen – fast immer ein <em>data frame</em> bzw. eine <em>tibble</em> – auch direkt in einen <code>ggplot()</code>-Aufruf weiterleiten können. Das heißt, die folgenden zwei Codebeispiele bewirken dasselbe Ergebnis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007) <span class="co"># Daten ohne |&gt; angeben</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>cont_life_exp_2007 <span class="sc">|&gt;</span> <span class="co"># Daten mit |&gt; angeben</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Im nächsten Schritt müssen wir mit dem Parameter <strong><code>mapping</code></strong> die <strong>Ästhetik</strong> der Grafik spezifizieren. Das bedeutet, wir müssen <strong>Variablen</strong> in unserem Datensatz <strong>mit visuellen Eigenschaften verbinden</strong>. Dieses “Verbinden” wird auf Englisch auch als <em>mapping</em> (“mapping a variable to an aesthetic”) bezeichnet, woher die Bezeichnung des Parameters rührt. Dem Parameter <code>mapping</code> nennen wir die <strong><code>aes()</code></strong>-Funktion (<em>aesthetics</em>) und verbinden innerhalb von ihr eine Variable mit einer visuellen Eigenschaft. In vielen Fällen ist die wichtigsten visuellen Eigenschaft die Position eines geometrischen Objektes auf einer oder mehreren Achsen. In unserem Beispiel möchten wir auf der X-Achse (<code>x</code>) den Kontinent (<code>continent</code>) und auf der Y-Achse (<code>y</code>) die mittlere Lebenserwartung (<code>mean_life_exp</code>) abtragen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, <span class="co"># X-Achse: continent</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp)) <span class="co"># Y-Achse: mean_life_exp</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit diesen zwei Zuweisungen weiß <code>ggplot()</code> bereits genug, um einen Diagrammbereich zu zeichnen und zu beschriften. Unsere “weiße Leinwand” enthält folglich bereits die <strong>Achsenbeschriftungen</strong>, die auf die von uns angegebenen Variablen, deren verweisen.</p>
</section>
<section id="sec-datenvisualisierung-ggplot2-geoms" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="sec-datenvisualisierung-ggplot2-geoms"><span class="header-section-number">5.2.2</span> Geoms hinzufügen</h3>
<p>Im nächsten Schritt müssen wir ein <strong>geometrisches Objekt</strong> wählen, das unsere Daten darstellt. Wie im Beispiel entscheiden wir uns für Säulen. Diese Säulen können wir erzeugen, indem wir am Ende unseres bisherigen Codes ein <strong><code>+</code></strong> eingeben und in einer neuen Zeile <strong><code>geom_col()</code></strong> (<em>geometry</em>: <em>column</em>) eingeben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp)) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="co"># Säulen einzeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Dem <strong><code>+</code></strong> kommt dabei eine besondere Rolle zu, es <strong>fügt unserem <code>ggplot</code>-Objekt ein weiteres Element hinzu</strong>. Solch ein Element kann dabei nicht nur ein <em>geom</em> sein, sondern sich auch auf unsere verbleibenden Elemente der <em>grammar of graphics</em> beziehen. Aus diesem Grund wird uns <code>+</code> noch oft begegnen, denn es spielt eine ähnlich zentrale Rolle beim Visualisieren von Daten wie <code>|&gt;</code> beim Transformieren mit <code>dplyr</code>.</p>
<p>Unsere Grafik sieht bereits ansehlich aus. Was aber unter anderem noch fehlt, ist die <strong>farbliche Unterscheidung</strong> der Säulen. Weil wir inzwischen begriffen haben, dass die Füllfarbe unserer Säulen lediglich eine <strong>weitere Ästhetik</strong> ist, können wir im Rahmen unseres <code>aes()</code>-Aufrufs einfach eine weitere Zuschreibung vornehmen: <code>fill</code> verweist hier auf die Füllfarbe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wohin mit <code>aes()</code>?
</div>
</div>
<div class="callout-body-container callout-body">
<p>In den meisten Fällen erfolgt der Aufruf von <code>aes()</code> <strong>innerhalb von <code>ggplot()</code></strong> als Argument des Parameters <code>mapping</code> so wie hier gezeigt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, <span class="co"># aes() innerhalb von ggplot()</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp)) <span class="sc">+</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Innerhalb der Konzeption von unterschiedlichen “Schichten” von Grafiken kann <code>aes()</code> aber auch aus <code>ggplot()</code> herausgelöst und mit <code>+</code> als <strong>eigenständiges Element</strong> angegeben werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007) <span class="sc">+</span> <span class="co"># ggplot() endet hier</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> continent, <span class="co"># aes() als eigenständiges Element</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> mean_life_exp) <span class="sc">+</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Als dritte Option kann <code>aes()</code> wiederum als Argument für den Parameter <code>mapping</code> <strong>innerhalb des jeweiligen <code>geom_*()</code></strong> angegeben werden. Das kann sinnvoll sein, wenn innerhalb einer Grafik mehrere <em>geoms</em> mit jeweils unterschiedlichen ästhetischen Zuweisungen erzeugt werden. Soweit sind wir noch nicht, sollten es aber im Kopf behalten, um nicht durch Beispiele aus anderen Lernmaterialen verwirrt zu werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007) <span class="sc">+</span> <span class="co"># ggplot() endet hier</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, <span class="co"># aes() innerhalb von geom_col()</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> mean_life_exp))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="sec-datenvisualisierung-ggplot2-aesthetiken" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="sec-datenvisualisierung-ggplot2-aesthetiken"><span class="header-section-number">5.2.3</span> Ästhetiken</h3>
<p>Anhand unseres Beispiels haben wir bereits drei visuelle Eigenschaften kennengelernt (Position auf <code>x</code> und <code>y</code> sowie <code>fill</code>). Wenn wir <code>ggplot</code> nutzen, werden wir schnell feststellen, dass unterschiedliche <em>geoms</em> unterschiedliche visuelle Eigenschaften darstellen können. Intuitiv ergibt dies Sinn: Kann eine Säule, die ja immer rechteckig ist, die Eigenschaft “Form” ändern? Nein. Ebenso wenig kann eine Linie eine “Füllfarbe” ändern, sondern höchstens ihre Linienfarbe. Die wichtigsten <code>aes</code><em>thetics</em> kennenzulernen, ist entsprechend sinnvoll<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>:</p>
<ul>
<li><strong><code>x</code></strong> und <strong><code>y</code></strong>: <em>Position</em> eines <em>geoms</em> auf der X- bzw. Y-Achse.</li>
<li><strong><code>alpha</code></strong>: <em>Transparenz</em> einer Füllfarbe, wobei 0 für vollständig transparent und 1 für vollständig deckend steht.</li>
<li><strong><code>area</code></strong>: <em>Fläche</em> eines Rechteckes.</li>
<li><strong><code>color</code></strong>: <em>Farbe</em> eines <em>geoms</em>, die auch als <code>col</code> abgekürzt werden kann.</li>
<li><strong><code>group</code></strong>: <em>Gruppe</em> an Beobachtungen, die sich ansonsten überschneiden.</li>
<li><strong><code>fill</code></strong>: <em>Füllfarbe</em> eines <em>geoms</em>.</li>
<li><strong><code>linetype</code></strong>: <em>Linientyp</em> einer Linie, die z.B. durchgehend, gepunktet oder gestrichelt gezeichnet werden kann.</li>
<li><strong><code>linewidth</code></strong>: <em>Strichdicke</em> einer Linie, angegeben in Einheiten von je 0,75mm.</li>
<li><strong><code>shape</code></strong>: <em>Form</em> eines Punktes, der z.B. als Kreis, Raute oder Dreieck gezeichnet werden kann.</li>
<li><strong><code>size</code></strong>: <em>Größe</em> eines Punktes.</li>
</ul>
<p>Je nach <em>geom</em> kann es noch <strong>viel mehr visuelle Eigenschaften</strong> geben, die man aber am besten erst dann erkundet, wenn man es nutzen möchte. Auch hierfür ist der <code>ggplot2</code>-Cheatsheet (<a href="02-workflow.html#sec-workflow-hilfe-und-selbsthilfe-cheatsheets" class="quarto-xref"><span>Kapitel 2.4.5</span></a>) eine nützliche Ressource.</p>
</section>
<section id="grafiken-exportieren" class="level3" data-number="5.2.4">
<h3 data-number="5.2.4" class="anchored" data-anchor-id="grafiken-exportieren"><span class="header-section-number">5.2.4</span> Grafiken exportieren</h3>
<p>Sobald wir eine Grafik erzeugt haben, möchten wir sie natürlich auch <strong>als Datei exportieren</strong>. Dies können wir auf zwei unterschiedliche Weisen tun. Zum einen können wir die uns gegenwärtig angezeigte Grafik in <strong>RStudio</strong> über <code>Plots</code> → <code>Save as</code> entweder als Grafikdatei (hier empfiehlt sich meist PNG) oder als PDF-Datei abspeichern. Über ein neues Fenster können wir Name, Maße und weitere Angaben zur Grafik vornehmen und sie dann mit <code>Save</code> exportieren.</p>
<p>Zum anderen können wir unsere Grafik auch über die <strong>Konsole</strong> exportieren. Die Funktion hierfür ist <strong><code>ggsave()</code></strong>. Durch <code>?ggsave</code> erfahren wir, dass wir dem Parameter <code>filename</code> wenigstens einen Dateinamen (mit Endung!) liefern müssen, um eine Datei zu exportieren. Desweiteren können wir mit <code>height</code> (<em>Höhe</em>) und <code>width</code> (<em>Breite</em>) die genauen Ausmaße unserer Grafik angeben, müssen aber mit <code>unit</code> (<em>Einheit</em>) auch angeben, worauf sich unsere numerischen Angaben beziehen (z.B auf <code>"mm"</code>, <code>"cm"</code> oder <code>"px"</code>).</p>
<p>Um also unsere letzte Grafik als PNG-Datei mit den Maßen 15cm*20cm zu exportieren, schreiben wir den folgenden Code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"my_plot.png"</span>, <span class="co"># Dateinamen und Dateiformat angeben</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">15</span>, <span class="co"># Höhe angeben</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">20</span>, <span class="co"># Breite angeben</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">unit =</span> <span class="st">"cm"</span>) <span class="co"># Maßeinheit angeben</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Grafik wurde nun in das gegenwärtige <em>working directory</em> exportiert.</p>
<p>Bislang haben wir nur eine direkt erzeugte Grafik exportiert. Dies geschah dadurch, dass der Parameter <strong><code>plot</code></strong> stardardmäßig auf <code>last_plot()</code> gestellt ist, also die letzte erzeugte Grafik ausgewählt wird. Wie mit anderen Objekten auch, können wir unser <code>ggplot</code>-Objekt aber auch einem Namen zuweisen und es im <em>workspace</em> zeitweise abspeichern. Eine solche Zuweisung ermöglicht uns zum einen, <strong>eine einmal geschriebene Grafik immer wieder aufzurufen</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>my_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007, <span class="co"># ggplot-Objekt erzeugen</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent, <span class="co"># X-Achse: continent</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">y =</span> mean_life_exp, <span class="co"># Y-Achse: mean_life_exp</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="co"># Säulen einzeichnen</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>my_plot</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Unsere erzeugte Grafik, <code>my_plot</code>, hat eigene eigene <strong>Objektklasse</strong>, nämlich <code>gg</code> bzw. <code>ggplot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_plot)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gg"     "ggplot"</code></pre>
</div>
</div>
<p>Wenn wir uns die Struktur dieses Objektes anschauen möchten (entweder mittels <code>Environment</code> → <code>my_plot</code> oder <code>View(my_plot)</code>), erfahren wir, dass es sich um eine <strong>Liste</strong> handelt und jedes Listenelement ein Element unserer Grafik repräsentiert. (<em>Keine Sorge: Sie müssen (noch) nicht mit jeder der Bezeichnungen etwas anfangen können!</em>)</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/view-my-plot.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption>Die Listenelemente von <code>my_plot</code>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Dieses Objekt können wir dann direkt an <code>ggsave()</code> zum Export weiterreichen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave ohne |&gt; </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> my_plot,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">filename =</span> <span class="st">"my_plot.png"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">15</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">20</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">unit =</span> <span class="st">"cm"</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ggsave mit |&gt; </span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>my_plot <span class="sc">|&gt;</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"my_plot.png"</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">height =</span> <span class="dv">15</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="dv">20</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">unit =</span> <span class="st">"cm"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="visualisierungsarten" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="visualisierungsarten"><span class="header-section-number">5.3</span> Visualisierungsarten</h2>
<p>Nachdem wir die grundlegende Funktionsweise von <code>ggplot</code> begriffen haben, möchten wir mehrere Visualisierungsarten – und insbesondere mehrere <em>geoms</em>! – kennenlernen. Sie alle eint, dass wir oft nur <strong>geringfügige Veränderungen</strong> in unserem Code vornehmen müssen, um sie zu erzeugen. Das ist ein erheblicher Vorteil gegenüber der Erstellung von Diagrammen mit Excel oder anderer klick-basierter Software.</p>
<section id="mengen" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="mengen"><span class="header-section-number">5.3.1</span> Mengen</h3>
<section id="sec-datenvisualisierung-visualisierungsarten-mengen-saeulendiagramm" class="level4" data-number="5.3.1.1">
<h4 data-number="5.3.1.1" class="anchored" data-anchor-id="sec-datenvisualisierung-visualisierungsarten-mengen-saeulendiagramm"><span class="header-section-number">5.3.1.1</span> Säulendiagramm: Anzahl</h4>
<p>Die einfachste Art, ein Diagramm zu erstellen, ist, die <strong>Anzahl</strong> an Beobachtungen hinsichtlich einer bestimmten Variable darzustellen. Hierfür ist <strong><code>geom_bar()</code></strong> gedacht, das lediglich eine einzige Ästhetik, nämlich <code>x</code>, benötigt. Um die Anzahl aller Länder im <code>gapminder</code>-Datensatz im Jahr 2007 darzustellen, genügt ein kurzer Code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 auswählen</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent)) <span class="sc">+</span> <span class="co"># X-Achse: continent</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="co"># Säulen zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Dass hier einfach nur gezählt wurde, erkennen wir an der Y-Achsenbeschriftung <code>count</code> (“Zählung” oder “Ergebnis”). Allerdings ist die X-Achse hier alphabetisch geordnet, was visuell wenig Sinn ergibt: Mit den zweitmeisten Ländern sollte Asien doch besser direkt auf Afrika folgen. Um die <strong>Anordnung</strong> im Rahmen von <code>geom_bar()</code> zu ändern, können wir eine <strong>Hilfsfunktion</strong> aus dem <code>forcats</code>-Package namens <strong><code>fct_infreq()</code></strong> (<em>order factor by frequency of observations</em>, zu deutsch etwa “Faktoren nach Häufigkeit der Beobachtungen ordnen”) innerhalb von <code>aes()</code> nutzen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(continent))) <span class="sc">+</span> <span class="co"># Säulen absteigend ordnen</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Die <strong>Füllfarbe</strong> der Säulen können wir auf die bekannte Weise mit <code>fill</code> verändern. Sobald wir Ästhetiken jenseits von <code>x</code> und <code>y</code> nutzen, fügt <code>ggplot</code> automatisch eine Legende ein.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(continent),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Füllfarbe: continent</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Was aber, wenn wir alle Säulen mit einer <strong>einheitlichen Linie</strong> umranden möchten? Wenn wir <code>color</code> nutzen, wird <em>jeder</em> Säule eine Linie mit eigener Farbe – nämlich derselben, die als <code>fill</code> zur Anwendung kommt – gegeben und das Ergebnis sieht unverändert aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(continent),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent)) <span class="sc">+</span> <span class="co"># color: continent</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Hier stoßen wir auf ein wichtiges Konzept: <strong>variable</strong> und <strong>konstante Ästhetiken</strong>. <em>Innerhalb</em> von <code>aes()</code> vergeben wir nur solche visuellen Eigenschaften, die sich in Abhängigkeit von den Daten <em>unterscheiden</em> sollen – also <strong>variabel</strong> – sind. Alle Eigenschaften, die für alle geometrischen Objekte <em>gleich</em> – also <strong>konstant</strong> – sein sollen, geben wir <em>innerhalb</em> des <code>geom_*()</code>-Aufrufes, aber <em>außerhalb</em> von <code>aes()</code> an. Um also <strong>jeder Säule einen schwarzen Rand</strong> (<code>"black"</code>) zu verleihen, geben wir <code>color</code> im <code>geom_bar()</code>-Aufruf an. Die Legende zeigt diese Veränderungen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(continent),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="co"># Alle Säulen mit schwarzer Linie umranden</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="säulendiagramm-größen" class="level4" data-number="5.3.1.2">
<h4 data-number="5.3.1.2" class="anchored" data-anchor-id="säulendiagramm-größen"><span class="header-section-number">5.3.1.2</span> Säulendiagramm: Größen</h4>
<p>Wie wir ein einfaches Säulendiagramm mittels <strong><code>geom_col()</code></strong> zeichnen können, haben wir bereits kennengelernt (<a href="#sec-datenvisualisierung-ggplot2-geoms" class="quarto-xref"><span>Kapitel 5.2.2</span></a>). Rufen wir uns unsere letzte Version nochmal in Erinnerung.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit <code>?geom_col</code> erfahren wir, dass neben <code>x</code> und <code>y</code> als notwendigen Ästhetiken noch mehrere optionale visuelle Eigenschaften genutzt werden können. <code>fill</code> (Füllfarbe) nutzen wir bereits und auch <code>color</code> (Farbe, in diesem Fall die Farbe der Außenlinien) ist uns von <code>geom_bar()</code> bereits bekannt. Mit einer schwarzen <strong>Umrandung</strong> sieht unsere Grafik schon anders aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007, </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="co"># Säulen mit Umrandung einzeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Weil es sich bei der Umrandung um eine Linie handelt, können wir auch die Ästhetik <strong><code>linetype</code></strong> (Linientyp) verändern. Mit <code>"dotted"</code> etwa können wir statt durchgezogener Linien <strong>gestrichelte Linien</strong> zeichnen. Weil wir dies für alle Säulen ändern wollen, handelt es sich um eine <strong>konstante Ästhetik</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> continent,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> <span class="st">"dotted"</span>) <span class="co"># Säulen mit gestrichelter schwarzer Umrandung einzeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Auch hier fällt uns aber wieder die alphabetische Anordnung der Säulen auf. Da die Säulenlängen nicht länger die <em>Anzahl</em> an Beobachtungen darstellt, können wir leider <code>fct_infreq()</code> nicht nutzen. Stattdessen können wir aber die Hilfsfunktion <strong><code>reorder()</code></strong> heranziehen, um die <strong>Reihenfolge eines Faktors</strong> (hier <code>continent</code>) gemäß einer anderen, numerischen Variablen (hier <code>mean_life_exp</code>) zu <strong>verändern</strong>. Wichtig ist dabei, im Auge zu behalten, welche visuelle Eigenschaft verändert werden soll. Handelt es sich um die Reihenfolge der <em>geoms</em> auf der X-Achse, müssen wir <code>reorder()</code> auch im Kontext von <code>x</code> verwenden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp_2007, <span class="co"># ggplot-Objekt erzeugen</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(continent, mean_life_exp), <span class="co"># X-Achse: continent, nach mean_life_exp geordnet</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp, <span class="co"># Y-Achse: mean_life_exp</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> <span class="st">"dotted"</span>) <span class="co"># Säulen mit gestrichelter schwarzer Umrandung einzeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-datenvisualisierung-visualisierungsarten-anteile" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="sec-datenvisualisierung-visualisierungsarten-anteile"><span class="header-section-number">5.3.2</span> Anteile</h3>
<section id="gestapeltes-balkendiagramm" class="level4" data-number="5.3.2.1">
<h4 data-number="5.3.2.1" class="anchored" data-anchor-id="gestapeltes-balkendiagramm"><span class="header-section-number">5.3.2.1</span> Gestapeltes Balkendiagramm</h4>
<p>Die Nützlichkeit von <code>geom_col()</code> ist noch nicht erschöpft. Wir können nämlich dasselbe <em>geom</em> nutzen, um die <strong>Zusammensetzung einer Größe</strong> darzustellen. Die einfachste Art, dies zu tun, ist ein gestapeltes Balkendiagramm.</p>
<p>Zunächst erstellen wir eine einfache Tabelle namens <code>pop_by_continent</code> mit der Gesamtbevölkerung der Jahre 1967, 1987 und 2007 nach Kontinenten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>pop_by_continent <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1967</span>, <span class="dv">1987</span>, <span class="dv">2007</span>)) <span class="sc">|&gt;</span> <span class="co"># Nur Jahre 1967, 1987 und 2007 beibehalten</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">|&gt;</span> <span class="co"># Gruppen bilden: year, continent</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pop_bn =</span> <span class="fu">sum</span>(pop) <span class="sc">/</span> <span class="fl">1e09</span>) <span class="co"># Summe von pop berechnen und durch 1.000.000.000 teilen</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>pop_by_continent</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
# Groups:   year [3]
    year continent pop_bn
   &lt;int&gt; &lt;fct&gt;      &lt;dbl&gt;
 1  1967 Africa    0.335 
 2  1967 Americas  0.481 
 3  1967 Asia      1.91  
 4  1967 Europe    0.481 
 5  1967 Oceania   0.0146
 6  1987 Africa    0.575 
 7  1987 Americas  0.683 
 8  1987 Asia      2.87  
 9  1987 Europe    0.543 
10  1987 Oceania   0.0196
11  2007 Africa    0.930 
12  2007 Americas  0.899 
13  2007 Asia      3.81  
14  2007 Europe    0.586 
15  2007 Oceania   0.0245</code></pre>
</div>
</div>
<p>Diese Tabelle können wir direkt in ein <strong>gestapeltes Säulendiagramm</strong> umwandeln, indem wir das Jahr mit der X-Achse (<code>x</code>) und die Bevölkerungsangabe mit der Y-Achse (<code>y</code>) verbinden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="co"># X-Achse: year</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn)) <span class="sc">+</span> <span class="co"># Y-Achse: pop_bn</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Weil wir als Ästhetiken nur die Positionen auf der X-Achse und der Y-Achse angegeben haben, stapelt <code>ggplot</code> die einzelnen Werte einfach aufeinander – und zwar in derselben dunkelgrauen Farbe. Um die einzelnen Abschnitte der Säulen entsprechend einzufärben, müssen wir die Kontinentsangabe mit der <strong>Füllfarbe</strong> (<code>fill</code>) verbinden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Füllfarbe: continent</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Um auch hier die einzelnen Abschnitte zu ordnen, können wir die uns bekannte <strong><code>reorder()</code></strong>-Funktion nutzen. Weil wir diesmal nicht die Reihenfolge auf der X-Achse, sondern die <strong>Reihenfolge</strong> der Füllfarben ändern wollen, verwenden wir <code>reorder()</code> im Kontext von <code>fill</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">reorder</span>(continent, pop_bn))) <span class="sc">+</span> <span class="co"># Füllfarbe: continent, geordnet nach pop_bn</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit der uns ebenfalls aus <code>dplyr</code> bekannten Hilfsfunktion <strong><code>desc()</code></strong> (<a href="04-datentransformation.html#sec-datentransformation-zeilen-arranging" class="quarto-xref"><span>Kapitel 4.2.3</span></a>) können wir aus einer aufsteigenden kurzerhand auch eine <strong>absteigende</strong> Reihenfolge erstellen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">reorder</span>(continent, <span class="fu">desc</span>(pop_bn)))) <span class="sc">+</span> <span class="co"># Füllfarbe: continent, absteigend geordnet nach pop_bn</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wenn wir die einzelnen <strong>Säulen alle gleich hoch zeichnen</strong> wollen, um die <strong>Anteile besser unterscheiden</strong> zu können, können wir dies innerhalb von <code>geom_col()</code> mit <strong><code>position = "fill"</code></strong><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> angeben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">reorder</span>(continent, <span class="fu">desc</span>(pop_bn)))) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="co"># 100%-Säulen zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="treemap" class="level4" data-number="5.3.2.2">
<h4 data-number="5.3.2.2" class="anchored" data-anchor-id="treemap"><span class="header-section-number">5.3.2.2</span> Treemap</h4>
<p>Eine weitere Möglichkeit zur Darstellung von Anteilen ist eine <a href="https://r-graph-gallery.com/treemap.html">Treemap</a>, ein <strong>eingefärbtes Rechteck</strong>. Da es kein Standard-<em>geom</em> von <code>ggplot</code> ist, müssen wir hierfür Inhalte des Pakets <code>treemapify</code> nutzen. In der einfachsten Version weisen wir dann der <strong>Flächengröße</strong> (<code>area</code>) die Gesamtbevölkerung und der Füllfarbe abermals den Kontinent zu, bevor wir mit <strong><code>geom_treemap()</code></strong> eine entsprechendes <em>geom</em> zeichnen lassen.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>pop_by_continent <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Werte des Jahres 2007 anzeigen</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">area =</span> pop_bn, <span class="co"># Größe der Fläche: pop_bn</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="co"># Treemap zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warum <em>keine</em> Tortendiagramme?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Es ist eine berechtigte Frage, weshalb in diesem Kapitel keine Tortendiagramme vorgestellt werden. Tatsächlich gibt es im Rahmen von <code>ggplot2</code> kein entsprechendes <em>geom</em>, sondern nur eine Reihe von <a href="https://r-graph-gallery.com/pie-plot.html">Umwegen</a>, solche Diagramme zu erzeugen. Das liegt darin begründet, dass <strong>Tortendiagramme zwar weitverbreitet, aber oft wenig geeignet</strong> zur Visualisierung von Proportionen sind: sie können nur eine geringe Anzahl an Gruppen visuell unterscheidbar darstellen und ein Säulendiagramm vermittelt kleine Unterschiede deutlich besser <span class="citation" data-cites="barnett2024">(<a href="references.html#ref-barnett2024" role="doc-biblioref">Barnett und Oguoma 2024</a>)</span>.<br>
Tortendiagramme sollten wir deshalb <strong>allgemein meiden</strong>. Die Ausnahme von dieser Regel ist, wenn wir einen Unterschied zwischen “sehr groß” und “sehr klein” hinsichtlich weniger Gruppen darstellen möchten.</p>
</div>
</div>
</section>
</section>
<section id="zeitliche-verläufe" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="zeitliche-verläufe"><span class="header-section-number">5.3.3</span> Zeitliche Verläufe</h3>
<section id="sec-datenvisualisierung-arten-zeitlich-linie" class="level4" data-number="5.3.3.1">
<h4 data-number="5.3.3.1" class="anchored" data-anchor-id="sec-datenvisualisierung-arten-zeitlich-linie"><span class="header-section-number">5.3.3.1</span> Liniendiagramm</h4>
<p>Zeitliche Veränderungen werden zumeist als <strong>Linien</strong> dargestellt. Das entsprechende <em>geom</em> hierfür ist <strong><code>geom_line()</code></strong>. Die notwendigen Ästhetiken sind vor allem <code>x</code> und <code>y</code>, wie im Falle von <code>geom_col()</code>. Um unsere zuvor erstellte durchschnittliche Lebenserwartung in Europa zwischen 1977 und 2007 darzustellen, benötigen wir abermals wenig Code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>cont_life_exp <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span>) <span class="sc">|&gt;</span> <span class="co"># Nur europäischen Wert anzeigen</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="co"># X-Achse: year</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp)) <span class="sc">+</span> <span class="co"># Y-Achse: mean_life_exp</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="co"># Linie zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wenn wir mehrere Linien zeichnen wollen, müssen wir eine zusätzliche Ästhetik zur Unterscheidung auswählen. Am einfachsten ist meist die Unterscheidung von Linien anhand ihrer <strong>Farbe</strong> (<code>color</code>) oder ihrer <strong>Linienart</strong> (<code>linetype</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp, </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp, </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">linetype =</span> continent)) <span class="sc">+</span> <span class="co"># Linienart: continent</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Natürlich können wir auch <strong>beide Ästhetiken zugleich</strong> nutzen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> continent, <span class="co"># Farbe: continent</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">linetype =</span> continent)) <span class="sc">+</span> <span class="co"># Linienart: continent</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Um unsere Legende auch hier so zu ordnen, dass ihre <strong>Rangfolge</strong> der visuellen Rangfolge der Linien entspricht, können wir die uns bereits bekannte <strong><code>reorder()</code></strong>-Hilfsfunktion nutzen. Da wir in diesem Fall zwei Ästhetiken zur Unterscheidung nutzen, müssen wir <code>reorder()</code> zweimal verwenden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> <span class="fu">reorder</span>(continent, <span class="fu">desc</span>(mean_life_exp)), <span class="co"># Farbe: continent, absteigend geordnet</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">linetype =</span> <span class="fu">reorder</span>(continent, <span class="fu">desc</span>(mean_life_exp)))) <span class="sc">+</span> <span class="co"># Linienart: continent, absteigend geordnet</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="flächendiagramm" class="level4" data-number="5.3.3.2">
<h4 data-number="5.3.3.2" class="anchored" data-anchor-id="flächendiagramm"><span class="header-section-number">5.3.3.2</span> Flächendiagramm</h4>
<p>Wenn wir keinen einzelnen Wert, sondern den <strong>zeitlichen Verlauf einer Menge</strong> darstellen wollen, können wir neben einem (gestapelten) Säulendiagramm auch ein Flächendiagramm zeichnen. Dabei handelt es sich quasi um <strong>Linien mit eingefärbten Zwischenräumen</strong> werden. Wir können für die Erstellung unseren Code für ein gestapeltes Säulendiagramm (<a href="#sec-datenvisualisierung-visualisierungsarten-anteile" class="quarto-xref"><span>Kapitel 5.3.2</span></a>) als Grundlage nehmen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">reorder</span>(continent, pop_bn))) <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Um aus diesem gestapelten Säulendiagramm ein Flächendiagramm zu machen, müssen wir nichts weiter tun, als <code>geom_col()</code> durch <strong><code>geom_area()</code></strong> zu <strong>ersetzen.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pop_by_continent,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> pop_bn,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="fu">reorder</span>(continent, pop_bn))) <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>() <span class="co"># Flächen zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Mit großer Macht kommt große Verantwortung 🦸
</div>
</div>
<div class="callout-body-container callout-body">
<p>Eine derart leichte Umgestaltung von <code>geom_col()</code> hin zu <code>geom_area()</code> zeigt die <strong>Vorzüge</strong> von <code>ggplot()</code>: einmal angegeben, können wir einen einzelnen Bestandteil – wie hier das <em>geom</em> – verändern, ohne den Code von Grund auf neu schreiben zu müssen.</p>
<p>Zugleich illustriert dieses Beispiel auch <strong>Gefahren</strong> und die damit verbundene Notwendigkeit, <strong>transparent mit den eigenen Daten umzugehen</strong>. Dieses Flächendiagramm suggeriert nämlich fälschlicherweise einen linearen Verlauf, obwohl es nur auf Daten zu drei Jahren beruht.</p>
</div>
</div>
</section>
</section>
<section id="verteilungen" class="level3" data-number="5.3.4">
<h3 data-number="5.3.4" class="anchored" data-anchor-id="verteilungen"><span class="header-section-number">5.3.4</span> Verteilungen</h3>
<p>Um einen Datensatz kennenzulernen, müssen wir oft verstehen, <strong>wie einzelne Variablen verteilt</strong> sind. Das heißt, wir möchten erfahren, ob alle Werte nah beieinander oder weit voneinander entfernt liegen, wo sich die meisten Werte bündeln oder wo die höchsten bzw. geringsten Werte zu beobachten sind.</p>
<section id="histogramm" class="level4" data-number="5.3.4.1">
<h4 data-number="5.3.4.1" class="anchored" data-anchor-id="histogramm"><span class="header-section-number">5.3.4.1</span> Histogramm</h4>
<p>Ein Histogramm ist ein Balkendiagramm, das die <strong>absolute Anzahl an Beobachtungen</strong> innerhalb eines sog. Werteintervalls angibt. Ein <strong>Werteintevall</strong> ist ein Bereich mit einer oberen und einer unteren Grenze, dem eine Beobachtung zugeordnet wird. Um die Verteilung der Variable <code>lifeExp</code> im <code>gapminder</code>-Datensatz des Jahres 2007 darzustellen, müssen wir sie als einzige Ästhetik mit der X-Achse verbinden und <strong><code>geom_histogram()</code></strong> hinzufügen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 darstellen</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> lifeExp)) <span class="sc">+</span> <span class="co"># X-Achse: lifeExp</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="co"># Histogramm zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Die dazugehörige Mitteilung (<code>stat_bin() using bins = 30. Pick better value with binwidth.</code>) sagt uns, dass <code>ggplot</code> 30 <em>bins</em> gezeichnet hat. Mit <em>bins</em> sind die Wertebereiche, die durch Säulen dargestellt werden, gemeint. Wenn wir mehr oder weniger <em>bins</em> zeichnen lassen wollen, können wir dem Parameter <code>bins</code> innerhalb von <code>geom_histogram()</code> die <strong>Anzahl der <em>bins</em> verändern</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="co"># Histogramm mit 5 Säulen zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>) <span class="co"># Histogramm mit 10 Säulen zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Alternativ können wir mit dem Argument <strong><code>binwidth</code></strong> innerhalb von <code>geom_histogram()</code> die <strong>Breite dieser Wertebereiche</strong> verändern. Mit <code>binwidth = 5</code> bestimmen wir also, dass unsere Wertebereiche jeweils fünf Jahre an Lebenserwartung abdecken sollen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> lifeExp)) <span class="sc">+</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>) <span class="co"># Histogramm mit Intervallbereite 5 zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Leicht können wir jetzt also erkennen, dass die meisten nationalen Lebenserwartungen im Jahr 2007 zwischen 70 und 80 Jahren lagen, obgleich es sogar noch zahlreiche Beobachtungen unterhalb der Grenze von 60 Jahren gab.</p>
</section>
<section id="boxplot" class="level4" data-number="5.3.4.2">
<h4 data-number="5.3.4.2" class="anchored" data-anchor-id="boxplot"><span class="header-section-number">5.3.4.2</span> Boxplot</h4>
<p>Eine zweite Möglichkeit, eine Verteilung darzustellen, ist, ein Boxplot (auch <em>box-and-whisker-plot</em> genannt) zu zeichnen. Dabei handelt es sich um eine spezielle Diagrammform, die <strong>mehrere Informationen zu einer Verteilung in einer Grafik</strong> darstellt.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://datatab.de/assets/tutorial/boxplot_interpretieren.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Die Bestandteile eines Boxplots <span class="citation" data-cites="datatab2024a">(<a href="references.html#ref-datatab2024a" role="doc-biblioref">DATAtab 2024a</a>)</span>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Wieder können wir unseren Code vom Histogramm weitgehend wiederverwenden und <code>geom_histogram()</code> durch <strong><code>geom_boxplot()</code></strong> ersetzen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> lifeExp)) <span class="sc">+</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="co"># Boxplot zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Dass dieses Boxplot entgegen der Konvention nicht senkrecht, sondern waagerecht ausgerichtet ist, liegt daran, dass wir die X-Achse (<code>x</code>) mit <code>lifeExp</code> verbunden haben. Um ein standardmäßiges Boxplot zu erzeugen, müssen wir also nur <code>x</code> in <code>y</code> ändern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> lifeExp)) <span class="sc">+</span> <span class="co"># Y-Achse: lifeExp</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Boxplots werden gerne genutzt, um <strong>mehrere Verteilungen</strong> miteinander zu vergleichen. Wählen wir also einen Datensatz aus, der Beobachtungen aus mehreren Jahren enthält (hier 1957, 1967, 1977, 1987, 1997, 2007), können wir auf der X-Achse nunmehr die Variable <code>year</code> versuchen, abzutragen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1957</span>, <span class="at">to =</span> <span class="dv">2007</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen von 1957, 1967, 1977, 1987, 1997 und 2007</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="co"># X-Achse: year</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp)) <span class="sc">+</span> </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Continuous x aesthetic
ℹ did you forget `aes(group = ...)`?</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Hoppla - so einfach gelang es uns leider nicht. Die Fehlermeldung sagt uns, dass wir vergessen haben, eine <strong>Gruppenästhetik</strong> (<code>group</code>) zu vergeben: <code>did you forget aes(group = ...)?</code> Wenn wir <code>ggplot</code> nicht sagen, dass die Beobachtungen jeden Wertes von <code>year</code> eine Gruppe bildet, zeichnet es automatisch ein Boxplot für alle Beobachtungen. Wir müssen also innerhalb von <code>aes()</code> <code>group</code> ebenfalls mit <code>year</code> verbinden, damit sechs separate Boxplots gezeichnet werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1957</span>, <span class="at">to =</span> <span class="dv">2007</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">|&gt;</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> year, <span class="co"># Gruppe: year</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="violindiagramm" class="level4" data-number="5.3.4.3">
<h4 data-number="5.3.4.3" class="anchored" data-anchor-id="violindiagramm"><span class="header-section-number">5.3.4.3</span> Violindiagramm</h4>
<p>Auch Boxplots können täuschen. Dadurch, dass sie nur bestimmte Werteschwellen zeigen, kann unser Eindruck davon, wo sich Werte “ballen”, getrügt sein <span class="citation" data-cites="desbarats2021">(<a href="references.html#ref-desbarats2021" role="doc-biblioref">Desbarats 2021</a>)</span>. Eine Alternative, wenn wir mehrere Verteilungen miteinander vergleichen möchten, ist das <strong>Violindiagramm</strong>. Hierbei handelt es sich um ein Flächenpolygon, das dort “bauchig” gezeichnet wird, wo sich viele Werte befinden und dort “schmal” gezeichnet wird, wo es wiederum kaum Werte gibt.</p>
<p>Abermals müssen wir unseren vorherigen Code nur minimal verändern, indem wir <strong><code>geom_violin()</code></strong> anstelle von <code>geom_histogram()</code> eingeben, um ein aussagekräftiges Violindiagramm zu zeichnen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1957</span>, <span class="at">to =</span> <span class="dv">2007</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 darstellen</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="co"># X-Achse: year</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">group =</span> year, <span class="co"># Gruppe: year</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> lifeExp)) <span class="sc">+</span> <span class="co"># Y-Achse: lifeExp</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>()  <span class="co"># Violinplot zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="beziehungen" class="level3" data-number="5.3.5">
<h3 data-number="5.3.5" class="anchored" data-anchor-id="beziehungen"><span class="header-section-number">5.3.5</span> Beziehungen</h3>
<section id="sec-visualisierungsarten-beziehungen-streudiagramm" class="level4" data-number="5.3.5.1">
<h4 data-number="5.3.5.1" class="anchored" data-anchor-id="sec-visualisierungsarten-beziehungen-streudiagramm"><span class="header-section-number">5.3.5.1</span> Streudiagramm</h4>
<p>Um Beziehungen zwischen zwei Variablen zu ergründen, sind Streudiagramme (<em>scatterplots</em>) geläufig. Sie tragen einzelne Beobachtungen in Form von <strong>Koordinatenpaaren</strong> ab und erlauben so, bereits visuell erste Vermutungen anzustellen, ob ein statistischer Zusammenhang – also eine <strong>Korrelation</strong> – bestehen könnte oder nicht.</p>
<p>Wir möchten erfahren, wie es mit der Korrelation zwischen der Pro-Kopf-Wertschöpfung (<code>gdpPercap</code>) und der Lebenserwartung (<code>lifeExp</code>) unterschiedlicher Länder einen Zusammenhang gibt. Abermals beschränken wir uns auf <code>gapminder</code>-Beobachtungen aus dem Jahr 2007. Die notwendigen Ästhetiken eines Streudiagramms, dessen <em>geom</em> passend zur alternativen Beschreibung als “Punktwolke” <strong><code>geom_point()</code></strong> heißt, sind die Werte der X-Achse (<code>x</code>) und der Y-Achse (<code>y</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 darstellen</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="co"># X-Achse: gdpPercap</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp)) <span class="sc">+</span> <span class="co"># Y-Achse: lifeExp</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="co"># Streudiagramm zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Unser Streudiagramm suggiert auf den ersten Blick, dass vor allem bei vergleichbar geringem Pro-Kopf-Einkommen geringe Zuwächse mit deutlichen Veränderungen in der Lebenserwartung einhergehen. Das ist bereits ein nützlicher Eindruck, wir können aber mit einem Streudiagramm noch weitere <strong>Informationen</strong> darstellen. Welche Punkte repräsentieren etwa Länder welcher Kontinente? Wenn wir diese Eigenschaft unserer Punkte unterscheiden möchten, können wir als zusätzliche Ästhetik die <strong>Farbe</strong> (<code>color</code>) verändern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Diese kleine Veränderung hilft uns, zu erkennen, dass Pro-Kopf-BIP und Lebenserwartung vor allem in afrikanischen Ländern niedrig ausfallen. Demgegenüber liegt selbst unter den weniger reichen europäischen Ländern keine Lebenserwartung unter 70 Jahren. Wollten wir dieses Streudiagramm noch deutlicher unterscheiden, könnten wir auch die <strong>Form</strong> der Punkte (<code>shape</code>)<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> in Abhängigkeit vom <strong>Kontinent</strong> ändern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">shape =</span> continent)) <span class="sc">+</span> <span class="co"># Form: continent</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Bei einer Form, normalerweise dem Punkt, zu bleiben, hat jedoch Vorteile. Denn mit unserem nunmehr eingefärbten Streudiagramm können wir noch mehr wichtige Informationen darstellen. Wenn es genügt uns nicht genügt, zu wissen, zu welchem Kontinent die Länder gehören, könnten wir darüber hinaus auch darstellen, <strong>wieviele Menschen in diesen Ländern leben</strong>. Auch hierfür müssen wir unseren Code nur um wenige Zeichen ergänzen, nämlich indem wir die <strong>Größe</strong> der Punkte (<code>size</code>) mit der Bevölkerungsangabe (<code>pop</code>) verbinden. Das Ergebnis wird oft auch als <em>bubble plot</em> (zu deutsch etwa “Seifenblasendiagramm”) bezeichnet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop)) <span class="sc">+</span> <span class="co"># Größe: pop</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit einem Blick erkennen wir, dass im Jahr 2007 der Großteil aller Menschen in Ländern mit eher geringem Pro-Kopf-BIP lebte, denn nicht zuletzt die beiden großen Punkte Indiens und Chinas stechen heraus.</p>
<p>In der <strong>Legende</strong> liest sich die Schreibweise <code>e+08</code><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> jedoch nicht besonders gut. Hier können wir mit unseren bisherigen Fähigkeiten eine von zwei Veränderungen vornehmen. <em>Entweder</em> transformieren wir innerhalb des <code>ggplot</code>-Aufrufs die Variable mit <code>pop / 1000000</code> in eine Millionenangabe…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 1: Variable innerhalb von ggplot() umrechnen</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>)) <span class="sc">+</span> <span class="co"># Größe: pop, umgerechnet in Millionen</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>…<em>oder</em> wir verändern die zugrundeliegende Tabelle.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 2: Variable in der Ursprungstabelle umrechnen</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span> <span class="co"># Neue Variable pop_mn berechnen</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop_mn)) <span class="sc">+</span> <span class="co"># Größe: pop_mn</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Was jedoch regelmäßig Probleme bei derartigen Diagrammen macht, ist der Umstand, dass größere Punkte kleinere leicht <strong>überlagern</strong> (<em>overplotting</em>) und weniger sichtbar machen. Diesem Umstand können wir auf zwei Weisen Rechnung tragen. Die <em>erste</em> Möglichkeit besteht darin, die sich überlagernden Elemente leicht <strong>transparent</strong> zu zeichnen. Wir können dafür eine <strong>konstante Ästhetik</strong> nutzen, denn der Transparenzgrad soll für alle Punkte gleich sind und nicht in Abhängigkeit von einer Variablen variieren (<a href="#sec-datenvisualisierung-ggplot2-aesthetiken" class="quarto-xref"><span>Kapitel 5.2.3</span></a>). In diesem Fall nutzen wir also kein <em>mapping</em>, erstellen keine Verbindung, sondern geben einfach mit <code>geom_point(alpha = 0.5)</code> ein, dass wir <em>jeden</em> Punkt mit 50%-iger Transparenz (<em>alpha</em>) zeichnen wollen. Die <em>zweite</em> Möglichkeit, <em>overplotting</em> zu verhindern, ist das sog. <em>facetting</em> (<a href="#sec-datenvisualisierung-verfeinern-facetting" class="quarto-xref"><span>Kapitel 5.4.2</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop_mn)) <span class="sc">+</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="co"># Streudiagramm mit halbtransparenten Punkten zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="visualisierungen-verfeinern" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="visualisierungen-verfeinern"><span class="header-section-number">5.4</span> Visualisierungen verfeinern</h2>
<section id="sec-datenvisualisierung-verfeinern-kombinationen" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="sec-datenvisualisierung-verfeinern-kombinationen"><span class="header-section-number">5.4.1</span> Kombinationen mehrerer Geoms</h3>
<p>Bislang haben wir nur <code>ggplot</code>-Objekte mit je einem <em>geom</em> erzeugt. Gemäß der <em>grammar of graphics</em> ist es aber möglich, <strong>mehrere <em>geoms</em> miteinander zu kombinieren</strong>. Das ist prinzipiell nicht schwierig, wir müssen lediglich mit <code>+</code> ein weiteres <em>geom</em> zeichnen und dabei darauf achten, dass sich unsere unterschiedlichen <em>geoms</em> dabei nicht unpassend überlagern. Dabei gilt: Was zuletzt dem <code>ggplot()</code>-Objekt hinzugefügt wird, erscheint “oben” – ganz so, wie wir es von übereinandergelegten Schichten erwarten würden.</p>
<p>Die möglichen <strong>Kombinationen sind quasi unerschöpflich</strong>, denn sie entspringen aus der Kreativität der Nutzer*in. Wir wollen aber wenigstens <em>drei Beispiele</em> für häufig genutzte Kombinationen geben.</p>
<section id="linien-mit-punkten" class="level4" data-number="5.4.1.1">
<h4 data-number="5.4.1.1" class="anchored" data-anchor-id="linien-mit-punkten"><span class="header-section-number">5.4.1.1</span> Linien mit Punkten</h4>
<p>Wir beginnen mit einem Liniendiagramm, das wir zuvor erzeugt haben (<a href="#sec-datenvisualisierung-arten-zeitlich-linie" class="quarto-xref"><span>Kapitel 5.3.3.1</span></a>). <strong>Problematisch</strong> ist an derartigen Diagrammen, dass sie dort <strong>Daten andeuten, wo keine vorhanden sind</strong>. Schließlich wissen wir, dass <code>gapminder</code> keine jährlichen Daten, sondern nur solche in Fünfjahresabständen enthält. Die von uns erzeugte Tabelle <code>cont_life_exp</code> enthält also nur Angaben für 4 Jahre (nämlich 1977, 1987, 1997, 2007), nicht für den gesamten Zeitraum.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Es wäre dementsprechend sinnvoll, unsere Daten offenzulegen, indem wir <strong>Punkte</strong> hinzufügen. Das entsprechende <em>geom</em> hierfür kennen wir bereits: <strong><code>geom_point()</code></strong>. Weil <code>geom_point()</code> dieselben Ästhetiken wie <code>geom_line()</code> nutzt (also <code>x</code>, <code>y</code> und <code>color</code>), können wir unseren bisherigen Code so lassen, wie er ist und müssen einfach nur <code>geom_point()</code> hinzufügen. Die <strong>Legende</strong> passt <code>ggplot</code> automatisch an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="co"># Punkte zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Möchten wir <strong>konstante Veränderungen</strong> an dieser Grafik vornehmen (wie etwa andere, größere Formen), können wir das direkt in <code>geom_point()</code> tun.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> cont_life_exp,</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> mean_life_exp,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">2</span>, <span class="co"># Form: Dreieck</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>) <span class="co"># Größe: 4pt</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="regressionslinien" class="level4" data-number="5.4.1.2">
<h4 data-number="5.4.1.2" class="anchored" data-anchor-id="regressionslinien"><span class="header-section-number">5.4.1.2</span> Regressionslinien</h4>
<p>Sobald wir mit Diagrammen arbeiten, die aus numerischen Wertepaaren <code>x</code> und <code>y</code> bestehen (wie Liniendiagramme oder Streudiagramme), können wir eine <strong>Regressionslinie</strong>, auch Trendlinie genannt, einzeichnen lassen.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> Das <em>geom</em> für eine solche Trendlinie heißt <strong><code>geom_smooth()</code></strong>, denn es “glättet” gewissermaßen die Daten.</p>
<p>Nehmen wir als Beispiel ein Liniendiagramm der durchschnittlichen Lebenserwartung im gesamten <code>gapminder</code>-Datensatz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> <span class="co"># Gruppen bilden: year</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span> <span class="co"># Mittelwert von lifeExp berechnen</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="co"># X-Achse: year</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp)) <span class="sc">+</span> <span class="co"># Y-Achse: mean_life_exp</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="co"># Linie zeichnen</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="co"># Punkte zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Fügen wir diesem Aufruf <code>geom_smooth()</code> hinzu, müssen wir nur angeben, welche <strong>Art von Regression</strong> (<code>method</code>)berechnet und gezeichnet werden soll und ob der Standardfehler der Regression (<em>standard error</em>, <code>se</code>)<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> angezeigt werden soll oder nicht.</p>
<section id="lineare-regression" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="lineare-regression">Lineare Regression</h5>
<p>Mit <strong><code>method = "lm"</code></strong> weisen wir <code>ggplot</code> an, ein <strong><em>l</em>ineares <em>M</em>odell</strong> zu berechnen, also eine Gerade zu zeichnen. Mit <code>se = FALSE</code> erklären wir, keinen Standardfehler einzeichnen zu wollen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> <span class="co"># Gruppen bilden: year</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp)) <span class="sc">+</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="co"># Trendlinie zeichnen</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="co"># Keinen Standardfehler zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Besonders nützlich können Trendlinien sein, wenn wir <strong>Trends von Gruppen miteinander vergleichen</strong> möchten: Wo sind Aufwärts-, wo Abwärtstrends zu beobachten? Nehmen wir an, wir würden die durchschnittlichen Lebenserwartungen auf unterschiedlichen Kontinente darstellen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">|&gt;</span> <span class="co"># Gruppen bilden: year, continent</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp,</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit <code>geom_smooth()</code> können wir nicht nur eine, sondern auch <em>mehrere</em> Regressionsgeraden zugleich berechnen und zeichnen lassen. Denn ohne weitere Veränderungen übernimmt <code>geom_smooth()</code> alle <em>mappings</em> aus unserem <code>ggplot()</code>-Aufruf.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">|&gt;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent)) <span class="sc">+</span> <span class="co"># Farbe: continent</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="co"># Trendlinien zeichnen</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="co"># Keinen Standardfehler zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Einmal verstanden, können wir auch die Linien und Punkte weglassen und uns <strong>nur die Trendlinien anzeigen</strong> lassen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="lokal-gewichtete-regression" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="lokal-gewichtete-regression">Lokal gewichtete Regression</h5>
<p>Lineare Trendlinien sind aber nicht immer gleich hilfreich. Denken wir für ein Beispiel zurück an dieses Streudiagramm, das wir zuvor erzeugt haben (<a href="#sec-visualisierungsarten-beziehungen-streudiagramm" class="quarto-xref"><span>Kapitel 5.3.5.1</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 darstellen</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span> <span class="co"># Neue Variable pop_mn berechnen</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="co"># X-Achse: gdpPercap</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp)) <span class="sc">+</span>  <span class="co"># Y-Achse: lifeExp</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="co"># Streudiagramm zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Das Muster der Punkte lässt uns vermuten, dass hier <strong>kein linearer Trend</strong> vorliegt, sondern ein <strong>dynamischer</strong>. Wie aber können wir das darstellen? Zunächst zeichnen wir auf die uns bekannte Weise eine lineare Trendlinie, um uns zu überzeugen, dass dies die Daten nicht gut abbildet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="co"># Lineare Trendlinie zeichnen</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="co"># Keinen Standardfehler zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Und tatsächlich, diese Linie passt nicht besonders gut zu den Punkten. Für solche Fälle können wir die Berechnungsmethode in <strong><code>method = "loess"</code></strong> ändern, was <code>ggplot</code> dazu bringt, eine <strong>lokal gewichtete Regression</strong> zu berechnen. Das heißt, statt für alle Punkte auf einmal eine Linie zu ziehen, berechnet <code>ggplot</code> für mehrere kleinere Paare eine Linie und verbindet deren Ergebnisse so miteinander, dass eine dynamische Linie gezogen wird.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="co"># Lokal gewichtete Trendlinie zeichnen</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mit einer solchen Darstellung fühlen wir uns schon eher bestätigt: insbesondere bei niedrigem Pro-Kopf-BIP scheinen Veränderungen mit stärkeren Zuwächsen der Lebenserwartung einherzugehen.</p>
</section>
</section>
<section id="text" class="level4" data-number="5.4.1.3">
<h4 data-number="5.4.1.3" class="anchored" data-anchor-id="text"><span class="header-section-number">5.4.1.3</span> Text</h4>
<p>Die Lesbarkeit eines Diagramms kann oft verbessert werden, indem eine <strong>Kombination von Visualisierung und Zahl</strong> verwendet wird. Aus diesem Säulendiagramm können wir noch keine konkreten Zahlen ablesen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 darstellen</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">|&gt;</span> <span class="co"># Gruppen bilden: continent</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span> <span class="co"># Mittelwert von lifeExp berechnen</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(continent, mean_life_exp), <span class="co"># X-Achse: continent, geordnet nach mean_life_exp</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp, <span class="co"># Y: mean_life_exp</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Füllfarbe: continent</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="co"># Säulen zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Um Text als <em>geom</em> einzuarbeiten, können wir zur Verbesserung auf <strong><code>geom_text()</code></strong> zurückgreifen. Dabei verbinden wir den darzustellenden Wert (in diesem Fall <code>mean_life_exp</code>) mit der Ästhetik <code>label</code>, allerdings <em>innerhalb</em> von <code>geom_text()</code>. Schließlich bezieht sich diese Verbindung nicht auf beide genutzten <em>geoms</em> (also <code>geom_col()</code> als auch <code>geom_text()</code>), sondern nur auf dieses <em>geom</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">|&gt;</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(continent, mean_life_exp),</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp,</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> mean_life_exp)) <span class="co"># Text zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Diese Textobjekt sind <strong>aus zwei Gründen noch nicht gelungen</strong>. <em>Erstens</em> sind die Zahlen zu detailliert, um Aufschluss zu geben. Indem wir sie mit <code>round(pop, digits = 2)</code> <strong>runden</strong>, können wir die Lesbarkeit erhöhen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">|&gt;</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(continent, mean_life_exp),</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp,</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> <span class="co"># Säulen zeichnen</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(mean_life_exp, <span class="at">digits =</span> <span class="dv">1</span>))) <span class="co"># Text (gerundete Zahlen) zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><em>Zweitens</em> befinden sich die Zahlen genau am Ende der Säulen. Das ergibt Sinn, denn mit <code>y = mean_life_exp</code> haben wir genau diese Position bestimmt. Was wir tun möchten, um die Zahlen <strong>auf den Säulen zu platzieren</strong>, ist, einen kleinen <strong>Abstand</strong> zu definieren. Mit den Parametern <code>nudge_x</code> und <code>nudge_y</code> (zu deutsch “anstoßen” oder “anstupsen”), können wir innerhalb von <code>geom_text()</code> solche Abstände angeben. Weil wir die Zahlen in diesem Fall vertikal, also entlang der Y-Achse, verschieben wollen, nutzen wir <code>nudge_y</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">|&gt;</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">|&gt;</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(continent, mean_life_exp),</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_life_exp,</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(mean_life_exp, <span class="at">digits =</span> <span class="dv">2</span>)), <span class="co"># Text (gerundete Zahlen) zeichnen</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">nudge_y =</span> <span class="dv">2</span>) <span class="co"># Text leicht verschieben</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-datenvisualisierung-verfeinern-facetting" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="sec-datenvisualisierung-verfeinern-facetting"><span class="header-section-number">5.4.2</span> Facetting</h3>
<p>Wenn wir <strong>Datensätze mit mehreren Gruppen</strong> erkunden wollen, ist es nicht immer einfach, alle Entwicklungen in einer einzigen Visualisierung darzustellen. In diesem Beispiel werden die Zunahmen der Gesamtbevölkerung Amerikas und Afrikas durch das starke Wachstum in Asien visuell verdrängt, wie das von uns erstellte gestapelte Säulendiagramm <code>population_by_continent</code> zeigt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>population_by_continent <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent, year) <span class="sc">|&gt;</span> <span class="co"># Gruppen bilden: continent, year</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_population_bn =</span> <span class="fu">sum</span>(pop) <span class="sc">/</span> <span class="fl">1e09</span>) <span class="sc">|&gt;</span> <span class="co"># Summe von pop berechnen und in Milliarden umrechnen</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="co"># X-Achse: year</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> total_population_bn, <span class="co"># Y-Achse: total_population_bn</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span> <span class="co"># Füllfarbe: continent</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="co"># Säulen zeichnen</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>population_by_continent</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mittels <em>facets</em> (zu deutsch etwa “Facette” oder “Aspekt”) können wir eine solche Visualisierung auf Basis einer Gruppenvariable <strong>in mehrere kleine Elemente zerlegen</strong>. Die einfachste Funktion hierfür ist <strong><code>facet_wrap()</code></strong>, dem wir nur den Namen einer solchen Variable nennen müssen (mit einer <code>~</code>, einer sog. Tilde, vorangestellt). Gemäß dem <code>ggplot</code>-Syntax fügen wir <code>facet_wrap()</code> mittels <code>+</code> unserem bisherigen Code an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>population_by_continent <span class="sc">+</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent) <span class="co"># Facets: continent</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>facet_wrap()</code> ordnet die einzelnen Diagrammen in <strong>Reihen <em>und</em> Spalten</strong> an, also in fortlaufender Ordnung. Dabei können auch mittels <code>facet_wrap(variable_1 ~ variable_2)</code> gruppenweise Diagramme auf Basis von <strong>zwei Variablen</strong>. gezeichnet werden <span class="citation" data-cites="ggplot2020">(siehe <a href="references.html#ref-ggplot2020" role="doc-biblioref">Wickham, Navarro, und Pedersen 2020, Kap. 16</a>)</span>.</p>
<p>Möchten wir die Diagramme “dehnen”, sodass sie in <strong>Zeilen <em>oder</em> Spalten</strong> dargestellt werden, nutzen wir <strong><code>facet_grid()</code></strong>. Hier gibt die Variable links von <code>~</code> die Zeilen, die Variable rechts von <code>~</code> die Spalten an. Möchten wir einen der beiden Werte “leer” lassen, setzen wir einen <code>.</code> ein.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>population_by_continent <span class="sc">+</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(continent <span class="sc">~</span> .) <span class="co"># Facets: continent, nur Zeilen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>population_by_continent <span class="sc">+</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> continent) <span class="co"># Facets: continent, nur Spalten</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="legenden" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="legenden"><span class="header-section-number">5.4.3</span> Legenden</h3>
<p>Sobald wir visuelle Eigenschaften jenseits von Positionsangaben darstellen, erzeugt <code>ggplot</code> automatisch eine Legende. Wenn wir eine Legende nicht benötigen, wie bei den oben erzeugten <em>facets</em>, können wir innerhalb des jeweiligen <em>geoms</em> mit <strong><code>show.legend = FALSE</code></strong> angeben, dass die <strong>Legende nicht angezeigt</strong> werden soll.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent, year) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_population_bn =</span> <span class="fu">sum</span>(pop) <span class="sc">/</span> <span class="fl">1e09</span>) <span class="sc">|&gt;</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> total_population_bn,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> <span class="co"># Säulen zeichnen, keine Legende anzeigen</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Weitere Änderungen in der Anzeige der Legende sind mittels Änderungen im <em>theme</em> (<a href="#sec-visualisierungen-verfeinern-themes" class="quarto-xref"><span>Kapitel 5.4.7</span></a>) möglich.</p>
</section>
<section id="koordinatensysteme" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="koordinatensysteme"><span class="header-section-number">5.4.4</span> Koordinatensysteme</h3>
<p>Wenn wir Diagramme erstellen, erzeugt <code>ggplot</code> automatisch entsprechende Koordinatensysteme. Um diese Koordinatensysteme zu verfeinern, kommt oft wenigstens eine von drei Veränderungen vor:</p>
<ol type="1">
<li>Veränderung der Achseneinheit</li>
<li>Veränderung der Achsenbegrenzungen</li>
<li>Veränderung der Achsenmarkierungen und Markierungsbeschriftungen</li>
</ol>
<section id="achseneinheit" class="level4" data-number="5.4.4.1">
<h4 data-number="5.4.4.1" class="anchored" data-anchor-id="achseneinheit"><span class="header-section-number">5.4.4.1</span> Achseneinheit</h4>
<p>Rufen wir uns dieses zuvor erzeugte Streudiagramm in Erinnerung (<a href="#sec-visualisierungsarten-beziehungen-streudiagramm" class="quarto-xref"><span>Kapitel 5.3.5.1</span></a>). Es stellt <strong>keinen linearen</strong> Trend dar, sondern gerade bei geringen Pro-Kopf-BIP-Werten starke Zuwachsraten, die im Verlauf deutlich abflachen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>)) <span class="sc">+</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Für bestimmte Zwecke (wie die Anwendung in einer Regressionsberechnung) ist es wünschenswert, die X-Skala deshalb nicht linear, sondern <strong>logarithmisch</strong> anzeigen zu lassen. Hierfür fügen wir mit <code>+</code> unseren bestehenden Code <strong><code>scale_x_log10()</code></strong> hinzu, was die <strong>Achseneinheit transformiert</strong>. Die zugrundeliegenden Daten werden dabei nicht verändert.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>)) <span class="sc">+</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="co"># Y-Achse: logarithmisch </span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wenn wir jetzt noch eine <strong>lineare Trendlinie</strong> hinzufügen, passt diese besser zu der Darstellung der Daten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp,</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent,</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>),</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="co"># X-Achse: gdpPercap</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp), <span class="co"># Y-Achse: lifeExp</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">"lm"</span>,</span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="co"># Lineare Trendlinie zeichnen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Weitere Transformationen
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>scale_x_log10()</code> ist nur eine von vielen möglichen Achsentransformationen. Wenn Sie bei RStudio die Autocomplete-Funktion (Tabulatortaste) bei der Eingabe von <code>scale_x_*()</code>, <code>scale_y_*()</code> usw. nutzen, werden Ihnen weitere Möglichkeiten vorgeschlagen.</p>
</div>
</div>
</section>
<section id="achsenbegrenzungen" class="level4" data-number="5.4.4.2">
<h4 data-number="5.4.4.2" class="anchored" data-anchor-id="achsenbegrenzungen"><span class="header-section-number">5.4.4.2</span> Achsenbegrenzungen</h4>
<p>Wir möchten an dem Koordinatensystem dieses Streudiagramms weiter arbeiten. Damit wir nicht immer den Code wiederholen müssen, erzeugen wir ein <strong><code>ggplot</code>-Objekt</strong> im <em>workspace</em> namens <code>my_bubble_plot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> <span class="co"># Nur Beobachtungen des Jahres 2007 darstellen</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mn =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span> <span class="co"># Neue Variable pop_mn berechnen</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="co"># X-Achse: gdpPercap</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> lifeExp, <span class="co"># Y-Achse: lifeExp</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> continent, <span class="co"># Farbe: continent</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> pop <span class="sc">/</span> <span class="dv">1000000</span>)) <span class="sc">+</span> <span class="co"># Größe: pop, umgerechnet in Millionen</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="co"># Streudiagramm zeichnen</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="co"># Y-Achse: logarithmisch </span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>my_bubble_plot</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-84-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sobald <code>ggplot</code> ein Koordinatensystem zeichnet, orientiert es sich an den <strong>niedrigsten und höchsten Werten der Variablen</strong>, die auf den Achsen abgetragen werden. Entsprechend beginnt unser Streudiagramm erst bei ungefähr 300 US$ (X-Achse) bzw. bei 40 Jahren (Y-Achse). Möchten wir Anfang und Ende unserer Begrenzungen selbst festlegen, können wir bei numerischen Variablen die Funktion <strong><code>coord_cartesian()</code></strong> heranziehen, deren zwei wichtigste Parameter sind:</p>
<ul>
<li><strong><code>xlim</code></strong>: Die Begrenzungen der X-Achse als Vektor mit zwei Elementen.</li>
<li><strong><code>ylim</code></strong>: Die Begrenzungen der Y-Achse als Vektor mit zwei Elementen.</li>
</ul>
<p>Wenn wir unser Diagramm auf der <strong>Y-Achse bei 0 anfangen und bis 90 begrenzen</strong> möchten, geben wir <code>ylim</code> also unsere Angabe mittels <code>c(0, 90)</code> weiter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot <span class="sc">+</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">90</span>)) <span class="co"># Koordinatensystem begrenzen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="achsenmarkierungen-und-markierungsbeschriftungen" class="level4" data-number="5.4.4.3">
<h4 data-number="5.4.4.3" class="anchored" data-anchor-id="achsenmarkierungen-und-markierungsbeschriftungen"><span class="header-section-number">5.4.4.3</span> Achsenmarkierungen und Markierungsbeschriftungen</h4>
<p>Manchmal sind die von <code>ggplot</code> automatisch erzeugten Achsenmarkierungen und deren Beschriftungen verbesserungsfähig. Dass unsere Y-Achse zwar Werte bis 90 anzeigt, die Achsenbeschriftungen aber bei 75 aufhören, ist unschön. Je nach Einheit der Achse können wir aber die <strong>Markierungen und Beschriftungen selbst vorgeben</strong>, indem wir eine weitere <code>scale_*()</code>-Funktion nutzen.</p>
<p>Weil wir die Markierungen und Beschriftungen einer Achse ändern wollen, die eine numerische, <em>kontinuierliche</em> Variable darstellt, wählen wir <strong><code>scale_y_continuous()</code></strong>. Dieser Funktion können wir für den Parameter <strong><code>breaks</code></strong> als Argument einen Vektor von Werten angeben, bei denen eine <strong>Markierung</strong> gezeichnet werden soll. Der Parameter <strong><code>labels</code></strong> erhält als Argument eine Vektor, der die jeweiligen <strong>Beschriftungen</strong> enthält. Oft verwenden wir <strong>denselben Vektor für beide Parameter</strong>. Um in unserem Beispiel Werte von 0 bis 90 Jahren in Abständen von 15 Jahren zu markieren und zu beschriften, erzeugen wir mit <code>seq(from = 0, to = 90, by = 15)</code> einen Vektor, der die Werte 0, 15, 30, 45, 60, 75, 90 enthält und nutzen ihn für <code>breaks</code> und <code>labels</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot <span class="sc">+</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>), <span class="co"># Achsenmarkierungen angeben</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>)) <span class="co"># Achsenmarkierungsbezeichnungen angeben</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Andere Variablentypen, andere <code>scale_*()</code>-Funktion: viele Wege zum Ziel
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ggplot</code> bietet für viele andere Variablentypen (zum Beispiel <em>factors</em> oder <em>dates</em>, <a href="03-grundlagen.html#sec-grundlagen-datentypen" class="quarto-xref"><span>Kapitel 3.4</span></a>) entsprechende <code>scale_*()</code>-Funktionen, um Markierungen und Beschriftungen einer Achse zu verändern.</p>
<p>Zuletzt gibt es (wie fast immer bei R) <strong>mehrere Wege zu einem gewünschten Ziel</strong>. Ein Beispiel hierfür ist <code>scale_y_continuous()</code>, denn wie wir aus <code>?scale_y_continuous</code> erfahren, können wir diese Funktion auch dafür nutzen, um Achsenbegrenzungen einzugeben. <code>scale_y_continuous()</code> verfügt nämlich selbst ebenfalls über die Parameter <code>limits</code> (was dem Parameter <code>ylim</code> in <code>coord_cartesian()</code> entspricht), sodass die folgenden zwei Codebeispiele dasselbe Diagramm zeichnen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 1: ylim mit coord_cartesian()</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>my_bubble_plot <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>),</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 2: ylim mit scale_y_continuous()</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>my_bubble_plot <span class="sc">+</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>),</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>),</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">90</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-88-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="sec-visualisierungen-verfeinern-beschriftungen" class="level3" data-number="5.4.5">
<h3 data-number="5.4.5" class="anchored" data-anchor-id="sec-visualisierungen-verfeinern-beschriftungen"><span class="header-section-number">5.4.5</span> Beschriftungen</h3>
<p>Gute <strong>Beschriftungen sind wichtig, um Visualisierungen lesbar zu gestalten</strong>. Unser bisheriges Streudiagramm (hier als <code>my_bubble_plot_ver2</code> erzeugt) weist noch erheblichen Verbesserungsbedarf auf. <code>gdpPercap</code> und <code>lifeExp</code> sind als <strong>Achsenbeschriftungen</strong> nicht gut zu lesen, ebenso wie <code>pop/1e+06</code> und <code>continent</code> in der <strong>Legende</strong> keinen verständlichen bzw. sauber formattierten Eindruck machen. Wir wollen folglich diese Beschriftungen verbessern und dem Diagramm obendrein noch einen <strong>Titel</strong>, <strong>Untertitel</strong> und eine <strong>Quellenangabe</strong> hinzufügen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot_ver2 <span class="ot">&lt;-</span> my_bubble_plot <span class="sc">+</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>),</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">90</span>, <span class="at">by =</span> <span class="dv">15</span>))</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>my_bubble_plot_ver2</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="titel-untertitel-achsen-quellenangaben" class="level4" data-number="5.4.5.1">
<h4 data-number="5.4.5.1" class="anchored" data-anchor-id="titel-untertitel-achsen-quellenangaben"><span class="header-section-number">5.4.5.1</span> Titel, Untertitel, Achsen, Quellenangaben</h4>
<p>Eine einfache und vielseitige Möglichkeit, einem Diagramm neue Beschriftungen hinzuzufügen bzw. vorhandene zu verändern, ist die Funktion <strong><code>labs()</code></strong> (<em>labels</em>, zu Deutsch etwa “Beschriftungen” oder “Kennzeichnungen”). Die Funktion hat unterschiedliche Parameter<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>, darunter:</p>
<ul>
<li><strong><code>title</code></strong>: Titel des Diagramms</li>
<li><strong><code>subtitle</code></strong>: Untertitel des Diagramms</li>
<li><strong><code>caption</code></strong>: Quellenangabe bzw. weitere Hinweise</li>
<li><strong><code>x</code></strong>: Bezeichnung der X-Achse</li>
<li><strong><code>y</code></strong>: Bezeichnung der Y-Achse</li>
</ul>
<p>Für <code>my_bubble_plot_ver2</code> möchten wir <code>"Die Lebenserwartung steigt tendenziell mit dem Pro-Kopf-BIP"</code> als <em>Titel</em>, <code>"Jahr: 2007"</code> als <em>Untertitel</em> und <code>"Quelle: Gapminder"</code> als <em>Quellenangabe</em> hinzufügen. Außerdem soll die X-Achse mit <code>"Pro-Kopf-BIP (in inflationsbereinigten US$)"</code> und die Y-Achse mit <code>"Mittlere Lebenserwartung (in Jahren)"</code> beschriftet werden. Mit <em>einem</em> Funktionsaufruf können wir alle <em>fünf</em> Veränderungen zugleich vornehmen!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot_ver2 <span class="sc">+</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Die Lebenserwartung steigt tendenziell mit dem Pro-Kopf-BIP"</span>,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Jahr: 2007"</span>,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Quelle: Gapminder"</span>,</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Pro-Kopf-BIP (in inflationsbereinigten US$)"</span>,</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mittlere Lebenserwartung (in Jahren)"</span>) <span class="co"># Beschriftungen hinzufügen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="legende" class="level4" data-number="5.4.5.2">
<h4 data-number="5.4.5.2" class="anchored" data-anchor-id="legende"><span class="header-section-number">5.4.5.2</span> Legende</h4>
<p>Die Bezeichnungen der in der Legende dargestellten Variablen können jeweils mit einer weiteren <strong><code>scale_*()</code>-Funktion</strong> verändert werden. Um die richtige Funktion zu finden, müssen wir uns <strong>zwei Fragen</strong> stellen:</p>
<ol type="1">
<li>Welche <strong>Ästhetik</strong> wird genutzt, um eine Variable darzustellen?</li>
<li>Welchen <strong>Datentyp</strong> hat die Variable, die dargestellt wird?</li>
</ol>
<p>Für unsere erste Legende (<code>pop/1e+06</code>) haben wir anhand der Größe (<code>size</code>) der Punkte eine numerischen, kontinuierlichen Variable (<code>continuous</code>) dargestellt. Die Funktion, die wir heranziehen wollen, lautet also <strong><code>scale_size_continuous()</code></strong>. Innerhalb dieser Funktion können wir dann einem Parameter namens <strong><code>name</code></strong> die Bezeichnung nennen, mit der unsere Legende benannt werden soll.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot_ver2 <span class="sc">+</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Die Lebenserwartung steigt tendenziell mit dem Pro-Kopf-BIP"</span>,</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Jahr: 2007"</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Quelle: Gapminder"</span>,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Pro-Kopf-BIP (in inflationsbereinigten US$)"</span>,</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mittlere Lebenserwartung (in Jahren)"</span>) <span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">name =</span> <span class="st">"Gesamtbevölkerung (in Mio.)"</span>) <span class="co"># Legendenbezeichnung einfügen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Für unsere weitere Legende (<code>continent</code>) haben wir anhand der <strong>Farbe</strong> (<code>color</code>) der Punkte eine <strong>diskrete Variable</strong> (<code>discrete</code>) dargestellt. Die Funktion, die wir heranziehen wollen, lautet also <strong><code>scale_color_discrete()</code></strong>. Innerhalb dieser Funktion können wir dann abermals einem Parameter namens <code>name</code> die Bezeichnung nennen, mit der unsere Legende benannt werden soll.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>my_bubble_plot_ver2 <span class="sc">+</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Die Lebenserwartung steigt tendenziell mit dem Pro-Kopf-BIP"</span>,</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Jahr: 2007"</span>,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Quelle: Gapminder"</span>,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Pro-Kopf-BIP (in inflationsbereinigten US$)"</span>,</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mittlere Lebenserwartung (in Jahren)"</span>) <span class="sc">+</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">name =</span> <span class="st">"Gesamtbevölkerung (in Mio.)"</span>) <span class="sc">+</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">"Kontinent"</span>)  <span class="co"># Weitere Legendenbezeichnung einfügen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Nun sind alle Elemente unseres Diagramms mit passenden Beschriftungen versehen.</p>
</section>
</section>
<section id="farben" class="level3" data-number="5.4.6">
<h3 data-number="5.4.6" class="anchored" data-anchor-id="farben"><span class="header-section-number">5.4.6</span> Farben</h3>
<p>Mit R bzw. <code>ggplot</code> können wir <strong>zahlreiche Farben</strong> nutzen <span class="citation" data-cites="wei2006">(siehe <a href="references.html#ref-wei2006" role="doc-biblioref">Wei 2006</a>)</span>.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> Auf diese können wir zurückgreifen, wenn wir die Standardpalette von <code>ggplot</code> verlassen möchten. Wir können dabei die Farben selbst bestimmen oder auf andere Farbpaletten zurückgreifen, worunter auch solche gehören, die für von Farbfehlsichtigkeit betroffene Leser*innen geeignet sind.</p>
<p>Für die folgenden Beispiele nutzen wir ein simples <strong>Balkendiagramm</strong> (<a href="#sec-datenvisualisierung-visualisierungsarten-mengen-saeulendiagramm" class="quarto-xref"><span>Kapitel 5.3.1.1</span></a>) namens <code>my_barplot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(continent),</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Anzahl Länder im gapminder-Datensatz (2007)"</span>,</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Kontinent"</span>,</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Anzahl"</span>)</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>my_barplot</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="einzelne-farben-bestimmen" class="level4" data-number="5.4.6.1">
<h4 data-number="5.4.6.1" class="anchored" data-anchor-id="einzelne-farben-bestimmen"><span class="header-section-number">5.4.6.1</span> Einzelne Farben bestimmen</h4>
<p>Wenn wir die Farben der fünf dargestellten Balken einzeln verändern wollen, greifen wir abermals auf eine <code>scale_*()</code>-Funktion zurück. Weil wir in diesem Beispiel die <em>Füllfarben</em> (<code>fill</code>) <em>per Hand</em> (<code>manual</code>) verändern möchten, heißt die entsprechende Funktion <strong><code>scale_fill_manual()</code></strong>.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p>
<p>Diese Funktion beinhaltet einen Parameter namens <code>values</code>, dem wir nur einen passenden <strong>Vektor von Farben</strong> entweder als <strong><em>character</em></strong> (z.B. “black”) oder als sog. <strong>Hexadezimal-Code</strong><a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> (z.B. “FFFFFF”) als Argument liefern müssen. In diesem Beispiel entscheiden wir uns willkürlich für die Farben <code>"cyan"</code> (<code>"#00FFFF"</code>), <code>"orange"</code> (<code>"#FFA500"</code>), <code>"green"</code> (<code>"#00FF00"</code>), <code>red</code> (<code>"#FF0000"</code>) und <code>"magenta"</code> (<code>"#FF00FF"</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 1: Farbwahl als String</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"cyan"</span>, <span class="st">"orange"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"magenta"</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 2: Farbwahl als Hexadezimal-Codes</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#00FFFF"</span>, <span class="st">"#FFA500"</span>, <span class="st">"#00FF00"</span>, <span class="st">"#FF0000"</span>, <span class="st">"#FF00FF"</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="voreingestellte-farbpalette-auswählen" class="level4" data-number="5.4.6.2">
<h4 data-number="5.4.6.2" class="anchored" data-anchor-id="voreingestellte-farbpalette-auswählen"><span class="header-section-number">5.4.6.2</span> Voreingestellte Farbpalette auswählen</h4>
<p>Wenn wir Farben einzeln auswählen, können wir uns als Laien leicht über deren Eignung irren. Deshalb gibt es zahlreiche Pakete, die <strong>voreingestellte Farbpaletten</strong> anbieten. Das wohl bekannteste Paket heißt <strong><code>RColorBrewer</code></strong><a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> und ermöglicht uns den Zugriff auf diese Farbpaletten:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/brewer-scales.png" class="img-fluid figure-img" style="width:85.0%"></p>
<figcaption>Die Farbpaletten des <code>RColorBrewer</code>-Pakets <span class="citation" data-cites="ggplot2020">(<a href="references.html#ref-ggplot2020" role="doc-biblioref">Wickham, Navarro, und Pedersen 2020, Kap. 11</a>)</span>.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a></figcaption>
</figure>
</div>
</div>
</div>
<p>Um eine dieser Paletten zu nutzen, nutzen wir die Funktion <strong><code>scale_fill_brewer()</code></strong>, deren Parameter <strong><code>palette</code></strong> eine der Palettenbezeichnung benötigt. Mit der Palette <code>Dark2</code> sieht unser Diagramm definitiv besser als mit unseren zufällig gewählten Farben aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variante 2: Farbwahl als Hexadezimal-Codes</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-97-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Anderer Variablentyp? Kein Problem!
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ggplot2</code> und <code>RColorBrewer</code> bietet nicht nur für diskrete Variablen Möglichkeiten zur Farbwahl, sondern auch für kontinuierliche und andere Datentypen. Bei Fragen lohnt sich ein Blick in <span class="citation" data-cites="ggplot2020">Wickham, Navarro, und Pedersen (<a href="references.html#ref-ggplot2020" role="doc-biblioref">2020, Kap. 11</a>)</span>.</p>
</div>
</div>
</section>
<section id="sec-datenvisualisierung-verfeinern-farbfehlsichtigkeit" class="level4" data-number="5.4.6.3">
<h4 data-number="5.4.6.3" class="anchored" data-anchor-id="sec-datenvisualisierung-verfeinern-farbfehlsichtigkeit"><span class="header-section-number">5.4.6.3</span> Farbfehlsichtigkeit</h4>
<p>Farbfehlsichtigkeit ist <strong>verbreiteter als man als Nichtbetroffene*r denkt</strong>. Deshalb eignen sich nicht alle Farbpaletten gleichermaßen für alle Menschen. Auch hierfür liegen aber Lösungen bereit. Besonders nützlich ist das Package <strong><code>viridis</code></strong>, dessen Farbpaletten nicht nur <strong>ansprechend aussehen</strong> und <strong>bei Farbfehlsichtigkeit geeignet</strong> sind, sondern auch beim Druck einer Abbildung <strong>in schwarz-weiß unterscheidbar</strong> bleiben.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a> Durch <code>viridis</code> stehen uns die folgenden acht Farbpaletten zur Auswahl.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/viridis-scales.png" class="img-fluid figure-img" style="width:85.0%"></p>
<figcaption>Die Farbpaletten des <code>viridis</code>-Pakets <span class="citation" data-cites="viridis2024">(<a href="references.html#ref-viridis2024" role="doc-biblioref">Rudis, Ross, und Garnier 2024</a>)</span>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Um für <code>my_barplot</code> eine dieser Paletten zu nutzen, gebrauchen wir <strong><code>scale_fill_viridis()</code></strong><a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a>. Innerhalb der Funktion geben wir mit dem Parameter <strong><code>option</code></strong> an, welche der Farbpaletten wir nutzen möchten (standardmäßig ist es <code>"viridis"</code>). Möchten wir zudem eine diskrete, keine kontinuierliche Variable mit dieser Palette verbinden, müssen wir den Parameter <strong><code>discrete</code></strong> auf <code>TRUE</code> setzen.</p>
<p>Um für die diskreten Füllfarben von <code>my_barplot</code> beispielsweise die Palette <code>"inferno"</code> zu nutzen, genügt also diese einzeilige Ergänzung unseres Codes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">option =</span> <span class="st">"inferno"</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>) <span class="co"># Inferno-Farbpalette nutzen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-visualisierungen-verfeinern-themes" class="level3" data-number="5.4.7">
<h3 data-number="5.4.7" class="anchored" data-anchor-id="sec-visualisierungen-verfeinern-themes"><span class="header-section-number">5.4.7</span> Themes</h3>
<p>Alle Elemente eines Diagramms, die nicht seine Daten, deren Darstellung mittels <em>geoms</em> oder das Koordinatensystem betreffen, fallen gemäß der <em>grammar of graphics</em> in den Bereich sog. <em>themes</em> (zu deutsch “Thema” oder “Motiv”). <em>Themes</em> decken so <strong>unterschiedliche Aspekte</strong> wie Schriftarten, Achsenstriche, Gitternetzlinien oder Hintergründe ab. <em>Jeder</em> dieser Aspekte kann durch <code>ggplot2</code> einzeln bearbeitet werden, was es unterschiedlichen Medien, Organisationen oder Institutionen erlaubt, einen <strong>eigenen Stil</strong> zu entwickeln, den Leser*innen wiedererkennen.</p>
<p>In diesem Kurs werden wir jedoch keine einzelnen Elemente verändern<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a>, sondern uns auf die Nutzung vorhandener <em>themes</em> beschränken. Wie verändern die vorhandenen Einstellung eines <code>ggplot</code>-Objektes, indem wir mit <code>+</code> eine <strong><code>theme_*()</code></strong>-Funktion hinzufügen.</p>
<section id="eingebaute-themes" class="level4" data-number="5.4.7.1">
<h4 data-number="5.4.7.1" class="anchored" data-anchor-id="eingebaute-themes"><span class="header-section-number">5.4.7.1</span> Eingebaute Themes</h4>
<p><code>ggplot2</code> selbst bringt <strong>mehrere Themes</strong> mit, namentlich <code>theme_bw()</code>, <code>theme_classic()</code>, <code>theme_dark()</code>, <code>theme_gray()</code>, <code>theme_light()</code>, <code>theme_linedraw()</code>, <code>theme_minimal()</code>, <code>theme_void()</code>.<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a></p>
<p>Wie aus dem folgenden <strong>Vergleich</strong> zwischen <code>theme_dark()</code> und <code>theme_light()</code> ersichtlich wird, verändern <em>themes</em> das Erscheinungsbild von Diagramm erheblich.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_dark</span>() <span class="co"># Dunkles theme verwenden</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-100-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="co"># Helles theme verwenden</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-101-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ggthemes" class="level4" data-number="5.4.7.2">
<h4 data-number="5.4.7.2" class="anchored" data-anchor-id="ggthemes"><span class="header-section-number">5.4.7.2</span> <code>ggthemes</code></h4>
<p>Durch die unbegrenzen Möglichkeiten, eigene <em>themes</em> zu entwickeln, gibt es inzwischen zahlreiche Pakete, die Ergänzungen anbieten <span class="citation" data-cites="larsen2024">(<a href="references.html#ref-larsen2024" role="doc-biblioref">Larsen 2024</a>)</span>. An dieser Stelle möchten wir nur auf ein einziges solches Paket zurückgreifen: <strong><code>ggthemes</code></strong>. Dieses Paket bietet die Möglichkeit, die eigenen <code>ggplot</code>-Objekte so umzugestalten, dass sie den Diagrammen aus bekannten <strong>Medien</strong> wie dem US-amerikanischen <em>Wall Street Journal</em>, dem britischen <em>Economist</em> oder den Standardeinstellungen von <strong>Software</strong> wie Stata oder Excel 2003<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a> entsprechen. Einen interaktiven Überblick über die Möglichkeiten von <code>ggthemes</code> bietet <a href="https://r-charts.com/ggplot2/themes/">R Charts</a>.</p>
<p>Möchten wir <code>my_barplot()</code> beispielsweise so aussehen lassen, wie es dem Stil des <em>Economist</em> entspricht, fügen wir lediglich <code>theme_economist()</code> hinzu.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>() <span class="co"># Economist-theme verwenden</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-102-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Weiterhin liefert <code>ggthemes</code> meist auch noch <strong>passende <code>scale_*()</code>-Funktionen</strong>, um die Farbpaletten besagter Stile nachzubilden. Um den <em>Economist</em>-Stil zu vervollständigen, fügen wir entsprechend noch <code>scale_fill_economist()</code> hinzu.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>my_barplot <span class="sc">+</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>() <span class="sc">+</span> <span class="co"># Economist-theme verwenden</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_economist</span>() <span class="co"># Economist-Farbpalette verwenden</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-103-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="besonders-nützliche-erweiterungen" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="besonders-nützliche-erweiterungen"><span class="header-section-number">5.5</span> Besonders nützliche Erweiterungen</h2>
<p>In diesem Abschnitt können wir nur die Grundlagen von <code>ggplot2</code> behandeln, wobei beständig neue Erweiterungen von Entwickler*innen beigesteuert werden. Wenigstens eine <strong>kleine Auswahl</strong> soll deshalb hier Erwähnung finden.</p>
<ul>
<li><a href="https://gganimate.com/"><code>gganimate</code></a>: Zum Erstellen animierter Visualisierungen.</li>
<li><a href="https://rpkgs.datanovia.com/ggpubr/"><code>ggpubr</code></a>: Zum leichteren Erstellen publikationsreifer Standardvisualisierungen.</li>
<li><a href="https://ggrepel.slowkow.com/"><code>ggrepel</code></a>: Zum besseren Platzieren von Labels.</li>
<li><a href="https://patchwork.data-imaginist.com/"><code>patchwork</code></a>: Zum Arrangieren mehrere Visualisierungen in einer Grafik.</li>
<li><a href="https://plotly.com/r/"><code>plotly</code></a>: Zum Erstellen interaktiver Visualisierungen.</li>
</ul>
</section>
<section id="übungsaufgaben" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="übungsaufgaben"><span class="header-section-number">5.6</span> Übungsaufgaben</h2>
<p>Der Datensatz dieser Übungsaufgaben ist <code>penguins</code>, welcher im Paket <code>palmerpenguins</code> enthalten ist.<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a></p>
<section id="überblick-verschaffen" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="überblick-verschaffen"><span class="header-section-number">5.6.1</span> Überblick verschaffen</h3>
<p>Verschaffen Sie sich zunächst mittels geeigneter Funktionsaufrufe einen Eindruck von <code>penguins</code>.</p>
<ol type="1">
<li>Wieviele Zeilen hat die Tabelle?</li>
<li>Wieviele Spalten hat die Tabelle?</li>
<li>Welche Datentypen haben die einzelnen Variablen?</li>
<li>Welche Informationen enthalten die einzelnen Variablen?</li>
</ol>
</section>
<section id="sec-datenvisualisierung-uebungsaufgaben-visualisierungsarten" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="sec-datenvisualisierung-uebungsaufgaben-visualisierungsarten"><span class="header-section-number">5.6.2</span> Visualisierungsarten</h3>
<ol type="1">
<li>Erstellen Sie ein <strong>Säulendiagramm</strong>, das die Anzahl der Beobachtungen nach Spezies darstellt.
<ul>
<li>Ordnen Sie die Säulen (Adelie, Gentoo, Chinstrap) absteigend.</li>
<li>Stellen Sie die Spezies mit unterschiedlichen Füllfarben dar.</li>
<li>Entfernen Sie die automatisch erzeugte Legende.</li>
<li>Zeichnen Sie um alle Säulen als konstante Ästhetik eine schwarze Linie.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Erstellen Sie ein <strong>Liniendiagramm</strong>, das das durchschnittliche Gewicht nach Jahr und Spezies darstellt.<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a>
<ul>
<li>Stellen Sie die Kategorien mit unterschiedlich farbigen Linien dar.</li>
<li>Stellen Sie die Kategorien mit unterschiedlichen Linientypen dar.</li>
<li>Zeichnen Sie alle Linien als konstante Ästhetik mit einer Liniendicke (<code>linewidth</code>) von 1.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Erstellen Sie ein <strong>Violindiagramm</strong>, das die Flossenlänge je nach Spezies darstellt.
<ul>
<li>Stellen Sie die Spezies mit unterschiedlichen Füllfarben dar.</li>
<li>Entfernen Sie die automatisch erzeugte Legende.</li>
<li>Zeichnen Sie alle <em>geoms</em> mit einer konstanten Transparenz (<code>alpha</code>) von 0.75.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Erstellen Sie ein <strong>Streudiagramm</strong>, das die Beziehung zwischen der Flossenlänge und dem Gewicht darstellt.
<ul>
<li>Stellen Sie die Spezies mit unterschiedlichen Farben dar.</li>
<li>Stellen Sie die Spezies mit unterschiedlichen Formen dar.</li>
<li>Wählen Sie manuell die Formen <code>17</code> (Dreieck), <code>18</code> (Raute) und <code>19</code> (Kreis) aus.</li>
<li>Zeichnen Sie alle Punkte mit einer konstanten Größe (<code>size</code>) von 3 und einer konstanten Transparenz (<code>alpha</code>) von 0.25.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-107-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualisierungen-verfeinern-1" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="visualisierungen-verfeinern-1"><span class="header-section-number">5.6.3</span> Visualisierungen verfeinern</h3>
<ol type="1">
<li>Verfeinern Sie Ihr <strong>Säulendiagramm</strong> durch folgende Änderungen:
<ul>
<li>Vergeben Sie aussagekräftige Beschriftungen.</li>
<li>Legen Sie Y-Achsengrenzen von 0 und 160 fest, mit Abständen von 40.</li>
<li>Wählen Sie ein anderes <em>theme</em> Ihrer Wahl aus.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-108-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Verfeinern Sie Ihr <strong>Liniendiagramm</strong> durch folgende Änderungen:
<ul>
<li>Vergeben Sie aussagekräftige Beschriftungen.</li>
<li>Legen Sie X-Achsengrenzen von 2007 und 2009 fest, mit Abständen von 1.</li>
<li>Vergeben Sie manuell die Farben <code>"black"</code>, <code>"darkred"</code> und <code>"darkblue"</code>.</li>
<li>Ordnen Sie die Legende so, dass die Kategorien absteigend nach dem durchschnittlichen Gewicht geordnet sind.<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a></li>
<li>Wählen Sie ein anderes <em>theme</em> Ihrer Wahl aus.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-109-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Verfeinern Sie Ihr <strong>Violindiagramm</strong> durch folgende Änderungen:
<ul>
<li>Wählen Sie für die Umrandung (<code>color</code>) der <em>geoms</em> dieselben Farben wie für die Füllfarben.</li>
<li>Vergeben Sie aussagekräftige Beschriftungen.</li>
<li>Stellen Sie das Geschlecht in unterschiedlichen <em>facets</em> dar.<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a></li>
<li>Wählen Sie ein anderes <em>theme</em> Ihrer Wahl aus.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Verfeinern Sie Ihr <strong>Streudiagramm</strong> durch folgende Änderungen:
<ul>
<li>Zeichnen Sie für jede Gruppe als weiteres <em>geom</em> eine Trendlinie ein.</li>
<li>Vergeben Sie aussagekräftige Beschriftungen.</li>
<li>Stellen Sie das Geschlecht <em>und</em> die Spezies in unterschiedlichen <em>facets</em> dar.<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup>25</sup></a><br>
</li>
<li>Entfernen Sie die automatisch erzeugte Legende.</li>
<li>Wählen Sie das <em>theme</em> des <em>Economist</em> und dessen entsprechende Farbpalette aus.</li>
</ul></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-111-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualisierungen-exportieren" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="visualisierungen-exportieren"><span class="header-section-number">5.6.4</span> Visualisierungen exportieren</h3>
<p>Exportieren Sie mit <code>ggsave()</code> Ihre fertigen Diagramme je einmal in den Formaten PDF und JPEG mit jeweils passenden Dimensionen.</p>
</section>
</section>
<section id="lösungen" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="lösungen"><span class="header-section-number">5.7</span> Lösungen</h2>
<section id="überblick-verschaffen-1" class="level3" data-number="5.7.1">
<h3 data-number="5.7.1" class="anchored" data-anchor-id="überblick-verschaffen-1"><span class="header-section-number">5.7.1</span> Überblick verschaffen</h3>
<ol type="1">
<li><code>nrow(penguins)</code></li>
<li><code>ncol(penguins)</code></li>
<li><code>str(penguins)</code></li>
<li><code>?penguins</code></li>
</ol>
</section>
<section id="visualisierungsarten-1" class="level3" data-number="5.7.2">
<h3 data-number="5.7.2" class="anchored" data-anchor-id="visualisierungsarten-1"><span class="header-section-number">5.7.2</span> Visualisierungsarten</h3>
<ol type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(species),</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">color =</span> <span class="st">"black"</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="05-datenvisualisierung_files/figure-html/unnamed-chunk-112-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, species) <span class="sc">|&gt;</span> </span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_body_mass_g =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_body_mass_g,</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col =</span> species,</span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">linetype =</span> species)) <span class="sc">+</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> flipper_length_mm,</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.75</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> body_mass_g,</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> species,</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualisierungen-verfeinern-2" class="level3" data-number="5.7.3">
<h3 data-number="5.7.3" class="anchored" data-anchor-id="visualisierungen-verfeinern-2"><span class="header-section-number">5.7.3</span> Visualisierungen verfeinern</h3>
<ol type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(species),</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">160</span>),</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">160</span>, <span class="at">by =</span> <span class="dv">40</span>),</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">160</span>, <span class="at">by =</span> <span class="dv">40</span>)) <span class="sc">+</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Überblick des palmerpenguins-Datensatzes"</span>,</span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Spezies"</span>,</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Anzahl an Beobachtungen"</span>) <span class="sc">+</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, species) <span class="sc">|&gt;</span> </span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_body_mass_g =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> mean_body_mass_g,</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col =</span> <span class="fu">reorder</span>(species, <span class="fu">desc</span>(mean_body_mass_g)),</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">linetype =</span> <span class="fu">reorder</span>(species, <span class="fu">desc</span>(mean_body_mass_g)))) <span class="sc">+</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Durchschnittliches Gewicht unterschiedlicher Pinguine"</span>,</span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Jahr"</span>,</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Gramm"</span>,</span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Spezies"</span>,</span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">linetype =</span> <span class="st">"Spezies"</span>) <span class="sc">+</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2007</span><span class="sc">:</span><span class="dv">2009</span>,</span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="dv">2007</span><span class="sc">:</span><span class="dv">2009</span>) <span class="sc">+</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"blue"</span>)) <span class="sc">+</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex)) <span class="sc">|&gt;</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species,</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> flipper_length_mm,</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> species,</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.75</span>,</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Flossenlängen unterschiedlicher Pinguine"</span>,</span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Spezies"</span>,</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Millimeter"</span>) <span class="sc">+</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> sex) <span class="sc">+</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dark</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex)) <span class="sc">|&gt;</span> </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> body_mass_g,</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> species,</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.15</span>,</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, </span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>,</span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Physische Merkmale unterschiedlicher Pinguine"</span>,</span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Flossenlänge (in Millimeter)"</span>,</span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Körpermasse (in Gramm)"</span>) <span class="sc">+</span></span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>) <span class="sc">+</span></span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(sex <span class="sc">~</span> species) <span class="sc">+</span></span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_economist</span>() <span class="sc">+</span></span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_economist</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualisierungen-exportieren-1" class="level3" data-number="5.7.4">
<h3 data-number="5.7.4" class="anchored" data-anchor-id="visualisierungen-exportieren-1"><span class="header-section-number">5.7.4</span> Visualisierungen exportieren</h3>
<p>Der Code dieser Lösung hängt von Ihrem eigenen Dateiverzeichnis und Präferenzen ab, daher wird keine Musterlösung angeboten.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-barnett2024" class="csl-entry" role="listitem">
Barnett, Adrian, und Victor Oguoma. 2024. <span>„Here’s why you should (almost) never use a pie chart for your data“</span>. <em><span>The Conversation</span></em>. <a href="https://theconversation.com/heres-why-you-should-almost-never-use-a-pie-chart-for-your-data-214576" class="uri">https://theconversation.com/heres-why-you-should-almost-never-use-a-pie-chart-for-your-data-214576</a>.
</div>
<div id="ref-datatab2024a" class="csl-entry" role="listitem">
DATAtab. 2024a. <span>„Boxplot. Einfach erklärt“</span>. <a href="https://datatab.de/tutorial/boxplot" class="uri">https://datatab.de/tutorial/boxplot</a>.
</div>
<div id="ref-datatab2024b" class="csl-entry" role="listitem">
———. 2024b. <span>„Lineare Regression. Einfach erklärt“</span>. <a href="https://datatab.de/tutorial/regression" class="uri">https://datatab.de/tutorial/regression</a>.
</div>
<div id="ref-desbarats2021" class="csl-entry" role="listitem">
Desbarats, Nick. 2021. <span>„I’ve Stopped Using Box Plots. Should You?“</span> <a href="https://nightingaledvs.com/ive-stopped-using-box-plots-should-you/" class="uri">https://nightingaledvs.com/ive-stopped-using-box-plots-should-you/</a>.
</div>
<div id="ref-douglas2024" class="csl-entry" role="listitem">
Douglas, Alex, Deon Roos, Francesca Mancini, Ana Couto, und David Lusseau. 2024. <em>An Introduction to <span>R</span></em>. <a href="https://intro2r.com/" class="uri">https://intro2r.com/</a>.
</div>
<div id="ref-gunnell2024" class="csl-entry" role="listitem">
Gunnell, Marshall. 2024. <span>„What is a Color Hex Code? Definition, Examples &amp; Alternatives“</span>. <a href="https://www.techopedia.com/definition/29788/color-hex-code" class="uri">https://www.techopedia.com/definition/29788/color-hex-code</a>.
</div>
<div id="ref-larsen2024" class="csl-entry" role="listitem">
Larsen, Erik Gahner. 2024. <span>„An overview of ggplot2 themes“</span>. <a href="https://erikgahner.dk/2024/an-overview-of-ggplot2-themes/" class="uri">https://erikgahner.dk/2024/an-overview-of-ggplot2-themes/</a>.
</div>
<div id="ref-noback2021" class="csl-entry" role="listitem">
Noback, Michiel. 2021. <span>„Data Analysis and Visualization using <span>R</span>“</span>. <a href="https://michielnoback.github.io/bincourses/course_contents/davur2/book/" class="uri">https://michielnoback.github.io/bincourses/course_contents/davur2/book/</a>.
</div>
<div id="ref-viridis2024" class="csl-entry" role="listitem">
Rudis, Bob, Noam Ross, und Simon Garnier. 2024. <span>„Introduction to the viridis color maps“</span>. <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html" class="uri">https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html</a>.
</div>
<div id="ref-wei2006" class="csl-entry" role="listitem">
Wei, Ying. 2006. <span>„Colors in <span>R</span>“</span>. <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" class="uri">http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf</a>.
</div>
<div id="ref-ggplot2020" class="csl-entry" role="listitem">
Wickham, Hadley, Danielle Navarro, und Thomas Lin Pedersen. 2020. <em>ggplot2. Elegant Graphics for Data Analysis</em>. 3rd Aufl. London: Springer Nature. <a href="https://ggplot2-book.org/">https://ggplot2-book.org/</a>.
</div>
<div id="ref-wilkinson2005" class="csl-entry" role="listitem">
Wilkinson, Leland. 2005. <em>The Grammar of Graphics</em>. 2nd Aufl. New York: Springer.
</div>
<div id="ref-yao2015" class="csl-entry" role="listitem">
Yao, Zhuo. 2015. <span>„Introduction to ggthemes“</span>. <a href="https://www.zhuoyao.net/index.php/2015/08/20/introduction-to-ggthemes/" class="uri">https://www.zhuoyao.net/index.php/2015/08/20/introduction-to-ggthemes/</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Eine gute Zusammenfassung bietet <a href="https://www.youtube.com/watch?v=RCaFBJWXfZc&amp;ab_channel=UniversityofColoradoBoulder">dieses</a> Video der University of Colorado.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Eine Auswahl findet sich in der <a href="https://r-graph-gallery.com/best-dataviz-packages.html">R-Graph-Gallery</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Eine längere Fassung dieser Auflistung findet sich in der <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html"><code>ggplot2</code>-Dokumentation</a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Der Standardwert von <code>position</code> ist <code>"stack"</code>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Weiterführende Anleitungen zum Umgang mit Treemaps unter Nutzung von <code>ggplot2</code> finden sich in der <a href="https://wilkox.org/treemapify/">Dokumentation</a> und bei <a href="https://r-charts.com/part-whole/treemapify/">R Charts</a>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Eine Übersicht aller möglichen Formen liefert <a href="https://www.sthda.com/english/wiki/ggplot2-point-shapes">dieser Blogeintrag</a>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Diese Form der wissenschaftlichen Notation kann mit der Anweisung “Verschiebe den Dezimalpunkt dieser Zahl um acht Stellen nach hinten” übersetzt werden. <code>2.50e+08</code> entspricht also 250000000 oder 250 Millionen.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Dieser Linie liegt zugrunde, dass <code>ggplot</code> im Hintergrund eine Linie berechnet, deren Abstand zu den einzelnen Punkten in der Summe am geringsten ist. Eine einfache Erklärung findet sich bei <span class="citation" data-cites="datatab2024b">DATAtab (<a href="references.html#ref-datatab2024b" role="doc-biblioref">2024b</a>)</span>.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Die Erklärung dieser Metrik würde zu weit führen, kann aber bei <span class="citation" data-cites="datatab2024b">DATAtab (<a href="references.html#ref-datatab2024b" role="doc-biblioref">2024b</a>)</span> nachgelesen werden.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Siehe <code>?labs</code>.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>Eine weitere Übersicht liefert <a href="https://r-charts.com/colors/">R Charts</a>.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Bei anderen Ästhetiken gibt es entsprechende analoge Funktionen wie <code>scale_color_manual()</code>, <code>scale_shape_manual()</code> usw. (siehe `?scale_color_manual´.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>Ein Hexadezimal-Code gibt im Format <code>#RRGGBB</code> die jeweiligen <strong>R</strong>ot-, <strong>G</strong>rün- und <strong>B</strong>lauwerte einer Farbe an, durch deren Kombinationen nahezu 17 Millionen unterschiedlicher Farben generiert werden können <span class="citation" data-cites="gunnell2024">(<a href="references.html#ref-gunnell2024" role="doc-biblioref">Gunnell 2024</a>)</span>.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>Dieses Paket wird mitgeladen, sobald Sie <code>ggplot2</code> bzw. das <code>tidyverse</code>-Paket laden.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Wir können diese Übersicht selbst jederzeit in unserer R-Sitzung mit <code>RColorBrewer::display.brewer.all()</code> aufrufen.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>Für mehr Informationen siehe diese <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">Einführung</a> seitens der Autoren.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>Bei der Ästhetik <code>color</code> stehen entsprechende <code>scale_color_viridis()</code>-Funktionen bereit.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>Wie dies zu bewerkstelligen ist, wird bei <span class="citation" data-cites="ggplot2020">Wickham, Navarro, und Pedersen (<a href="references.html#ref-ggplot2020" role="doc-biblioref">2020, Kap. 17</a>)</span> erläutert.<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p>Eine visuelle Übersicht bietet die <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">Dokumentation</a>.<a href="#fnref19" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn20"><p><span class="citation" data-cites="yao2015">Yao (<a href="references.html#ref-yao2015" role="doc-biblioref">2015</a>)</span> vermutet, dass <code>theme_excel()</code> nur aus ironischen Gründen erzeugt wurde und bittet uns eindringlich: “Please never use this theme.” 🤡<a href="#fnref20" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn21"><p>Für weitere <code>ggplot2</code>-Beispiele anhand von <code>penguins</code> siehe die <a href="https://allisonhorst.github.io/palmerpenguins/articles/examples.html">Dokumentation</a>.<a href="#fnref21" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn22"><p>Hierfür müssen Sie zunächst zwei <code>dplyr</code>-Verben nutzen.<a href="#fnref22" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn23"><p>Hierfür müssen Sie innerhalb von <code>aes()</code> <em>zweimal</em> die Hilfsfunktion <code>reorder()</code> mit <code>desc()</code> nutzen.<a href="#fnref23" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn24"><p>Sollten Sie dabei ein drittes Diagramm mit <code>NA</code>-Werten erzeugen, können Sie diese in Ihrer Pipeline mit <code>filter()</code> zuvor entfernen.<a href="#fnref24" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn25"><p>Hier müssen Sie <code>facet_grid()</code> nutzen. Sollten Sie dabei ein drittes Diagramm mit <code>NA</code>-Werten erzeugen, können Sie diese in Ihrer Pipeline mit <code>filter()</code> zuvor entfernen. Wenn durch die <em>facets</em> die Punktsammlungen zu dunkel werden, können Sie <code>alpha</code> noch weiter verringern.<a href="#fnref25" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./04-datentransformation.html" class="pagination-link" aria-label="Datentransformation">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Datentransformation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./06-datenimport-und-export.html" class="pagination-link" aria-label="Datenimport und -export">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenimport und -export</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>