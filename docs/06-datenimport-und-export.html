<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Datenimport und -export – Einführung in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./07-datenbereinigung.html" rel="next">
<link href="./05-datenvisualisierung.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-datenimport-und-export.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenimport und -export</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/bayReuth-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Einführung in R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-einfuehrung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Workflow</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-grundlagen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Grundlagen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-datentransformation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Datentransformation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-datenvisualisierung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenvisualisierung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-datenimport-und-export.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenimport und -export</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-datenbereinigung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Datenbereinigung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-datenzusammenführung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Datenzusammenführung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-geodatenbearbeitung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Geodatenbearbeitung</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-lernressourcen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lernressourcen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#allgemeiner-ablauf" id="toc-allgemeiner-ablauf" class="nav-link active" data-scroll-target="#allgemeiner-ablauf"><span class="header-section-number">6.1</span> Allgemeiner Ablauf</a></li>
  <li><a href="#csv" id="toc-csv" class="nav-link" data-scroll-target="#csv"><span class="header-section-number">6.2</span> CSV</a>
  <ul>
  <li><a href="#erste-ansicht" id="toc-erste-ansicht" class="nav-link" data-scroll-target="#erste-ansicht"><span class="header-section-number">6.2.1</span> Erste Ansicht</a></li>
  <li><a href="#importieren" id="toc-importieren" class="nav-link" data-scroll-target="#importieren"><span class="header-section-number">6.2.2</span> Importieren</a>
  <ul class="collapse">
  <li><a href="#sec-datenimport-csv-importieren-spaltennamen" id="toc-sec-datenimport-csv-importieren-spaltennamen" class="nav-link" data-scroll-target="#sec-datenimport-csv-importieren-spaltennamen"><span class="header-section-number">6.2.2.1</span> Einheitliche Spaltennamen</a></li>
  <li><a href="#sec-datenimport-csv-import-na" id="toc-sec-datenimport-csv-import-na" class="nav-link" data-scroll-target="#sec-datenimport-csv-import-na"><span class="header-section-number">6.2.2.2</span> Angabe fehlender Werte</a></li>
  <li><a href="#sec-datenimport-csv-importieren-datentypen" id="toc-sec-datenimport-csv-importieren-datentypen" class="nav-link" data-scroll-target="#sec-datenimport-csv-importieren-datentypen"><span class="header-section-number">6.2.2.3</span> Datentypen für Spalten angeben</a></li>
  <li><a href="#zeilen-überspringen" id="toc-zeilen-überspringen" class="nav-link" data-scroll-target="#zeilen-überspringen"><span class="header-section-number">6.2.2.4</span> Zeilen überspringen</a></li>
  <li><a href="#keine-spaltennamen-nutzen" id="toc-keine-spaltennamen-nutzen" class="nav-link" data-scroll-target="#keine-spaltennamen-nutzen"><span class="header-section-number">6.2.2.5</span> Keine Spaltennamen nutzen</a></li>
  <li><a href="#eigene-spaltennamen-angeben" id="toc-eigene-spaltennamen-angeben" class="nav-link" data-scroll-target="#eigene-spaltennamen-angeben"><span class="header-section-number">6.2.2.6</span> Eigene Spaltennamen angeben</a></li>
  </ul></li>
  <li><a href="#exportieren" id="toc-exportieren" class="nav-link" data-scroll-target="#exportieren"><span class="header-section-number">6.2.3</span> Exportieren</a></li>
  <li><a href="#sec-datenimport-csv-verwandte-funktionen" id="toc-sec-datenimport-csv-verwandte-funktionen" class="nav-link" data-scroll-target="#sec-datenimport-csv-verwandte-funktionen"><span class="header-section-number">6.2.4</span> Verwandte Funktionen</a></li>
  </ul></li>
  <li><a href="#xlsx-und-xls" id="toc-xlsx-und-xls" class="nav-link" data-scroll-target="#xlsx-und-xls"><span class="header-section-number">6.3</span> XLSX und XLS</a>
  <ul>
  <li><a href="#erste-ansicht-1" id="toc-erste-ansicht-1" class="nav-link" data-scroll-target="#erste-ansicht-1"><span class="header-section-number">6.3.1</span> Erste Ansicht</a></li>
  <li><a href="#importieren-1" id="toc-importieren-1" class="nav-link" data-scroll-target="#importieren-1"><span class="header-section-number">6.3.2</span> Importieren</a>
  <ul class="collapse">
  <li><a href="#auswahl-eines-bestimmten-tabellenblattes" id="toc-auswahl-eines-bestimmten-tabellenblattes" class="nav-link" data-scroll-target="#auswahl-eines-bestimmten-tabellenblattes"><span class="header-section-number">6.3.2.1</span> Auswahl eines bestimmten Tabellenblattes</a></li>
  <li><a href="#auswahl-eines-tabellenbereichs" id="toc-auswahl-eines-tabellenbereichs" class="nav-link" data-scroll-target="#auswahl-eines-tabellenbereichs"><span class="header-section-number">6.3.2.2</span> Auswahl eines Tabellenbereichs</a></li>
  <li><a href="#einheitliche-spaltennamen" id="toc-einheitliche-spaltennamen" class="nav-link" data-scroll-target="#einheitliche-spaltennamen"><span class="header-section-number">6.3.2.3</span> Einheitliche Spaltennamen</a></li>
  <li><a href="#angabe-fehlender-werte" id="toc-angabe-fehlender-werte" class="nav-link" data-scroll-target="#angabe-fehlender-werte"><span class="header-section-number">6.3.2.4</span> Angabe fehlender Werte</a></li>
  <li><a href="#datentypen-für-spalten-angeben" id="toc-datentypen-für-spalten-angeben" class="nav-link" data-scroll-target="#datentypen-für-spalten-angeben"><span class="header-section-number">6.3.2.5</span> Datentypen für Spalten angeben</a></li>
  <li><a href="#zeilen-überspringen-1" id="toc-zeilen-überspringen-1" class="nav-link" data-scroll-target="#zeilen-überspringen-1"><span class="header-section-number">6.3.2.6</span> Zeilen überspringen</a></li>
  <li><a href="#sec-datenimport-excel-import-keine-spaltennamen" id="toc-sec-datenimport-excel-import-keine-spaltennamen" class="nav-link" data-scroll-target="#sec-datenimport-excel-import-keine-spaltennamen"><span class="header-section-number">6.3.2.7</span> Keine Spaltennamen nutzen</a></li>
  <li><a href="#eigene-spaltennamen-angeben-1" id="toc-eigene-spaltennamen-angeben-1" class="nav-link" data-scroll-target="#eigene-spaltennamen-angeben-1"><span class="header-section-number">6.3.2.8</span> Eigene Spaltennamen angeben</a></li>
  </ul></li>
  <li><a href="#exportieren-1" id="toc-exportieren-1" class="nav-link" data-scroll-target="#exportieren-1"><span class="header-section-number">6.3.3</span> Exportieren</a></li>
  </ul></li>
  <li><a href="#r-datenformate" id="toc-r-datenformate" class="nav-link" data-scroll-target="#r-datenformate"><span class="header-section-number">6.4</span> R-Datenformate</a>
  <ul>
  <li><a href="#rds" id="toc-rds" class="nav-link" data-scroll-target="#rds"><span class="header-section-number">6.4.1</span> RDS</a></li>
  <li><a href="#rdata" id="toc-rdata" class="nav-link" data-scroll-target="#rdata"><span class="header-section-number">6.4.2</span> RDATA</a>
  <ul class="collapse">
  <li><a href="#mehrere-objekte" id="toc-mehrere-objekte" class="nav-link" data-scroll-target="#mehrere-objekte"><span class="header-section-number">6.4.2.1</span> Mehrere Objekte</a></li>
  <li><a href="#workspace" id="toc-workspace" class="nav-link" data-scroll-target="#workspace"><span class="header-section-number">6.4.2.2</span> Workspace</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#übungsaufgaben" id="toc-übungsaufgaben" class="nav-link" data-scroll-target="#übungsaufgaben"><span class="header-section-number">6.5</span> Übungsaufgaben</a>
  <ul>
  <li><a href="#sec-datenimport-uebungsaufgaben-csv" id="toc-sec-datenimport-uebungsaufgaben-csv" class="nav-link" data-scroll-target="#sec-datenimport-uebungsaufgaben-csv"><span class="header-section-number">6.5.1</span> CSV</a></li>
  <li><a href="#xlsx-und-xls-1" id="toc-xlsx-und-xls-1" class="nav-link" data-scroll-target="#xlsx-und-xls-1"><span class="header-section-number">6.5.2</span> XLSX und XLS</a></li>
  <li><a href="#r" id="toc-r" class="nav-link" data-scroll-target="#r"><span class="header-section-number">6.5.3</span> R</a></li>
  </ul></li>
  <li><a href="#lösungen" id="toc-lösungen" class="nav-link" data-scroll-target="#lösungen"><span class="header-section-number">6.6</span> Lösungen</a>
  <ul>
  <li><a href="#csv-1" id="toc-csv-1" class="nav-link" data-scroll-target="#csv-1"><span class="header-section-number">6.6.1</span> CSV</a></li>
  <li><a href="#xlsx-und-xls-2" id="toc-xlsx-und-xls-2" class="nav-link" data-scroll-target="#xlsx-und-xls-2"><span class="header-section-number">6.6.2</span> XLSX und XLS</a></li>
  <li><a href="#r-1" id="toc-r-1" class="nav-link" data-scroll-target="#r-1"><span class="header-section-number">6.6.3</span> R</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-datenimport" class="quarto-section-identifier"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenimport und -export</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In Zeiten fortschreitender Digitalisierung wächst der Bestand an frei zur Verfügung stehenden Daten in unterschiedlichsten Formaten mit jedem Moment. Nachdem wir bislang nur mit vorgefertigten Datensätzen gearbeitet haben, möchten wir als nächstes lernen, eigens ausgewählte Daten in unsere R-Sitzung zu laden und sie nach getaner Arbeit abzuspeichern. Dabei werden wir uns auf die gängige Tabellenformate beschränken, bevor wir später (<a href="09-geodatenbearbeitung.html" class="quarto-xref"><span>Kapitel 9</span></a>) Geodaten zu importieren lernen.</p>
<p>In diesem Kapitel lernen wir…</p>
<ul>
<li>…wie wir Tabellen im Text- und Excel-Format importieren.</li>
<li>…wie wir angeben, welche Teile einer Tabelle zu importieren sind, welche Datentypen unsere Tabellen enthalten und wie wir fehlende Werte kennzeichnen.</li>
<li>…wie wir veränderte Tabellen in den Ursprungsformaten, aber auch in R-eigenen Formaten, exportieren.</li>
</ul>
<p>Wir benötigen hierfür die folgenden Pakete:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="allgemeiner-ablauf" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="allgemeiner-ablauf"><span class="header-section-number">6.1</span> Allgemeiner Ablauf</h2>
<p>Sobald wir eine Tabelle importieren wollen, müssen wir uns meist eine Reihe an Fragen stellen.</p>
<ul>
<li>Welches <strong>Dateiformat</strong> liegt vor?</li>
<li>An welchem <strong>Ort</strong> befindet sich die Datei?</li>
<li>Liegt eine <strong>Kopfzeile</strong> (<em>header</em>) vor? Wenn ja, welche Namen enthält sie?</li>
<li>Welche <strong>Datentypen</strong> (<a href="03-grundlagen.html#sec-grundlagen-datentypen" class="quarto-xref"><span>Kapitel 3.4</span></a>) haben die einzelnen Spalten?</li>
<li>Durch welches <strong>Trennzeichen</strong> sind die einzelnen Zellen voneinander getrennt (<em>delimited</em>)?</li>
<li>Liegen <strong>fehlende Werte</strong> vor? Wenn ja, wodurch sind sie gekennzeichnet?</li>
</ul>
<p>Wenn wir über diese Informationen verfügen, können wir mit geeigneten Funktionen die Daten wie gewünscht importieren und mit ihnen als <em>data frame</em> weiterarbeiten. Indem wir unseren Code dabei angemessen dokumentieren (<a href="02-workflow.html#sec-workflow-dokumentation" class="quarto-xref"><span>Kapitel 2.3</span></a>), gehen wir sicher, dass wir unsere Daten immer akkurat importieren können, wenn sich eine Ursprungsdatei verändert. Zudem können wir mit Kommiliton*innen und Kolleg*innen unseren Code teilen, sodass wir die Daten stets auf dieselbe Art und Weise “sehen”.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<em>base R</em> oder <code>tidyverse</code>?
</div>
</div>
<div class="callout-body-container callout-body">
<p>In den folgenden Ausführungen nutzen wir Funktionen aus den Paketen <code>readr</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> (das Teil des <code>tidyverse</code> ist, siehe <span class="citation" data-cites="r4ds2023">(<a href="references.html#ref-r4ds2023" role="doc-biblioref">Wickham, Çetinkaya-Rundel, und Grolemund 2023, Kap. 7</a>)</span> und <code>readxl</code>. Das bedeutet jedoch nicht, dass nicht bereits <em>base R</em> viele Möglichkeiten böte. Tatsächlich sind auch “jüngere” Funktionen oft auf Basis von <em>base R</em> geschrieben worden. Deshalb lohnt es sich immer, auch diese kennenzlernen. Eine gute Einführung liefern <span class="citation" data-cites="douglas2024">Douglas u.&nbsp;a. (<a href="references.html#ref-douglas2024" role="doc-biblioref">2024, Kap. 3.3</a> und 3.6)</span>.</p>
</div>
</div>
</section>
<section id="csv" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="csv"><span class="header-section-number">6.2</span> CSV</h2>
<section id="erste-ansicht" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="erste-ansicht"><span class="header-section-number">6.2.1</span> Erste Ansicht</h3>
<p>Das wohl einfachste Tabellenformat ist <strong>CSV</strong>. Dieses Kürzel steht für <strong>c</strong><em>omma</em> <strong>s</strong><em>eparated</em> <strong>v</strong><em>alues</em>, also “durch Kommata getrennte Werte”. Als Beispiel möchten wir uns die Tabelle <a href="https://pos.it/r4ds-students-csv"><code>students.csv</code></a> näher anschauen <span class="citation" data-cites="r4ds2023">(<a href="references.html#ref-r4ds2023" role="doc-biblioref">Wickham, Çetinkaya-Rundel, und Grolemund 2023, Kap. 7.2</a>)</span>. Hierfür öffnen wir die Datei zunächst in ihrer “Rohform”, indem wir einen Browser oder einen Texteditor (wie <em>Notepad</em> unter Windows oder <em>TextEdit</em> unter macOS) heranziehen.</p>
<div class="cell" data-tbl-cap="students.csv in der Texteditor-Ansicht.">
<div class="cell-output cell-output-stdout">
<pre><code>Student ID,Full Name,favourite.food,mealPlan,AGE
1,Sunil Huffmann,Strawberry yoghurt,Lunch only,4
2,Barclay Lynn,French fries,Lunch only,5
3,Jayendra Lyne,N/A,Breakfast and lunch,7
4,Leon Rossini,Anchovies,Lunch only,
5,Chidiegwu Dunkel,Pizza,Breakfast and lunch,five
6,Güvenç Attila,Ice cream,Lunch only,6</code></pre>
</div>
</div>
<p>Die erste Zeile (<code>Student ID,Full Name,favourite.food,mealPlan,AGE</code>) gibt dabei die <strong>Spaltennamen</strong> an. Desweiteren sehen wir, dass die einzelnen <strong>Zellen durch Kommata getrennt</strong> sind. Diese Ansicht ist bei der ersten Betrachtung aber ungewohnt. In der Tabellenansicht sähe <code>students.csv</code> gleich verständlicher aus.</p>
<div class="cell tbl-cap-location-bottom">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption><code>students.csv</code> in der Tabellen-Ansicht.</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 23%">
<col style="width: 26%">
<col style="width: 27%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Student ID</th>
<th style="text-align: left;">Full Name</th>
<th style="text-align: left;">favourite.food</th>
<th style="text-align: left;">mealPlan</th>
<th style="text-align: left;">AGE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Sunil Huffmann</td>
<td style="text-align: left;">Strawberry yoghurt</td>
<td style="text-align: left;">Lunch only</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Barclay Lynn</td>
<td style="text-align: left;">French fries</td>
<td style="text-align: left;">Lunch only</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Jayendra Lyne</td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">Breakfast and lunch</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Leon Rossini</td>
<td style="text-align: left;">Anchovies</td>
<td style="text-align: left;">Lunch only</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Chidiegwu Dunkel</td>
<td style="text-align: left;">Pizza</td>
<td style="text-align: left;">Breakfast and lunch</td>
<td style="text-align: left;">five</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Güvenç Attila</td>
<td style="text-align: left;">Ice cream</td>
<td style="text-align: left;">Lunch only</td>
<td style="text-align: left;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="importieren" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="importieren"><span class="header-section-number">6.2.2</span> Importieren</h3>
<p>Um eine derartige CSV-Datei zu importieren, nutzen wir die Funktion <strong><code>read_csv()</code></strong><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Deren wichtigster Parameter ist <strong><code>file</code></strong>, der als Argument einen <strong>Dateipfad</strong> benötigt. Dieser Dateipfad kann auf eine <strong>lokale Datei</strong> (eine Datei, die sich auf unserem Rechner befindet) verweisen. Wenn wir <code>students.csv</code> in einem Ordner namens <code>files</code> in unserem Projekt gespeichert haben, würden wir die Datei mit dem folgenden Code einlesen und einem Objekt namens <code>students</code> zuschreiben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./files/students.csv"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): Full Name, favourite.food, mealPlan, AGE
dbl (1): Student ID

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Alternativ können wir die CSV-Datei über Ihre <strong>Internetadresse</strong> importieren, wobei wir die Internetadresse in Anführungszeichen setzen müssen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://pos.it/r4ds-students-csv"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): Full Name, favourite.food, mealPlan, AGE
dbl (1): Student ID

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Einmal ausgeführt, liefert uns <code>read_csv()</code> bereits wichtige <strong>Hinweise</strong> darauf, was die Funktion getan hat:</p>
<ul>
<li><code>Delimiter: ","</code>: Kommata wurden korrekterweise als Trennzeichnen genutzt.</li>
<li><code>chr (4): Full Name, favourite.food, mealPlan, AGE</code>: Vier Spalten wurden als Text (<em>character</em>) importiert.</li>
<li><code>dbl (1): Student ID</code>: Eine Spalte wurde als ganze Zahl (<em>double</em>) importiert.</li>
</ul>
<p>Um zu überprüfen, ob dieser Import damit erfolgreich abgeschlossen ist, schauen wir uns <code>students.csv</code> nochmals an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  `Student ID` `Full Name`      favourite.food     mealPlan            AGE  
         &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;
1            1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    
2            2 Barclay Lynn     French fries       Lunch only          5    
3            3 Jayendra Lyne    N/A                Breakfast and lunch 7    
4            4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; 
5            5 Chidiegwu Dunkel Pizza              Breakfast and lunch five 
6            6 Güvenç Attila    Ice cream          Lunch only          6    </code></pre>
</div>
</div>
<p>Auf Anhieb erkennen wir mehrere <strong>Probleme</strong>, die wir angehen möchten:</p>
<ol type="1">
<li>Die <strong>Variablennamen</strong> sind uneinheitlich und deshalb schwer lesbar. Besser wäre es, wenn alle Namen eine ähnliche Struktur hätten.</li>
<li>In der Spalte <code>favourite.food</code> ist mit <code>N/A</code> ein “Wert” enthalten, der eigentlich für einen <strong>fehlenden Wert</strong> steht. Besser wäre es, wenn dieser Wert von R als <code>NA</code> erkannt würde.</li>
<li>Die Werte der Spalte <code>mealPlan</code> sind <strong>als <code>character</code>-Werte eingelesen</strong>, beinhalten aber tatsächlich nur zwei Ausprägungen. Besser wäre es, wenn sie als <code>factor</code> eingelesen würden.</li>
<li>In der Spalte <code>AGE</code> befindet sich mit <code>"five"</code> keine Zahl, sondern ein Text, weshalb die gesamte <strong>Spalte fälschlicherweise als <code>character</code> eingelesen</strong> wurden.</li>
</ol>
<section id="sec-datenimport-csv-importieren-spaltennamen" class="level4" data-number="6.2.2.1">
<h4 data-number="6.2.2.1" class="anchored" data-anchor-id="sec-datenimport-csv-importieren-spaltennamen"><span class="header-section-number">6.2.2.1</span> Einheitliche Spaltennamen</h4>
<p>Um die Spaltennamen anzupassen, können wir beim Import auf eine nützliche Funktion namens <strong><code>clean_names()</code></strong> aus dem <strong><code>janitor</code></strong>-Paket zugreifen. <code>clean_names()</code> “säubert” die Namen eines <em>data frames</em> so, dass sie alle der Schreibweise <code>snake_case</code> folgen (<a href="03-grundlagen.html#sec-grundlagen-eingabe-rechtschreibung" class="quarto-xref"><span>Kapitel 3.1.1</span></a>). Sobald wir <code>janitor</code> geladen haben, können wir die <code>clean_names()</code> einfach mittels der <em>pipe</em> mit <code>read_csv()</code> verbinden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://pos.it/r4ds-students-csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="co"># Spaltennamen: snake_case</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan           age  
       &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    
2          2 Barclay Lynn     French fries       Lunch only          5    
3          3 Jayendra Lyne    N/A                Breakfast and lunch 7    
4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; 
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five 
6          6 Güvenç Attila    Ice cream          Lunch only          6    </code></pre>
</div>
</div>
</section>
<section id="sec-datenimport-csv-import-na" class="level4" data-number="6.2.2.2">
<h4 data-number="6.2.2.2" class="anchored" data-anchor-id="sec-datenimport-csv-import-na"><span class="header-section-number">6.2.2.2</span> Angabe fehlender Werte</h4>
<p>Es kommt immer wieder vor, dass in Tabellen fehlende Werte auf unterschiedliche Weise kenntlich gemacht werden. Standardmäßig hält <code>read_csv()</code> jedoch nur leere Zellen (<code>""</code>) für wirklich fehlende Werte und übersieht damit Angaben wie <code>"</code>N/A<code>"</code>. Um dies zu ändern, nutzen wir den Parameter <strong><code>na</code></strong>, dem wir einen <strong>Vektor mit all jenen Werten als Argument geben, die für fehlende Werte stehen</strong>. Zusätzlich zu <code>""</code> möchten wir also mit <code>na = c("", "N/A")</code> auch noch <code>"N/A"</code> explizit angeben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>)) <span class="sc">|&gt;</span> <span class="co"># NA-Werte: "" und "N/A"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan           age  
       &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    
2          2 Barclay Lynn     French fries       Lunch only          5    
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    
4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; 
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five 
6          6 Güvenç Attila    Ice cream          Lunch only          6    </code></pre>
</div>
</div>
</section>
<section id="sec-datenimport-csv-importieren-datentypen" class="level4" data-number="6.2.2.3">
<h4 data-number="6.2.2.3" class="anchored" data-anchor-id="sec-datenimport-csv-importieren-datentypen"><span class="header-section-number">6.2.2.3</span> Datentypen für Spalten angeben</h4>
<p>Standardmäßig <strong>“rät” <code>readr</code></strong> bei jeder Spalte, um welchen Datentypen es sich handelt <span class="citation" data-cites="r4ds2023">(<a href="references.html#ref-r4ds2023" role="doc-biblioref">Wickham, Çetinkaya-Rundel, und Grolemund 2023, Kap. 7.3.1</a>)</span>. Nicht immer ist <code>readr</code>s Vermutung dabei richtig. Wenn wir möchten, dass <code>meal_plan</code> statt als <code>character</code> als <code>factor</code> eingelesen wird, können wir hierfür den Parameter <code>col_types</code> (<em>column types</em>) nutzen, um <strong>für jede Spalte einen eigenen Datentyp anzugeben</strong>. <code>col_types</code> benötigt dabei eine Funktion namens <code>cols</code>, innerhalb derer wir für jede Spalte, bei der wir von <code>readr</code>s Rat abweichen wollen angeben, eine der folgenden Funktionen nutzen:<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<ul>
<li><strong><code>col_logical()</code></strong>: Die Variable soll als <code>logical</code> eingelesen werden.</li>
<li><strong><code>col_integer()</code></strong>: Die Variable soll als <code>integer</code> eingelesen werden.</li>
<li><strong><code>col_double()</code></strong>: Die Variable soll als <code>double</code> eingelesen werden.</li>
<li><strong><code>col_character()</code></strong>: Die Variable soll als <code>character</code> eingelesen werden.</li>
<li><strong><code>col_factor()</code></strong>: Die Variable soll als <code>factor</code> eingelesen werden.</li>
<li><strong><code>col_date()</code></strong>: Die Variable soll als <code>date</code> eingelesen werden.</li>
<li><strong><code>col_datetime()</code></strong>: Die Variable soll als <code>datetime</code> eingelesen werden.</li>
<li><strong><code>col_skip()</code></strong>: Die Variable soll übersprungen (<em>skip</em>) werden.</li>
</ul>
<p>Mit <code>col_types = cols(mealPlan = col_factor(levels = c("Lunch only", "Breakfast and lunch")))</code> geben wir also innerhalb von <code>read_csv()</code> an, dass <strong><code>mealPlan</code> als <code>factor</code> eingelesen</strong> werden soll und dabei die zwei vorhandenen <strong>Ausprägungen</strong> (<code>"Lunch only"</code> und <code>"Breakfast and lunch"</code>) als <em>levels</em> genutzt werden sollen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">mealPlan =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Lunch only"</span>, <span class="st">"Breakfast and lunch"</span>))) ) <span class="sc">|&gt;</span> <span class="co"># Spaltentypen: mealPlan als factor</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan           age  
       &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;chr&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    
2          2 Barclay Lynn     French fries       Lunch only          5    
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    
4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; 
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five 
6          6 Güvenç Attila    Ice cream          Lunch only          6    </code></pre>
</div>
</div>
<p>Möchten wir den Datentyp einer <strong>weiteren Variable</strong> ändern und zum Beispiel <code>Student ID</code> als <code>integer</code> einlesen, ergänzen wir unseren <code>cols()</code>-Aufruf nur geringfügig.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>),</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">mealPlan =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Lunch only"</span>, <span class="st">"Breakfast and lunch"</span>)),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">`</span><span class="at">Student ID</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_integer</span>()) ) <span class="sc">|&gt;</span> <span class="co"># Spaltentypen: mealPlan als factor, `Student ID` als integer</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan           age  
       &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;chr&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    
2          2 Barclay Lynn     French fries       Lunch only          5    
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    
4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; 
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five 
6          6 Güvenç Attila    Ice cream          Lunch only          6    </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Anpassungen nach dem Import
</div>
</div>
<div class="callout-body-container callout-body">
<p>Tatsächlich handelt es sich bei <strong><code>age</code></strong> aber nicht um eine Variablem vom Typ Text, sondern vom Typ <strong>Zahl</strong>. Wenn wir im Rahmen von <code>col_types</code> dies aber mit <code>col_integer()</code> oder <code>col_double()</code> angäben, würde <code>read_csv()</code> den Wert <strong><code>five</code> ignorieren und als <code>NA</code> behandeln</strong>, weil es einen <code>character</code>-Wert nicht in eine Zahl umwandeln kann.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>),</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">mealPlan =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Lunch only"</span>, <span class="st">"Breakfast and lunch"</span>)),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">`</span><span class="at">Student ID</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_integer</span>(),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">AGE =</span> <span class="fu">col_double</span>())) <span class="sc">|&gt;</span> <span class="co"># Spaltentypen: mealPlan als factor, `Student ID` als integer, AGE als double</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan             age
       &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4
2          2 Barclay Lynn     French fries       Lunch only              5
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7
4          4 Leon Rossini     Anchovies          Lunch only             NA
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch    NA
6          6 Güvenç Attila    Ice cream          Lunch only              6</code></pre>
</div>
</div>
<p>Ein solcher Fall ist nicht durch eine Angabe von Datentypen zu lösen. Stattdessen entscheiden wir uns dafür, <strong>erst die Tabelle einzulesen</strong> und sie <strong>dann zu verändern</strong>. Wir greifen hierfür zunächst auf unseren Code von <a href="#sec-datenimport-csv-importieren-datentypen" class="quarto-xref"><span>Kapitel 6.2.2.3</span></a> zurück.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>),</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">mealPlan =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Lunch only"</span>, <span class="st">"Breakfast and lunch"</span>)),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">`</span><span class="at">Student ID</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_integer</span>()) ) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan           age  
       &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;chr&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only          4    
2          2 Barclay Lynn     French fries       Lunch only          5    
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch 7    
4          4 Leon Rossini     Anchovies          Lunch only          &lt;NA&gt; 
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch five 
6          6 Güvenç Attila    Ice cream          Lunch only          6    </code></pre>
</div>
</div>
<p>Um Spalten einer bestehenden Tabelle zu verändern, nutzen wir <strong><code>mutate()</code></strong> (<a href="04-datentransformation.html#sec-datentransformation-spalten-mutating" class="quarto-xref"><span>Kapitel 4.3.5</span></a>). Um die <code>age</code>-Angabe <code>"five"</code> zu korrigieren, nutzen wir innerhalb von <code>mutate()</code> eine <strong><code>parse_*()</code>-Hilfsfunktion</strong> (zu deutsch etwa “bestimmen” oder “analysieren”). Weil wir den Inhalt von <code>age</code> als Zahl erfassen möchten, schreiben wir <code>age = parse_number(age)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>),</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">mealPlan =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Lunch only"</span>, <span class="st">"Breakfast and lunch"</span>)),</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">`</span><span class="at">Student ID</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_integer</span>()) ) <span class="sc">|&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">parse_number</span>(age)) <span class="co"># age: number</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `age = parse_number(age)`.
Caused by warning:
! 1 parsing failure.
row col expected actual
  5  -- a number   five</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan             age
       &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4
2          2 Barclay Lynn     French fries       Lunch only              5
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7
4          4 Leon Rossini     Anchovies          Lunch only             NA
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch    NA
6          6 Güvenç Attila    Ice cream          Lunch only              6</code></pre>
</div>
</div>
<p>Daraufhin liefert uns <code>readr</code> eine <strong>Warnung</strong>, dass es in einem Falle eine Zahl erwartet, aber ein Wort (<code>five</code>) erhalten hat, das es nicht als Zahl “lesen” kann. Deshalb müssen wir angeben, dass in diesem Fall ein Text (<code>"5"</code>) verwendet werden soll, der sehr wohl in eine Zahl umgewandelt werden kann. Weil es sich um eine Wenn-Dann-Situation handelt, nutzen wir eine <strong>Bedingung</strong> (<a href="04-datentransformation.html#sec-datentransformation-spalten-mutating-bedingungen" class="quarto-xref"><span>Kapitel 4.3.5.5</span></a>).</p>
<p>Mit <code>mutate(age = parse_number(if_else(age == "five", "5", age))</code> bewerkstelligen wir folgendes <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>:</p>
<ol type="1">
<li>Wenn die Spalte <code>age</code> den Wert <code>"five"</code> aufweist, dann wird er durch den Wert <code>"5</code> ersetzt. Ansonsten wird der jeweilige <code>age</code>-Wert unverändert übernommen.</li>
<li>Im nächsten Schritt werden die Textwerte von <code>age</code> als Zahlen “geparst”, also gelesen.</li>
<li>Die Ergebnisse diese Lesevorgangs überschreiben die bisherigen <code>age</code>-Werte.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://pos.it/r4ds-students-csv"</span>,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"N/A"</span>),</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">mealPlan =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Lunch only"</span>, <span class="st">"Breakfast and lunch"</span>)),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">`</span><span class="at">Student ID</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_integer</span>()) ) <span class="sc">|&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">parse_number</span>(<span class="fu">if_else</span>(age <span class="sc">==</span> <span class="st">"five"</span>, <span class="st">"5"</span>, age))) <span class="co"># age: number</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan             age
       &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4
2          2 Barclay Lynn     French fries       Lunch only              5
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7
4          4 Leon Rossini     Anchovies          Lunch only             NA
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5
6          6 Güvenç Attila    Ice cream          Lunch only              6</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="zeilen-überspringen" class="level4" data-number="6.2.2.4">
<h4 data-number="6.2.2.4" class="anchored" data-anchor-id="zeilen-überspringen"><span class="header-section-number">6.2.2.4</span> Zeilen überspringen</h4>
<p>Nicht immer enthalten Dateien ausnahmslos Informationen, die uns interessieren. Nehmen wir an, wir hätten es mit einer Datei zu tun, die in den ersten Zeilen wichtige Informationen in Form sog. <em>metadata</em> enthält. Die <strong>eigentlichen Daten beginnen erst in der zweiten Zeile</strong>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Wichtige Informationen
         Var_1,Var_2,Var_3
         1,2,3
         4,5,6</code></pre>
</div>
</div>
<p>Um die erste <strong>Zeile zu überspringen</strong>, setzen wir den Parameter <strong><code>skip</code></strong> auf <code>1</code>. <code>readr</code> beginnt dann erst ab der zweiten Zeile mit dem Einlesen der Daten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"# Wichtige Informationen</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="st">         Var_1,Var_2,Var_3</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="st">         1,2,3</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="st">         4,5,6"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">skip =</span> <span class="dv">1</span>) <span class="co"># Erste Zeile überspringen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Var_1 Var_2 Var_3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     2     3
2     4     5     6</code></pre>
</div>
</div>
<p>Mit <code>skip</code> können wir also Zeilen “von oben” überspringen. Nicht selten weisen Tabellen aber auch <strong>Fußzeilen</strong> auf, die uns ebensowenig interessieren. In diesem Fall möchten wir angeben, dass nur eine <strong>bestimmte Anzahl an Zeilen eingelesen</strong> werden soll. Hierzu dient der Parameter <strong><code>n_max</code></strong>. Möchten wir in unserem Beispiel die ergänzte Fußzeile ignorieren, geben wir mit <code>n_max = 2</code> an, dass nur zwei Zeilen eingelesen werden sollen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"# Wichtige Informationen</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="st">         Var_1,Var_2,Var_3</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="st">         1,2,3</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="st">         4,5,6,</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="st">         # Nochmal wichtige Informationen"</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">skip =</span> <span class="dv">1</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">n_max =</span> <span class="dv">2</span>) <span class="co"># Maximal drei Zeilen einlesen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Var_1 Var_2 Var_3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     2     3
2     4     5     6</code></pre>
</div>
</div>
</section>
<section id="keine-spaltennamen-nutzen" class="level4" data-number="6.2.2.5">
<h4 data-number="6.2.2.5" class="anchored" data-anchor-id="keine-spaltennamen-nutzen"><span class="header-section-number">6.2.2.5</span> Keine Spaltennamen nutzen</h4>
<p>Manchmal kommt es vor, dass eine Datei keine Spaltenbeschriftungen aufweist. Wenn wir dies nicht wüssten, würden die Werte der ersten Zeile standardmäßig von <code>readr</code> als Beschriftungen genutzt werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"1,2,3</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="st">         4,5,6"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
    `1`   `2`   `3`
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     4     5     6</code></pre>
</div>
</div>
<p>Um dieses (ansonsten nützliche) Verhalten zu unterdrücken und <strong>keine Spaltennamen einzulesen</strong>, können wir den Parameter <strong><code>col_names</code></strong> auf <code>FALSE</code> setzen. In einem solchen Fall vergibt R <strong>automatisch fortlaufende Variablennamen</strong> wie <code>X1</code>, <code>X2</code>, <code>X3</code> usw.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"1,2,3</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="st">         4,5,6"</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">col_names =</span> <span class="cn">FALSE</span>) <span class="co"># Keine Spaltennamen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
     X1    X2    X3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     2     3
2     4     5     6</code></pre>
</div>
</div>
</section>
<section id="eigene-spaltennamen-angeben" class="level4" data-number="6.2.2.6">
<h4 data-number="6.2.2.6" class="anchored" data-anchor-id="eigene-spaltennamen-angeben"><span class="header-section-number">6.2.2.6</span> Eigene Spaltennamen angeben</h4>
<p>Wenn wir eine Tabelle mit automatisch erzeugten Variablennamen vermeiden wollen, können wir auch beim Einlesen dem Parameter <code>col_names</code> einen <strong>Vektor mit entsprechenden Namen</strong> geben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"1,2,3</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="st">         4,5,6"</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"Variable_1"</span>, <span class="st">"Variable_2"</span>, <span class="st">"Variable_3"</span>)) <span class="co"># Eigene Spaltennamen vergeben</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Variable_1 Variable_2 Variable_3
       &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1          1          2          3
2          4          5          6</code></pre>
</div>
</div>
</section>
</section>
<section id="exportieren" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="exportieren"><span class="header-section-number">6.2.3</span> Exportieren</h3>
<p>Um eine einmal importierte Tabelle wieder als CSV zu exportieren können wir das Gegenstück zu <code>read_csv()</code> nutzen, welches passenderweise <strong><code>write_csv()</code></strong> heißt.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Wir möchten unseren sauber importierten <em>data frame</em> <code>students</code> exportieren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan             age
       &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;fct&gt;               &lt;dbl&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4
2          2 Barclay Lynn     French fries       Lunch only              5
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7
4          4 Leon Rossini     Anchovies          Lunch only             NA
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5
6          6 Güvenç Attila    Ice cream          Lunch only              6</code></pre>
</div>
</div>
<p>Um dies zu tun, müssen wir eine <strong>Tabelle</strong> (<code>x</code>) auswählen und zudem einen <strong>Dateinamen</strong> bzw. Dateipfad (<code>file</code>) angeben, der auf <code>.csv</code> endet. Für weitere Funktionalitäten lohnt sich ein Blick in die Dokumentation (<code>?write_csv</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="at">x =</span> students,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">"./files/students_exported.csv"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wie wir sehen, wird die neu erzeugte Datei <code>students_exported.csv</code> auch ohne weiteres wieder korrekt eingelesen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./files/students_exported.csv"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): full_name, favourite_food, meal_plan
dbl (2): student_id, age

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  student_id full_name        favourite_food     meal_plan             age
       &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;              &lt;chr&gt;               &lt;dbl&gt;
1          1 Sunil Huffmann   Strawberry yoghurt Lunch only              4
2          2 Barclay Lynn     French fries       Lunch only              5
3          3 Jayendra Lyne    &lt;NA&gt;               Breakfast and lunch     7
4          4 Leon Rossini     Anchovies          Lunch only             NA
5          5 Chidiegwu Dunkel Pizza              Breakfast and lunch     5
6          6 Güvenç Attila    Ice cream          Lunch only              6</code></pre>
</div>
</div>
</section>
<section id="sec-datenimport-csv-verwandte-funktionen" class="level3" data-number="6.2.4">
<h3 data-number="6.2.4" class="anchored" data-anchor-id="sec-datenimport-csv-verwandte-funktionen"><span class="header-section-number">6.2.4</span> Verwandte Funktionen</h3>
<p>Sobald wir einmal die Logik von <code>read_csv()</code> verstanden haben, können wir diese Wissen leicht auf <strong>verwandte Funktionen</strong> übertragen. Tatsächlich finden sich im CSV-Format nämlich unterschiedliche Arten, welche Trennzeichen für Zellenwerte oder welche Dezimalzeichen verwendet werden. Neben <code>read_csv()</code> sind u.a die folgenden Funktionen entsprechend gut zu kennen <span class="citation" data-cites="r4ds2023">(<a href="references.html#ref-r4ds2023" role="doc-biblioref">Wickham, Çetinkaya-Rundel, und Grolemund 2023, Kap. 7.2.3</a>)</span>:</p>
<ul>
<li><strong><code>read_csv2()</code></strong>: Diese Funktion verwendet Semikola (<code>;</code>) als Trennzeichen und Kommata (<code>,</code>) als Dezimalzeichen. Dieser Standard außerhalb des englischsprachigen Raums geläufig.</li>
<li><strong><code>read_tsv()</code></strong>: Diese Funktion verwendet Einschübe (<em>tabs</em>) als Trennzeichen.</li>
<li><strong><code>read_delim()</code></strong>: Diese Funktion kann Tabellen mit jedem möglichen Trennzeichen einlesen, sofern man es angibt. Viele andere <code>read_*()</code>-Funktionen basieren auf ihr.</li>
</ul>
<p><strong>Für jede <code>read_*()</code>-Funktion existiert zudem eine ergänzende <code>write_*()</code>-Funktion.</strong></p>
</section>
</section>
<section id="xlsx-und-xls" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="xlsx-und-xls"><span class="header-section-number">6.3</span> XLSX und XLS</h2>
<section id="erste-ansicht-1" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="erste-ansicht-1"><span class="header-section-number">6.3.1</span> Erste Ansicht</h3>
<p>Aufgrund der Verbreitung von Microsoft Office-Produkten sind die Dateiformate XLS bzw. XLSX oftmals <strong>unumgänglich</strong>. Deshalb liegen gleich mehrere Pakete vor, um Daten in diesem Formaten in R zu importieren. In diesem Abschnitt möchten wir das Paket <strong><code>readxl</code></strong> kennenlernen. Als <strong>Beispieldatensatz</strong> dient uns <a href="https://docs.google.com/spreadsheets/d/1pWA4NGtTfqK_pQG2b8BdrIuUrMJsGHbE/edit?gid=1805851187#gid=1805851187"><code>sample.xlsx</code></a>. Dieser Datensatz beinhaltet zwei Tabellenblätter (<em>sheets</em>). Das erste Tabellenblatt, <code>bank-full</code>, ist eine Tabelle mit 45211 Zeilen und 17 Spalten, die Informationen zu Bankkunden enthält.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://images.datacamp.com/image/upload/v1678464038/Screenshot_2023_03_08_at_9_05_49_PM_f7a261b840.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Das Tabellenblatt <code>bank-full</code> in <code>sample.xlsx</code> <span class="citation" data-cites="chugh2023">(<a href="references.html#ref-chugh2023" role="doc-biblioref">Chugh 2023</a>)</span>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Das zweite Tabellenblatt, <code>iris</code>, enthält eine Tabelle mit 150 Zeilen und 6 Spalten, die Informationen zu Merkmalen unterschiedlicher Blumen, nämlich Schwertlilien, enthält.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://images.datacamp.com/image/upload/v1678464098/Screenshot_2023_03_08_at_9_08_53_PM_07208c64b8.png" class="img-fluid figure-img" style="width:75.0%"></p>
<figcaption>Das Tabellenblatt <code>iris</code> in <code>sample.xlsx</code> <span class="citation" data-cites="chugh2023">(<a href="references.html#ref-chugh2023" role="doc-biblioref">Chugh 2023</a>)</span>.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="importieren-1" class="level3" data-number="6.3.2">
<h3 data-number="6.3.2" class="anchored" data-anchor-id="importieren-1"><span class="header-section-number">6.3.2</span> Importieren</h3>
<p>Die Funktion, um den Inhalt einer Excel-Datei (XLS oder XLSX) einzulesen, heißt <strong><code>read_excel()</code></strong>. Der Parameter <strong><code>path</code></strong> benötigt (ebenso wie <code>file</code> in <code>read_csv()</code>) einen lokalen <strong>Dateipfad</strong> oder eine <strong>Internetadresse.</strong> Wenn wir nichts weiter einlesen, importiert R den Inhalt des ersten Tabellenblattes als <em>tibble</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>bank_full <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>) <span class="co"># Angabe des Dateipfads</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>bank_full</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 45,211 × 17
     age job       marital education default balance housing loan  contact   day
   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
 1    58 manageme… married tertiary  no         2143 yes     no    unknown     5
 2    44 technici… single  secondary no           29 yes     no    unknown     5
 3    33 entrepre… married secondary no            2 yes     yes   unknown     5
 4    47 blue-col… married unknown   no         1506 yes     no    unknown     5
 5    33 unknown   single  unknown   no            1 no      no    unknown     5
 6    35 manageme… married tertiary  no          231 yes     no    unknown     5
 7    28 manageme… single  tertiary  no          447 yes     yes   unknown     5
 8    42 entrepre… divorc… tertiary  yes           2 yes     no    unknown     5
 9    58 retired   married primary   no          121 yes     no    unknown     5
10    43 technici… single  secondary no          593 yes     no    unknown     5
# ℹ 45,201 more rows
# ℹ 7 more variables: month &lt;chr&gt;, duration &lt;dbl&gt;, campaign &lt;dbl&gt;, pdays &lt;dbl&gt;,
#   previous &lt;dbl&gt;, poutcome &lt;chr&gt;, y &lt;chr&gt;</code></pre>
</div>
</div>
<section id="auswahl-eines-bestimmten-tabellenblattes" class="level4" data-number="6.3.2.1">
<h4 data-number="6.3.2.1" class="anchored" data-anchor-id="auswahl-eines-bestimmten-tabellenblattes"><span class="header-section-number">6.3.2.1</span> Auswahl eines bestimmten Tabellenblattes</h4>
<p>Wenn wir nicht das erste, sondern das zweite Tabellenblatt (<code>iris</code>) importieren möchten, nutzen wir den Parameter <strong><code>sheet</code></strong>. Wir können ihm entweder den <strong>Namen</strong> des Tabellenblattes…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>) <span class="co"># Auswahl des Tabellenblatts anhand des Namens</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
      Id SepalLengthCm SepalWidthCm PetalLengthCm PetalWidthCm Species    
   &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;      
 1     1           5.1          3.5           1.4          0.2 Iris-setosa
 2     2           4.9          3             1.4          0.2 Iris-setosa
 3     3           4.7          3.2           1.3          0.2 Iris-setosa
 4     4           4.6          3.1           1.5          0.2 Iris-setosa
 5     5           5            3.6           1.4          0.2 Iris-setosa
 6     6           5.4          3.9           1.7          0.4 Iris-setosa
 7     7           4.6          3.4           1.4          0.3 Iris-setosa
 8     8           5            3.4           1.5          0.2 Iris-setosa
 9     9           4.4          2.9           1.4          0.2 Iris-setosa
10    10           4.9          3.1           1.5          0.1 Iris-setosa
# ℹ 140 more rows</code></pre>
</div>
</div>
<p>…oder dessen <strong>Position</strong> angeben, um die jeweilige Tabelle zu importieren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="dv">2</span>) <span class="co"># Auswahl des Tabellenblatts anhand der Position</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
      Id SepalLengthCm SepalWidthCm PetalLengthCm PetalWidthCm Species    
   &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;      
 1     1           5.1          3.5           1.4          0.2 Iris-setosa
 2     2           4.9          3             1.4          0.2 Iris-setosa
 3     3           4.7          3.2           1.3          0.2 Iris-setosa
 4     4           4.6          3.1           1.5          0.2 Iris-setosa
 5     5           5            3.6           1.4          0.2 Iris-setosa
 6     6           5.4          3.9           1.7          0.4 Iris-setosa
 7     7           4.6          3.4           1.4          0.3 Iris-setosa
 8     8           5            3.4           1.5          0.2 Iris-setosa
 9     9           4.4          2.9           1.4          0.2 Iris-setosa
10    10           4.9          3.1           1.5          0.1 Iris-setosa
# ℹ 140 more rows</code></pre>
</div>
</div>
</section>
<section id="auswahl-eines-tabellenbereichs" class="level4" data-number="6.3.2.2">
<h4 data-number="6.3.2.2" class="anchored" data-anchor-id="auswahl-eines-tabellenbereichs"><span class="header-section-number">6.3.2.2</span> Auswahl eines Tabellenbereichs</h4>
<p>Selten beinhaltet eine Excel-Datei ausschließlich Daten, die wir benötigen. Regelmäßig enthalten derartige Dateien etwa mehrere (mehr oder weniger nützliche) Überschriften, Fußnoten oder Diagramme. Deshalb können wir mit dem Parameter <strong><code>range</code></strong> einen <strong>Bereich</strong> im Tabellenblatt angeben, dessen Daten wir importieren möchten. Nehmen wir an, wir würden gerne die neun hier ausgewählten Zellenwerte importieren:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/spreadsheet-range.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>Eine Auswahl innerhalb des Tabellenblatts <code>iris</code> in <code>sample.xlsx</code> <span class="citation" data-cites="chugh2023">(<a href="references.html#ref-chugh2023" role="doc-biblioref">Chugh 2023</a>)</span>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Um nur diese Werte zu importieren, müssen wir die <strong>oberste linke Zeile</strong> sowie die <strong>unterste rechte Zeile</strong> angeben. Diese beiden Angaben begrenzen den Bereich, den wir importieren möchten. Diese Angabe können wir auf <strong>zwei Arten</strong> vornehmen:</p>
<ul>
<li><strong>Excel-Schreibweise</strong>: Excel benennt Spalten mit Buchstaben und Zeilen mit Nummern. Der ausgewählte Bereich “beginnt” also bei <strong>B2</strong> und “endet” bei <strong>D4</strong>. Unser Bereich lautet dieser Schreibweise nach <strong>B2:D4</strong> (gelesen als “Spalte D, Zeile 2 bis Spalte D, Zeile 4”).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">range =</span> <span class="st">"B2:D4"</span>) <span class="co"># Auswahl des Bereichs</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  `5.1` `3.5` `1.4`
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   4.9   3     1.4
2   4.7   3.2   1.3</code></pre>
</div>
</div>
<ul>
<li><strong>Zeilen/Spalten-Schreibweise</strong>: Viele andere Programme, darunter auch R, beginnen Angaben mit der Angabe der Zeile <strong>R</strong> (<em>row</em>) sowie der Spalte <strong>C</strong> (<em>column</em>), gefolgt jeweils von einer Nummer. Unser Bereich lautet dieser Schreibweise nach <strong>R2C2:R4C4</strong> (gelesen als “Zeile 2, Spalte 2 bis Zeile 4, Spalte 4”).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">range =</span> <span class="st">"R2C2:R4C4"</span>) <span class="co"># Auswahl des Bereichs</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  `5.1` `3.5` `1.4`
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   4.9   3     1.4
2   4.7   3.2   1.3</code></pre>
</div>
</div>
<p>Um zu verhindern, dass die Werte der ersten eingelesenen Zeile als <strong>Spaltennamen</strong> importiert werden, müssen wir in solchen Fällen jedoch weitere Parameter heranziehen (<a href="#sec-datenimport-excel-import-keine-spaltennamen" class="quarto-xref"><span>Kapitel 6.3.2.7</span></a>).</p>
</section>
<section id="einheitliche-spaltennamen" class="level4" data-number="6.3.2.3">
<h4 data-number="6.3.2.3" class="anchored" data-anchor-id="einheitliche-spaltennamen"><span class="header-section-number">6.3.2.3</span> Einheitliche Spaltennamen</h4>
<p>Anders als <code>bank-full</code> enthält <code>iris</code> Spaltennamen im sog. <em>camel case</em> (<a href="03-grundlagen.html#sec-grundlagen-eingabe-rechtschreibung" class="quarto-xref"><span>Kapitel 3.1.1</span></a>). Um diese in <em>snake case</em> zu verwandeln, können wir wie zuvor <strong><code>clean_names()</code></strong> nutzen (<a href="#sec-datenimport-csv-importieren-spaltennamen" class="quarto-xref"><span>Kapitel 6.2.2.1</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="co"># Spaltennamen: snake_case</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
      id sepal_length_cm sepal_width_cm petal_length_cm petal_width_cm species  
   &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;    
 1     1             5.1            3.5             1.4            0.2 Iris-set…
 2     2             4.9            3               1.4            0.2 Iris-set…
 3     3             4.7            3.2             1.3            0.2 Iris-set…
 4     4             4.6            3.1             1.5            0.2 Iris-set…
 5     5             5              3.6             1.4            0.2 Iris-set…
 6     6             5.4            3.9             1.7            0.4 Iris-set…
 7     7             4.6            3.4             1.4            0.3 Iris-set…
 8     8             5              3.4             1.5            0.2 Iris-set…
 9     9             4.4            2.9             1.4            0.2 Iris-set…
10    10             4.9            3.1             1.5            0.1 Iris-set…
# ℹ 140 more rows</code></pre>
</div>
</div>
</section>
<section id="angabe-fehlender-werte" class="level4" data-number="6.3.2.4">
<h4 data-number="6.3.2.4" class="anchored" data-anchor-id="angabe-fehlender-werte"><span class="header-section-number">6.3.2.4</span> Angabe fehlender Werte</h4>
<p>Die Angabe von Werten, die als fehlende Werte (<code>NA</code>) erkannt werden sollen, erfolgt analog zu <code>read_csv()</code> mittels des <strong><code>na</code></strong>-Parameters (<a href="#sec-datenimport-csv-import-na" class="quarto-xref"><span>Kapitel 6.2.2.2</span></a>).</p>
</section>
<section id="datentypen-für-spalten-angeben" class="level4" data-number="6.3.2.5">
<h4 data-number="6.3.2.5" class="anchored" data-anchor-id="datentypen-für-spalten-angeben"><span class="header-section-number">6.3.2.5</span> Datentypen für Spalten angeben</h4>
<p>Standardmäßig <strong>“rät” <code>read_excel()</code></strong> bei jeder Spalte, um welchen Datentypen es sich handelt, ebenso wie <code>read_csv()</code>. Nicht immer ist <code>read_excel()</code>s Vermutung dabei richtig. Wenn wir deshalb Datentypen selbst angeben wollen, nutzen wir eine ähnliche, nicht aber die gleiche Schreibweise wie bei <code>read_csv()</code>.</p>
<p>Stattdessen benötigt der Parameter <strong><code>col_types</code></strong> einen <strong>Vektor</strong>, der soviele Werte enthält, wie Spalten eingelesen werden sollen. Wir können hierbei aus uns bekannten Werten wie <code>"logical"</code>, <code>"numeric"</code>, <code>"date"</code>, <code>"text"</code>, <code>"list"</code>, <code>"skip"</code> oder <code>"guess"</code> wählen<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>. <code>"skip"</code> überspringt dabei eine Spalte und liest den Inhalt nicht ein (ebenso wie <code>col_skip()</code> es bei <code>read_csv()</code> tut, <a href="#sec-datenimport-csv-importieren-datentypen" class="quarto-xref"><span>Kapitel 6.2.2.3</span></a>). Glücklicherweise sind die von uns bisher eingelesenen Tabellen <code>bank_full</code> und <code>iris</code> aber fehlerfrei.</p>
</section>
<section id="zeilen-überspringen-1" class="level4" data-number="6.3.2.6">
<h4 data-number="6.3.2.6" class="anchored" data-anchor-id="zeilen-überspringen-1"><span class="header-section-number">6.3.2.6</span> Zeilen überspringen</h4>
<p>Auch bei <code>read_excel()</code> gibt es die Möglichkeit, mithilfe des Parameters <strong><code>skip</code></strong> anzugeben, ob – und wenn ja, wieviele – Zeilen übersprungen werden sollen. Anders als bei <code>read_csv()</code> gilt diese Angabe bei <code>read_excel()</code> jedoch auch für die <strong>Kopfzeile</strong>, die oft die Spaltennamen enthält. Dadurch werden die *Werte der ersten Zeile<strong> ohne weitere Angaben </strong>als Spaltennamen verwendet**.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>,</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">skip =</span> <span class="dv">2</span>) <span class="co"># Erste zwei Zeilen überspringen</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 148 × 6
   `2.0` `4.9` `3.0` `1.4` `0.2` `Iris-setosa`
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;        
 1     3   4.7   3.2   1.3   0.2 Iris-setosa  
 2     4   4.6   3.1   1.5   0.2 Iris-setosa  
 3     5   5     3.6   1.4   0.2 Iris-setosa  
 4     6   5.4   3.9   1.7   0.4 Iris-setosa  
 5     7   4.6   3.4   1.4   0.3 Iris-setosa  
 6     8   5     3.4   1.5   0.2 Iris-setosa  
 7     9   4.4   2.9   1.4   0.2 Iris-setosa  
 8    10   4.9   3.1   1.5   0.1 Iris-setosa  
 9    11   5.4   3.7   1.5   0.2 Iris-setosa  
10    12   4.8   3.4   1.6   0.2 Iris-setosa  
# ℹ 138 more rows</code></pre>
</div>
</div>
</section>
<section id="sec-datenimport-excel-import-keine-spaltennamen" class="level4" data-number="6.3.2.7">
<h4 data-number="6.3.2.7" class="anchored" data-anchor-id="sec-datenimport-excel-import-keine-spaltennamen"><span class="header-section-number">6.3.2.7</span> Keine Spaltennamen nutzen</h4>
<p>Um das <strong>Problem falscher Spaltennamen</strong> zu beheben, kann – wie im Falle von <code>read_csv()</code> – innerhalb von <code>read_excel()</code> mit dem Parameter <strong><code>col_names</code></strong> mit <code>FALSE</code> angegeben werden, dass <strong>keine Spaltennamen</strong> eingelesen werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col_names =</span> <span class="cn">FALSE</span>) <span class="co"># Keine Spaltennamen einlesen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...1`
• `` -&gt; `...2`
• `` -&gt; `...3`
• `` -&gt; `...4`
• `` -&gt; `...5`
• `` -&gt; `...6`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 151 × 6
   ...1  ...2          ...3         ...4          ...5         ...6       
   &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;      
 1 Id    SepalLengthCm SepalWidthCm PetalLengthCm PetalWidthCm Species    
 2 1.0   5.1           3.5          1.4           0.2          Iris-setosa
 3 2.0   4.9           3.0          1.4           0.2          Iris-setosa
 4 3.0   4.7           3.2          1.3           0.2          Iris-setosa
 5 4.0   4.6           3.1          1.5           0.2          Iris-setosa
 6 5.0   5.0           3.6          1.4           0.2          Iris-setosa
 7 6.0   5.4           3.9          1.7           0.4          Iris-setosa
 8 7.0   4.6           3.4          1.4           0.3          Iris-setosa
 9 8.0   5.0           3.4          1.5           0.2          Iris-setosa
10 9.0   4.4           2.9          1.4           0.2          Iris-setosa
# ℹ 141 more rows</code></pre>
</div>
</div>
<p>Damit eventuell vorhandene Spaltennamen aber nicht fälschlicherweise als erste Datenwerte eingelesen werden und deshalb die gesamten Spalten als <code>character</code> erkannt werden, muss in solchen Fällen mit <code>skip = 1</code> dafür gesorgt werden, die <strong>erste Zeile zu überspringen</strong>. <code>readxl</code> vergibt dann <strong>automatisch fortlaufende Variablennamen</strong> wie <code>...1</code>, <code>...2</code>, <code>...3</code> usw.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col_names =</span> <span class="cn">FALSE</span>, <span class="co"># Keine Spaltennamen einlesen</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">skip =</span> <span class="dv">1</span>) <span class="co"># Erste Zeile überspringen</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
    ...1  ...2  ...3  ...4  ...5 ...6       
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      
 1     1   5.1   3.5   1.4   0.2 Iris-setosa
 2     2   4.9   3     1.4   0.2 Iris-setosa
 3     3   4.7   3.2   1.3   0.2 Iris-setosa
 4     4   4.6   3.1   1.5   0.2 Iris-setosa
 5     5   5     3.6   1.4   0.2 Iris-setosa
 6     6   5.4   3.9   1.7   0.4 Iris-setosa
 7     7   4.6   3.4   1.4   0.3 Iris-setosa
 8     8   5     3.4   1.5   0.2 Iris-setosa
 9     9   4.4   2.9   1.4   0.2 Iris-setosa
10    10   4.9   3.1   1.5   0.1 Iris-setosa
# ℹ 140 more rows</code></pre>
</div>
</div>
</section>
<section id="eigene-spaltennamen-angeben-1" class="level4" data-number="6.3.2.8">
<h4 data-number="6.3.2.8" class="anchored" data-anchor-id="eigene-spaltennamen-angeben-1"><span class="header-section-number">6.3.2.8</span> Eigene Spaltennamen angeben</h4>
<p>Wenn wir eine Tabelle mit automatisch erzeugten Variablennamen vermeiden wollen, können wir – genau wie zuvor bei der Nutzung von <code>read_csv()</code> – auch beim Einlesen dem Parameter <code>col_names</code> einen <strong>Vektor mit eigenen Namen</strong> geben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"id"</span>, <span class="st">"sepal_length"</span>, <span class="st">"sepal_width"</span>, <span class="st">"petal_length"</span>, <span class="st">"petal_width"</span>, <span class="st">"species_name"</span>), <span class="co"># Eigene Spaltennamen angeben</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
      id sepal_length sepal_width petal_length petal_width species_name
   &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;       
 1     1          5.1         3.5          1.4         0.2 Iris-setosa 
 2     2          4.9         3            1.4         0.2 Iris-setosa 
 3     3          4.7         3.2          1.3         0.2 Iris-setosa 
 4     4          4.6         3.1          1.5         0.2 Iris-setosa 
 5     5          5           3.6          1.4         0.2 Iris-setosa 
 6     6          5.4         3.9          1.7         0.4 Iris-setosa 
 7     7          4.6         3.4          1.4         0.3 Iris-setosa 
 8     8          5           3.4          1.5         0.2 Iris-setosa 
 9     9          4.4         2.9          1.4         0.2 Iris-setosa 
10    10          4.9         3.1          1.5         0.1 Iris-setosa 
# ℹ 140 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="exportieren-1" class="level3" data-number="6.3.3">
<h3 data-number="6.3.3" class="anchored" data-anchor-id="exportieren-1"><span class="header-section-number">6.3.3</span> Exportieren</h3>
<p>Wie der Name des Pakets es bereits andeutet, sind die Funktionen von <code>readxl</code> ausschließlich zum Importieren von Excel-Dateien gedacht. Mit der Funktion <strong><code>write_xlsx()</code></strong> aus dem gleichnamigen Package <a href="https://docs.ropensci.org/writexl/"><code>writexl</code></a> liegt jedoch eine Erweiterung zum Exportieren eines <em>data frames</em> im Excel-Format vor.</p>
</section>
</section>
<section id="r-datenformate" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="r-datenformate"><span class="header-section-number">6.4</span> R-Datenformate</h2>
<section id="rds" class="level3" data-number="6.4.1">
<h3 data-number="6.4.1" class="anchored" data-anchor-id="rds"><span class="header-section-number">6.4.1</span> RDS</h3>
<p>Um Daten zwischen Nutzer*innen von R zu teilen, kommt einem bestimmten Dateiformat eine besondere Bedeutung zu. Dieses Format ist RDS (<strong><em>R</em></strong> <strong><em>D</em>ata</strong> <strong><em>S</em>tructure</strong>). In diesem Format können wir <strong>einzelne Objekte exportieren</strong>, zum Beispiel <em>data frames</em>. Der <strong>Vorteil gegenüber anderen Exportformaten</strong> wie CSV oder XLSX liegt darin, dass das spezielle R-Format alle <strong>Metadaten</strong> mit exportiert. Das heißt, dass etwa alle <strong>Datentypen</strong> genauso erhalten bleiben, wie wir sie in unserer bisherigen R-Sitzung festgelegt haben. Beim Importieren einer zuvor erzeugten RDS-Datei müssen wir keine weiteren Angaben vornehmen.</p>
<p>Zum <strong>Exportieren</strong> eines R-Objekts nutzen wir die Funktion <strong><code>write_rds()</code></strong><a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>, der wir als Input <code>x</code> ein <strong>Objekt</strong> (hier unsere importierte <code>iris</code>-Tabelle) und als <strong>Dateipfad</strong> <code>file</code> einen Dateinamen mit der Endung <code>.rds</code> angeben. Auf diese Weise wird in unserem angegebenen Verzeichnis eine neue Datei <code>iris.rds</code> erzeugt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sheet =</span> <span class="st">"iris"</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(<span class="at">x =</span> iris,</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">"./files/iris.rds"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um dieselbe Datei zu <strong>importieren</strong>, nutzen wir <strong><code>read_rds()</code></strong><a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="at">file =</span> <span class="st">"./files/iris.rds"</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>iris</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 6
      Id SepalLengthCm SepalWidthCm PetalLengthCm PetalWidthCm Species    
   &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;      
 1     1           5.1          3.5           1.4          0.2 Iris-setosa
 2     2           4.9          3             1.4          0.2 Iris-setosa
 3     3           4.7          3.2           1.3          0.2 Iris-setosa
 4     4           4.6          3.1           1.5          0.2 Iris-setosa
 5     5           5            3.6           1.4          0.2 Iris-setosa
 6     6           5.4          3.9           1.7          0.4 Iris-setosa
 7     7           4.6          3.4           1.4          0.3 Iris-setosa
 8     8           5            3.4           1.5          0.2 Iris-setosa
 9     9           4.4          2.9           1.4          0.2 Iris-setosa
10    10           4.9          3.1           1.5          0.1 Iris-setosa
# ℹ 140 more rows</code></pre>
</div>
</div>
</section>
<section id="rdata" class="level3" data-number="6.4.2">
<h3 data-number="6.4.2" class="anchored" data-anchor-id="rdata"><span class="header-section-number">6.4.2</span> RDATA</h3>
<p>Über RDS hinaus bietet R mit RDATA noch ein weiteres Datenformat zum Austausch von Daten einer R-Sitzung an.</p>
<section id="mehrere-objekte" class="level4" data-number="6.4.2.1">
<h4 data-number="6.4.2.1" class="anchored" data-anchor-id="mehrere-objekte"><span class="header-section-number">6.4.2.1</span> Mehrere Objekte</h4>
<p>Mit der Funktion <strong><code>save()</code></strong> können wir ein oder mehrere Objekte zugleich in einer Datei exportieren. Dafür nennen wir der Funktion die Objekte und geben mit <code>file</code> wiederum einen Dateipfad an, der auf <strong><code>.rdata</code></strong> endet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>bank_full <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sheet =</span> <span class="st">"bank-full"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/sample.xlsx"</span>,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sheet =</span> <span class="st">"iris"</span>)</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(bank_full, iris, <span class="at">file =</span> <span class="st">"./files/banks_and_iris.rdata"</span>) <span class="co"># bank_full und iris gemeinsam als RDATA exportieren</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nachdem wir unseren <em>workspace</em> komplett leeren (hierfür nutzen wir <code>rm(list = ls())</code>, <a href="03-grundlagen.html#sec-grundlagen-objekte-ueberschreiben-entfernen" class="quarto-xref"><span>Kapitel 3.2.1.4</span></a>) und mit <code>ls()</code> überprüfen, dass wir wirklich keine Objekte mehr in unserer Sitzung geladen haben, können wir <strong><code>load()</code></strong> nutzen, um <code>banks_and_iris.rdata</code> erneut zu importieren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># Workspace leeren</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>() <span class="co"># Überprüfen, ob Workspace leer ist</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./files/banks_and_iris.rdata"</span>) <span class="co"># banks_and_iris.rdata importieren</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>() <span class="co"># Überprüfen, ob beide Objekte importiert wurden</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bank_full" "iris"     </code></pre>
</div>
</div>
</section>
<section id="workspace" class="level4" data-number="6.4.2.2">
<h4 data-number="6.4.2.2" class="anchored" data-anchor-id="workspace"><span class="header-section-number">6.4.2.2</span> Workspace</h4>
<p>Wenn wir mit vielen Objekten arbeiten, kann es sinnvoll sein, den <strong>gesamten <em>workspace</em> abzuspeichern</strong> (dies jedoch immer zu tun, wie RStudio es vorschlägt, ist nicht empfehlenswert; <a href="02-workflow.html#sec-workflow-sitzungen" class="quarto-xref"><span>Kapitel 2.2</span></a>). Um dies zu tun, können wir die Funktion <strong><code>save.image()</code></strong> nutzen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">"./files/my_workspace.rdata"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um einen gesamten <em>workspace</em> zu importieren, können wir wiederum auf <strong><code>load()</code></strong> zurückgreifen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./files/my_workspace.rdata"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Sollten wir bereits <strong>Objekte mit identischen Namen</strong> in unserem aktuellen <em>workspace</em> haben, werden diese mit den Objekten aus der RDATA-Datei <strong>überschrieben</strong>. Entsprechend ist es ratsam, einen gesamten <em>workspace</em> nur in einer neuen Sitzung zu importieren.</p>
</section>
</section>
</section>
<section id="übungsaufgaben" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="übungsaufgaben"><span class="header-section-number">6.5</span> Übungsaufgaben</h2>
<p>Für diese Übungsaufgaben nutzen wir unterschiedliche Datensätze des Bayerischen Landesamtes für Statistik, die wir über <a href="https://www.statistikdaten.bayern.de/genesis/online">Genesis-Online</a> beziehen können.</p>
<section id="sec-datenimport-uebungsaufgaben-csv" class="level3" data-number="6.5.1">
<h3 data-number="6.5.1" class="anchored" data-anchor-id="sec-datenimport-uebungsaufgaben-csv"><span class="header-section-number">6.5.1</span> CSV</h3>
<ol type="1">
<li>Laden Sie die Tabelle <a href="https://www.statistikdaten.bayern.de/genesis/online?operation=result&amp;code=12612-003z">12612-003z: Lebendgeborene: Gemeinde, Geschlecht, Jahre</a> im CSV-Format herunter. Importieren Sie dann den Inhalt als <code>geburten_bayern</code> in R.
<ul>
<li>Betrachten Sie die Datei zunächst in einem Texteditor, um den Inhalt zu verstehen. Welches Trennzeichen wir verwendet? Welche Zeilen enthalten Daten? Wie sind die Spalten benannt?</li>
<li>Welche <code>read_*()</code>-Funktion Sie müssen Sie verwenden (<a href="#sec-datenimport-csv-verwandte-funktionen" class="quarto-xref"><span>Kapitel 6.2.4</span></a>)?</li>
<li>Welche Zeilen müssen Sie überspringen (<code>skip</code>)?</li>
<li>Wieviele Zeilen sollen eingelesen werden (<code>n_max</code>)?</li>
<li>Wie müssen die Spalten benannt werden (<code>col_names</code>)?</li>
</ul></li>
</ol>
<p>Ihre Tabelle könnte so aussehen:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 4
    jahr geburten_insgesamt geburten_maennlich geburten_weiblich
   &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;
 1  2013             109562              55913             53649
 2  2014             113935              58695             55240
 3  2015             118228              60511             57717
 4  2016             125689              64503             61186
 5  2017             126191              64294             61897
 6  2018             127616              65272             62344
 7  2019             128227              65760             62467
 8  2020             128764              65932             62832
 9  2021             134321              68881             65440
10  2022             124897              64000             60897
11  2023             116505              59917             56588</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Laden Sie die Tabelle <a href="https://www.statistikdaten.bayern.de/genesis//online?operation=table&amp;code=33111-001z&amp;bypass=true&amp;levelindex=0&amp;levelid=1734102234271">33111-001z: Fläche: Gemeinde, Fläche (ALKIS), Art der tatsächlichen Nutzung (nach ALKIS-Nutzungsarten), Jahre (ab 2014)</a> im CSV-Format herunter. Wählen Sie beim Herunterladen die unten angegebenen Einstellungen aus. Importieren Sie dann den Inhalt als <code>flaechen_bayern</code> in R.
<ul>
<li>Betrachten Sie die Datei zunächst in einem Texteditor, um den Inhalt zu verstehen. Welches Trennzeichen wir verwendet? Welche Zeilen enthalten Daten? Wie sind die Spalten benannt?</li>
<li>Welche <code>read_*()</code>-Funktion Sie müssen Sie verwenden (<a href="#sec-datenimport-csv-verwandte-funktionen" class="quarto-xref"><span>Kapitel 6.2.4</span></a>)?</li>
<li>Welche Zeilen müssen Sie überspringen (<code>skip</code>)?</li>
<li>Wieviele Zeilen sollen eingelesen werden (<code>n_max</code>)?</li>
<li>Wie müssen die Spalten benannt werden (<code>col_names</code>)?</li>
<li><strong>Hinweis</strong>: Mit <code>locale = locale(encoding ="ISO-8859-1")</code> innerhalb von <code>read_*()</code> können Sie Umlaute richtig einlesen.</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/genesis-area-type.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Ausgewählte Einstellungen der Tabelle 33111-001z.</figcaption>
</figure>
</div>
</div>
</div>
<p>Ihre Tabelle könnte so aussehen:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 12
   code beschreibung     `2014` `2015` `2016` `2017` `2018` `2019` `2020` `2021`
  &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1    NA Siedlungs- und … 8.33e5 8.38e5 8.41e5 8.46e5 8.49e5 8.53e5 8.58e5 8.61e5
2    NA Abbauland        1.55e4 1.55e4 1.55e4 1.56e4 1.56e4 1.54e4 1.55e4 1.56e4
3 30000 Vegetation       6.08e6 6.08e6 6.08e6 6.07e6 6.07e6 6.06e6 6.06e6 6.06e6
4 40000 Gewässer         1.21e5 1.21e5 1.21e5 1.21e5 1.22e5 1.22e5 1.22e5 1.22e5
5    NA Insgesamt        7.05e6 7.05e6 7.05e6 7.05e6 7.05e6 7.05e6 7.05e6 7.05e6
# ℹ 2 more variables: `2022` &lt;dbl&gt;, `2023` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="xlsx-und-xls-1" class="level3" data-number="6.5.2">
<h3 data-number="6.5.2" class="anchored" data-anchor-id="xlsx-und-xls-1"><span class="header-section-number">6.5.2</span> XLSX und XLS</h3>
<ol type="1">
<li>Laden Sie die Tabelle <a href="https://www.statistikdaten.bayern.de/genesis/online?operation=abruftabelleBearbeiten&amp;levelindex=1&amp;levelid=1734104471087&amp;auswahloperation=abruftabelleAuspraegungAuswaehlen&amp;auswahlverzeichnis=ordnungsstruktur&amp;auswahlziel=werteabruf&amp;code=61111-311z&amp;auswahltext=&amp;werteabruf=starten#abreadcrumb">61111-311z: Verbraucherpreisindex (2020=100): Bayern, Index für Erdgas, Jahre (ab 2010)</a> im XLSX-Format herunter. Importieren Sie nur die Spalten für Jahr (Spalte B) und den Verbraucherpreisindex (Spalte D) den Inhalt als <code>gaspreise_bayern</code> in R.
<ul>
<li>Welchen Datenbereich soll eingelesen werden (<code>range</code>)?</li>
<li>Welche Spalten sollen übersprungen werden? Welchen Datentypen sollen die verbleibenden Spalten haben (<code>col_types</code>)?</li>
<li>Wie sollen die verbleibenden Spalten benannt werden (<code>col_names</code>)?</li>
</ul></li>
</ol>
<p>Ihre Tabelle könnte so aussehen:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 2
    jahr verbraucherpreisindex_gas
   &lt;dbl&gt;                     &lt;dbl&gt;
 1  2010                      90.9
 2  2011                      95.1
 3  2012                     100  
 4  2013                     101. 
 5  2014                     101. 
 6  2015                     101. 
 7  2016                      98.8
 8  2017                      94  
 9  2018                      93.7
10  2019                      98.6
11  2020                     100  
12  2021                     104. 
13  2022                     179. 
14  2023                     207. </code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Laden Sie die Tabelle <a href="https://www.statistikdaten.bayern.de/genesis/online?operation=abruftabelleBearbeiten&amp;levelindex=2&amp;levelid=1734102323951&amp;auswahloperation=abruftabelleAuspraegungAuswaehlen&amp;auswahlverzeichnis=ordnungsstruktur&amp;auswahlziel=werteabruf&amp;code=61511-111z&amp;auswahltext=&amp;werteabruf=starten&amp;nummer=2&amp;variable=2&amp;name=DLAND#abreadcrumb">61511-111z: Bauland: Gemeinde, Veräußerungsfälle, veräußerte Fläche, Kaufpreis, durchschnittliche Kaufwerte (EUR/qm), Baulandarten, Jahre (ab 2010)</a> im XLSX-Format herunter. Importieren Sie dann nur die Spalten für die Angaben Jahr (Spalte A), die Veräußerungsfälle für Bauland (Spalte B) und baureifes Land (Spalte C) sowie die durchschnittlichen Kaufwerte (Spalten H und I) als <code>kaufpreise_bauland_bayern</code> in R.
<ul>
<li>Welchen Datenbereich soll eingelesen werden (<code>range</code>)?</li>
<li>Welche Spalten sollen übersprungen werden? Welchen Datentypen sollen die verbleibenden Spalten haben (<code>col_types</code>)?</li>
<li>Wie sollen die verbleibenden Spalten benannt werden (<code>col_names</code>)?</li>
</ul></li>
</ol>
<p>Ihre Tabelle könnte so aussehen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>kaufpreise_bauland_bayern <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/61511-111z.xlsx"</span>,</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">range =</span> <span class="st">"A7:I17"</span>,</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"numeric"</span>, <span class="fu">rep</span>(<span class="st">"skip"</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"numeric"</span>, <span class="dv">4</span>)),</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"jahr"</span>, <span class="st">"faelle_bauland_anzahl"</span>, <span class="st">"faelle_baureifes_land_anzahl"</span>, <span class="st">"kaufwert_bauland_qm"</span>, <span class="st">"kaufwert_baureifes_land_qm"</span>))</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>kaufpreise_bauland_bayern</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 5
    jahr faelle_bauland_anzahl faelle_baureifes_land_anzahl kaufwert_bauland_qm
   &lt;dbl&gt;                 &lt;dbl&gt;                        &lt;dbl&gt;               &lt;dbl&gt;
 1  2010               3521647                      2944322                128.
 2  2011               3537516                      2926089                124.
 3  2012               4020912                      3332539                149.
 4  2013               4064813                      3213900                143.
 5  2014               4511884                      3710966                161.
 6  2015               5142653                      4173280                160.
 7  2016               6533061                      5192938                179.
 8  2017               7055189                      5911203                214.
 9  2018               7079947                      5538092                216.
10  2019               6676374                      5527449                211.
11  2020               7456634                      6381527                249.
# ℹ 1 more variable: kaufwert_baureifes_land_qm &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="r" class="level3" data-number="6.5.3">
<h3 data-number="6.5.3" class="anchored" data-anchor-id="r"><span class="header-section-number">6.5.3</span> R</h3>
<ol type="1">
<li>Exportieren Sie <code>geburten</code> als <code>geburten.rds</code>.</li>
<li>Exportieren Sie <code>geburten</code> und <code>flaechen</code> als <code>my_data.rdata</code>.</li>
<li>Exportieren Sie alle Objekte in Ihrem <em>workspace</em> als <code>my_workspace.rdata</code>.</li>
</ol>
</section>
</section>
<section id="lösungen" class="level2" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="lösungen"><span class="header-section-number">6.6</span> Lösungen</h2>
<section id="csv-1" class="level3" data-number="6.6.1">
<h3 data-number="6.6.1" class="anchored" data-anchor-id="csv-1"><span class="header-section-number">6.6.1</span> CSV</h3>
<ol type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>geburten <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="at">file =</span> <span class="st">"./files/12612-003z.csv"</span>,</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">skip =</span> <span class="dv">7</span>,</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">n_max =</span> <span class="dv">11</span>,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"jahr"</span>, <span class="st">"geburten_insgesamt"</span>, <span class="st">"geburten_maennlich"</span>, <span class="st">"geburten_weiblich"</span>))</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>geburten</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv2</span>(<span class="at">file =</span> <span class="st">"./files/33111-001z.csv"</span>,</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">skip =</span> <span class="dv">11</span>,</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">n_max =</span> <span class="dv">5</span>,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"code"</span>, <span class="st">"beschreibung"</span>, <span class="dv">2014</span><span class="sc">:</span><span class="dv">2023</span>),</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">encoding =</span> <span class="st">"ISO-8859-1"</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="xlsx-und-xls-2" class="level3" data-number="6.6.2">
<h3 data-number="6.6.2" class="anchored" data-anchor-id="xlsx-und-xls-2"><span class="header-section-number">6.6.2</span> XLSX und XLS</h3>
<ol type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>gaspreise_bayern <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/61111-311z.xlsx"</span>,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">range =</span> <span class="st">"B7:D20"</span>,</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"numeric"</span>, <span class="st">"skip"</span>, <span class="st">"numeric"</span>),</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"jahr"</span>, <span class="st">"verbraucherpreisindex_gas"</span>))</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>gaspreise_bayern</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>kaufpreise_bauland_bayern <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">"./files/61511-111z.xlsx"</span>,</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">range =</span> <span class="st">"A7:I17"</span>,</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"numeric"</span>, <span class="fu">rep</span>(<span class="st">"skip"</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"numeric"</span>, <span class="dv">4</span>)),</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"jahr"</span>, <span class="st">"faelle_bauland_anzahl"</span>, <span class="st">"faelle_baureifes_land_anzahl"</span>, <span class="st">"kaufwert_bauland_qm"</span>, <span class="st">"kaufwert_baureifes_land_qm"</span>))</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>kaufpreise_bauland_bayern</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-1" class="level3" data-number="6.6.3">
<h3 data-number="6.6.3" class="anchored" data-anchor-id="r-1"><span class="header-section-number">6.6.3</span> R</h3>
<ol type="1">
<li><code>write_rds(geburten, file = "./files/geburten.rds")</code></li>
<li><code>save(geburten, flaechen, file = "my_data.rdata")</code></li>
<li><code>save.image(file = "./files/my_workspace.rdata")</code></li>
</ol>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-chugh2023" class="csl-entry" role="listitem">
Chugh, Vidhi. 2023. <span>„Reading and Importing Excel Files Into R With readxl“</span>. <a href="https://www.datacamp.com/tutorial/r-tutorial-read-excel-into-r" class="uri">https://www.datacamp.com/tutorial/r-tutorial-read-excel-into-r</a>.
</div>
<div id="ref-cui2020" class="csl-entry" role="listitem">
Cui, Yong. 2020. <span>„The Iris Dataset — A Little Bit of History and Biology“</span>. <a href="https://archive.ph/y37wE" class="uri">https://archive.ph/y37wE</a>.
</div>
<div id="ref-douglas2024" class="csl-entry" role="listitem">
Douglas, Alex, Deon Roos, Francesca Mancini, Ana Couto, und David Lusseau. 2024. <em>An Introduction to <span>R</span></em>. <a href="https://intro2r.com/" class="uri">https://intro2r.com/</a>.
</div>
<div id="ref-r4ds2023" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, und Garrett Grolemund. 2023. <em>R for Data Science. Import, Tidy, Transform, Visualize and Model Data</em>. 2nd Aufl. Sebastopol: O’Reilly. <a href="https://r4ds.hadley.nz/">https://r4ds.hadley.nz/</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Auch für dieses Package liegt ein <em>cheatsheet</em> vor (<a href="02-workflow.html#sec-workflow-hilfe-und-selbsthilfe-cheatsheets" class="quarto-xref"><span>Kapitel 2.4.5</span></a>).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Die <em>base R</em>-Grundfunktion heißt <code>read.csv()</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Siehe <code>?readr::cols</code>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Es hilft, den Code von innen nach außen zu lesen, um ihn zu verstehen.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Die <em>base R</em>-Grundfunktion heißt <code>write.csv()</code>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><code>bank-full</code> ist ein umfangreicher Datensatz einer portugiesischen Finanzinstitution, der als Lehrmaterial für fortgeschrittene Modellierungen dient (für weitere Informationen siehe <a href="https://www.kaggle.com/datasets/krantiswalke/bankfullcsv">kaggle</a>).<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><code>iris</code> ist einer der meistgenutzten Übungsdatensätze Bereich <em>data science</em> <span class="citation" data-cites="cui2020">(<a href="references.html#ref-cui2020" role="doc-biblioref">Cui 2020</a>)</span>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Siehe <code>?read_excel</code>.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Diese Funktion basiert auf der <em>base R</em>-Funktion <code>saveRDS()</code>.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>Diese Funktion basiert auf der <em>base R</em>-Funktion <code>readRDS()</code>.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./05-datenvisualisierung.html" class="pagination-link" aria-label="Datenvisualisierung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenvisualisierung</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./07-datenbereinigung.html" class="pagination-link" aria-label="Datenbereinigung">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Datenbereinigung</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>